{"version":3,"sources":["webpack://1kx-sourceCode/./src/components/result/simple.less","webpack://1kx-sourceCode/./src/pages/trade/LimitOrder/index.less","webpack://1kx-sourceCode/./src/pages/trade/chart/data.less","webpack://1kx-sourceCode/./src/pages/trade/chart/index.less","webpack://1kx-sourceCode/./src/pages/trade/closePosition/closePosition.less","webpack://1kx-sourceCode/./src/pages/trade/index.less","webpack://1kx-sourceCode/./src/pages/trade/margin/add.less","webpack://1kx-sourceCode/./src/pages/trade/margin/info.less","webpack://1kx-sourceCode/./src/pages/trade/panel/index.less","webpack://1kx-sourceCode/./src/pages/trade/perp/index.less","webpack://1kx-sourceCode/./src/pages/trade/positions/index.less","webpack://1kx-sourceCode/./src/pages/trade/swap/index.less","webpack://1kx-sourceCode/./src/pages/trade/tpsl/index.less","webpack://1kx-sourceCode/./src/pages/trade/tradeHistory/index.less","webpack://1kx-sourceCode/./src/components/result/simple.tsx","webpack://1kx-sourceCode/./src/components/tradeview/index.tsx","webpack://1kx-sourceCode/./src/components/search/base.tsx","webpack://1kx-sourceCode/./src/components/chooseToken/base.tsx","webpack://1kx-sourceCode/./src/pages/trade/chart/data.tsx","webpack://1kx-sourceCode/./src/pages/trade/chart/index.tsx","webpack://1kx-sourceCode/./src/common/etherUtils.ts","webpack://1kx-sourceCode/./src/pages/trade/swap/index.tsx","webpack://1kx-sourceCode/./node_modules/antd/es/grid/RowContext.js","webpack://1kx-sourceCode/./node_modules/antd/es/grid/col.js","webpack://1kx-sourceCode/./node_modules/antd/es/col/index.js","webpack://1kx-sourceCode/./src/pages/trade/tpsl/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/perp/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/panel/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/margin/info.tsx","webpack://1kx-sourceCode/./src/pages/trade/margin/add.tsx","webpack://1kx-sourceCode/./src/pages/trade/margin/remove.tsx","webpack://1kx-sourceCode/./src/pages/trade/margin/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/closePosition/info.tsx","webpack://1kx-sourceCode/./src/pages/trade/closePosition/closePosition.tsx","webpack://1kx-sourceCode/./src/pages/trade/closePosition/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/positions/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/tradeHistory/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/LimitOrder/index.tsx","webpack://1kx-sourceCode/./src/pages/trade/index.tsx"],"names":["module","exports","Result","msg","txid","token","onOk","chainId","icon","tokenId","symbol","chainData","getChainById","width","title","content","className","styles","src","size","href","exporerTxUrl","network","target","rel","_","strAbbreviation","text","CopySvg","style","cursor","okText","wrapClassName","getContainer","document","getElementById","body","agent","agentVersion","isPhone","updateSelectedIntervalButton","button","window","tvWidget","selectedIntervalButton","classList","remove","add","Tradeview","props","theme","locale","getLocale","initOnReady","datafeedUrl","interval","datafeed","Datafeeds","UDFCompatibleDatafeed","dark","bg","light","t","TradingView","widget","toLowerCase","container","height","library_path","disabled_features","enabled_features","charts_storage_url","charts_storage_api_version","client_id","user_id","preset","toolbar_bg","header_widget_buttons_mode","custom_css_url","loading_screen","backgroundColor","foregroundColor","overrides","onChartReady","chart","buttons","_iFrame","contentWindow","getElementsByTagName","label","resolution","onIntervalChanged","subscribe","changingInterval","forEach","item","createButton","setAttribute","calssName","innerHTML","addEventListener","chartType","getAttribute","localStorage","setItem","contains","_hasExeGetBars","setResolution","setChartType","useEffect","id","escapeRegExpWildcards","searchStr","regExp","test","replace","searchByKeywords","keywords","searchArr","keywordsExp","RegExp","filter","v","liquidity","SearchInput","changeShowList","data","handleChange","e","value","searchResultList","placeholder","onChange","allowClear","prefix","SearchOutlined","ChooseToken","changeToken","currentToken","isLogin","loading","useState","modalVisible","setModalVisible","initList","setInitList","undefined","list","setList","currentTokenIndex","findIndex","length","choose","onClick","footer","open","onCancel","closable","spinning","newlist","map","index","fullName","iconLp","userTokenBalance","balance","amount","Number","PairData","longFundingRate","shortFundingRate","totalShortSize","totalLongSize","userIndexPrice","userIndexTokenDecimal","collateralToken","userCollateralTokenDecimal","totalSize","total","formatSat","toString","calUsdPrice","insuranceFunds","setInsuranceFunds","getInsuranceFunds","FutureLib","res","result","formatNumberToKMBT","console","log","totalLongSizeKMB","useMemo","totalShortSizeKMB","formatMr2","connect","wallet","walletChainId","Chart","dispatch","useDispatch","isDarkMode","tokenDatas","chartSelectedTokenId","chartSelectedPair","loadError","setCurrentToken","onChangeToken","type","payload","_token","find","mapStateToProps","common","tokens","amountSlipMin","slip","slipNum","Math","round","min","BigNumber","sub","mul","div","amountSlipMax","max","Swap","currentWallet","osdTokenData","slippage","swapTokenId","loadingData","tokenIn","setTokenIn","tokenOut","setTokenOut","amountIn","setAmountIn","amountOut","setAmountOut","amountType","setAmountType","priceImpact","setPriceImpact","setTxid","setTotal","submiting","setSubmiting","calculating","setCalculating","resultVisible","setResultVisible","varA","tokenInObj","getTokenDataById","tokenOutObj","getTokenPrice","calcSwapAmountIn","swap","calcSwapAmountOut","calcPoolTotal","fun","changeAmountIn","changeAmountOut","_total","closeResultModal","finishSubmit","hash","handleSubmit","clearTimeout","envir","env","amountInRaw","amountRaw","tokenDecimal","amountOutRaw","amountInRawMax","amountOutRawMin","error","message","calImpact","_amountIn","_amountOut","tokenIn_price","tokenOut_price","zeroImpactToken2Amount","BN","multipliedBy","impact","minus","abs","eq","toFixed","changeAmountInOut","debounce","calcAmountIn","_out","_amountInRaw","calcAmountOut","_in","_amountOutRaw","reverse","tmpIn","beyond_slip","parseFloat","AmountLoading","onAmountChange","align","redCond","conditions","handle","txt","amountTile","visible","close","tokenOuts","effects","RowContext","createContext","__rest","s","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","parseFlex","flex","concat","sizes","Col","ref","_classNames","_React$useContext","getPrefixCls","direction","_React$useContext2","gutter","wrap","supportFlexGap","customizePrefixCls","prefixCls","span","order","offset","push","pull","children","others","sizeClassObj","_extends2","sizeProps","propSize","classes","mergedStyle","horizontalGutter","paddingLeft","paddingRight","verticalGutter","paddingTop","paddingBottom","minWidth","TPSL","maxLeverage","leverage","setLeverage","setTPSL","tpsl","tpPrice","setTpPrice","slPrice","setSlPrice","targetPrice","isLong","tradeType","cost","silderVisible","setSilderVisible","dig","setDig","tpInfo","rate","priceRate","slInfo","tiggerValue","onChangeDetailVisible","checked","onChangeSliderVisible","onChangeDig","Infinity","formatter","findToken","_tokenId","Description","Perp","tokenPairs","positionList","indexTokenData","setIndexTokenData","collsTokenData","setCollsTokenData","setType","setTradeType","findPair","curPair","setCurPair","curPos","setCurPos","curData","setCurData","setTargetPrice","indexTokenList","c","indexToken","OsdTokenData","collsTokenList","userCollateralPrice","findPos","positon","pair","_curpair","updateOpData","indexPrice","formatPriceToBN","String","collateralPrice","opIncreasePosition","tradingFee","pow","collateralTokenDecimal","liqPrice","formatBnPrice","indexLiqPrice","tradingFeeRate","TRADING_FEE_RATE_PRECISION","hourFundingRate","FUNDING_RATE_PRECISION","err","calcMaginIndex","margin","BigInt","LEVERAGE_PRECISION","calcOpIncreasePosition","marginDelta","sizeDelta","calAmountOut","_size","onChangeTokenIn","calAmountIn","_margin","onChangeTokenOut","handleLimitIncreaseAndDecreasePosition","targetPriceRaw","tpPriceRaw","slPriceRaw","execFee","calcLimitDecreaseSizeDelta","notionalDelta","minSizeDelta","maxSizeDelta","params","_collateralToken","_indexToken","_isLong","_increaseMarginDelta","_increaseNotionalDelta","_increaseSizeDelta","calcLimitIncreaseSizeDelta","_increaseExecFee","_decreaseNotionalDelta","_decreaseMinSizeDelta","_decreaseMaxSizeDelta","_decreaseExecFee","handleLimitIncreasePosition","_marginDelta","_notionalDelta","_sizeDelta","_execFee","handleIncreasePosition","reslut","renderLimitResult","TPSLOpt","_tpsl","_maxPrice","_minPrice","beforeSubmit","maskClosable","marginBottom","userMaxLeverage","future","Panel","menuIndex","setMenuIndex","panels","TradeMenuDatas","menuDatas","panel","display","Info","isAdd","openNotional","userLiqPrice","setData","opIncreaseMargin","opDecreaseMargin","oldLeverage","formatLeverage","newLeverage","pos","oldMr","formatMr","calcMr","newMr","mr","mmr","oldMargin","newMargin","newLiqPrice","calcIndexLiqPrice","AddMargin","closeModal","userMargin","collateralTokenObj","indexTokenObj","changeAmount","RemoveMargin","maxRemovable","setMaxRemovable","calcMaxDecreaseMargin","maxStr","Liquidity","setVisible","menutIndex","MarginMenuDatas","userSize","closeShortRes","opDecreasePosition","formatPnl","pnl","isPositive","pnlStr","roeStr","receive","receiveMargin","leftMargin","ClosePostion","opReturn","_data","ClosePositionMenu","ClosePositionDatas","Positions","account","marginVisible","setMarginVisible","closeOrderVisible","setCloseOrderVisible","setLoading","intervalRef","useRef","current","setInterval","clearInterval","showMarginModal","closeOrder","columns","dataIndex","key","render","record","fundingRate","userFundingRate","calcPnl","userMmr","mr_str","dataSource","rowKey","indicator","Loading3QuartersOutlined","spin","fontSize","pageCount","TradeHistory","dataSourceChainId","totalCount","setTotalCount","currentPage","setCurrentPage","records","setRecords","setVarA","getNetwork","getCount","param","count","getRecords","page","skip","first","recordsRes","timeoutA","setTimeout","formatDate","exporerAccountUrl","pagination","showTotal","lastPageCount","history","LimitOrder","tokenPairsReday","tokensReday","callback","ret","handleCancel","limitOrder","orderIndex","execStatus","indexSymbol","collateralSymbol","MarginValue","maxPrice","minPrice","Boolean","Trade","isShowChart","isZk","menu"],"mappings":"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","file":"p__trade.7a3bb8e7.async.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal___1_gXd\",\"result_title\":\"result_title___5hb-i\",\"token\":\"token___1FK7M\",\"name\":\"name___1bUZZ\",\"result_link\":\"result_link___l4B_7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container___2jKSa\",\"editText\":\"editText___3GXKN\",\"longText\":\"longText___15Duk\",\"shortText\":\"shortText___2jJ9l\",\"table_wrap\":\"table_wrap___3D8pK\",\"tableTh\":\"tableTh___2bvcp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"wrap___1OpI5\",\"item\":\"item___zU5Kt\",\"title\":\"title___3culT\",\"desc\":\"desc___3n3h3\",\"long\":\"long___1uSq0\",\"short\":\"short___3wkPh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container___3YDFE\",\"head\":\"head___15mBz\",\"token\":\"token___29QUj\",\"loading\":\"loading___3qch5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___1UP7m\",\"label\":\"label___E0Z4P\",\"value\":\"value___IacHa\",\"amount\":\"amount___1Ncvm\",\"info\":\"info___2gBow\",\"item\":\"item___Vzey6\",\"arr\":\"arr___3rZxA\",\"green\":\"green___sEuxo\",\"red\":\"red___NU2Lf\",\"result_icon\":\"result_icon___BQsqf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container___1CbrE\",\"datas\":\"datas___3_cio\",\"table_datas\":\"table_datas___2RqPN\",\"title_wrap\":\"title_wrap___22dT8\",\"title\":\"title___112th\",\"current_title\":\"current_title___3zuwG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___1iTMp\",\"label\":\"label___1aijI\",\"value\":\"value___7xM9H\",\"amount\":\"amount___1evn4\",\"info\":\"info___x8-9s\",\"item\":\"item___asDq0\",\"arr\":\"arr___2wrBs\",\"green\":\"green___vlGjE\",\"red\":\"red___3tRta\",\"result_icon\":\"result_icon___1elrl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"info___1DWvF\",\"item\":\"item___3hTZ9\",\"value\":\"value___2vWj2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container___JUd0k\",\"menu\":\"menu___do0Dr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___-cdFP\",\"label\":\"label___3sEo9\",\"value\":\"value___27Ayq\",\"amount\":\"amount___1R05F\",\"info\":\"info___1wQzP\",\"item\":\"item___2dUcO\",\"arr\":\"arr___2_7li\",\"green\":\"green___qdu2p\",\"red\":\"red___1OEwC\",\"result_icon\":\"result_icon___3-1TI\",\"container\":\"container___2dK5f\",\"green_btn\":\"green_btn___3-Dfq\",\"red_btn\":\"red_btn___3H6fG\",\"tradeTypes\":\"tradeTypes___3EkL1\",\"active\":\"active___2HsGX\",\"modalWrap\":\"modalWrap___23PE4\",\"ant-modal-confirm\":\"ant-modal-confirm___kCDGO\",\"ant-modal-confirm-btns\":\"ant-modal-confirm-btns___15Nxr\",\"modal\":\"modal___3xaEM\",\"modalContainer\":\"modalContainer___3rtr6\",\"title\":\"title___4HGu5\",\"subTitle\":\"subTitle___2lVqs\",\"icon\":\"icon___peR4F\",\"link\":\"link___ecUCj\",\"content\":\"content___3cJhK\",\"DescriptionItem\":\"DescriptionItem___3nOyb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action\":\"action___1mXKf\",\"close\":\"close___1JRKn\",\"green\":\"green___5xcuC\",\"red\":\"red___3IMlB\",\"table\":\"table___10SoB\",\"type\":\"type___19l_i\",\"text\":\"text___6Jsaq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___12_YK\",\"label\":\"label___1i87X\",\"value\":\"value___10mvD\",\"amount\":\"amount___1a1tA\",\"info\":\"info___1E0ri\",\"item\":\"item___2rFou\",\"arr\":\"arr___1G7cO\",\"green\":\"green___1DTBX\",\"red\":\"red___3bNDu\",\"result_icon\":\"result_icon___3TEtn\",\"container\":\"container___1akww\",\"cardPay\":\"cardPay___3iFvS\",\"cardReceive\":\"cardReceive___21mqq\",\"title\":\"title___1UCoc\",\"arrCircle\":\"arrCircle___1UUf_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___23Xeh\",\"label\":\"label___1yf02\",\"value\":\"value___1izNl\",\"amount\":\"amount___1TgUu\",\"info\":\"info___2ZjGy\",\"item\":\"item___lQXSz\",\"arr\":\"arr___37VJx\",\"green\":\"green___2xKdg\",\"red\":\"red___3B8Id\",\"result_icon\":\"result_icon___1le6K\",\"slider\":\"slider___1EgIv\",\"row\":\"row___1sQqU\",\"tpsl\":\"tpsl___31WMX\",\"checkbox\":\"checkbox___2CZwt\",\"silder_trigger\":\"silder_trigger___3-UZq\",\"txt\":\"txt____r4mf\",\"dig\":\"dig___1vySU\",\"amount_green\":\"amount_green___1LFDz\",\"amount_red\":\"amount_red___1if3C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container___3aGt9\"};","import { Modal } from 'antd'\nimport styles from './simple.less'\nimport _ from '@/i18n'\nimport Clipboard from '@/components/clipboard'\nimport CopySvg from '@/assets/svg/copy.svg'\nimport { strAbbreviation } from '@/common/utils'\nimport DefultIcon from '../icon/defult'\nimport { getChainById } from '@/layout/header/chainData'\n\nexport function Result({\n  msg,\n  txid,\n  token,\n  onOk,\n  chainId,\n}: {\n  msg: any\n  txid: string\n  chainId: string\n  token?: { icon: string; symbol: string; tokenId: string }\n  onOk?: any\n}) {\n  const { icon, tokenId, symbol } = token || {}\n  const chainData = getChainById(chainId)\n  Modal.warning({\n    width: 420,\n    title: '',\n    content: (\n      <div className={styles.container}>\n        <div className={styles.result_title}>\n          {token && (\n            <div className={styles.token}>\n              {icon ? <img src={icon} width={25} /> : <DefultIcon tokenId={tokenId} size={25} />}\n              <div className={styles.name}>{symbol}</div>\n            </div>\n          )}\n          {msg}\n        </div>\n        <div className={styles.result_link}>\n          <a\n            className=\"primary\"\n            href={`${chainData.exporerTxUrl}/${txid}?network=${chainData.network}`}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            {_('browse')}: {strAbbreviation(txid, [16, 16])}\n          </a>\n          <Clipboard text={txid}>\n            <img src={CopySvg} style={{ cursor: 'pointer' }} />\n          </Clipboard>\n        </div>\n      </div>\n    ),\n    onOk,\n    okText: _('ok'),\n    wrapClassName: styles.modal,\n    getContainer: () => document.getElementById('J_Page') || document.body,\n  })\n}\n","import { useEffect } from 'react'\nimport { getLocale } from 'umi'\nimport { agentVersion } from '@/common/utils'\n\nconst agent = agentVersion()\nconst isPhone = agent === 'iPhone' || agent === 'Android'\n\nfunction updateSelectedIntervalButton(button) {\n  // @ts-ignore\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  window.tvWidget.selectedIntervalButton &&\n    window.tvWidget.selectedIntervalButton.classList.remove('selected')\n  button.classList.add('selected')\n  // @ts-ignore\n  window.tvWidget.selectedIntervalButton = button\n}\n\nfunction Tradeview(props) {\n  // console.log(props)\n  const { symbol, theme } = props\n  const locale = getLocale()\n  // const [w, setW] = useState(676)\n\n  // const handleResize = (e) => {\n  //   console.log(e.target.innerWidth)\n  //   const { innerWidth } = e.target\n  //   if (innerWidth < 676 && innerWidth > 300) {\n  //     setW(innerWidth)\n  //   }\n  // }\n\n  const initOnReady = () => {\n    // let datafeedUrl = 'https://demo-feed-data.tradingview.com'\n    let datafeedUrl = 'https://zksync-data-feed.onchain.trade/data-feed'\n    // if (dataUrl !== '') {\n    //   datafeedUrl = dataUrl.startsWith('https://') ? dataUrl : `https://${dataUrl}`\n    // }\n    // @ts-ignore\n    let interval = '5'\n    let datafeed = new window.Datafeeds.UDFCompatibleDatafeed(datafeedUrl)\n\n    const dark = {\n      bg: '#1D2233',\n      text: '#fff',\n    }\n    const light = {\n      bg: '#fff',\n      text: '#000',\n    }\n    const t = theme === 'Dark' ? dark : light\n\n    window.tvWidget = new window.TradingView.widget({\n      // debug: true, // uncomment this line to see Library errors and warnings in the console\n      // fullscreen: true,\n      // symbol: 'AAPL',\n      symbol: symbol.toLowerCase(),\n      interval,\n      container: 'tv_chart_container',\n      width: isPhone ? '360px' : '676px',\n      height: '302px',\n\n      //\tBEWARE: no trailing slash is expected in feed URL\n      // @ts-ignore\n      datafeed,\n      library_path: '/charting_library/',\n      locale: locale === 'zh-cn' ? 'zh' : 'en',\n\n      disabled_features: [\n        'use_localstorage_for_settings',\n        'header_widget_dom_node',\n        'header_symbol_search',\n        'header_resolutions',\n        'header_chart_type',\n        'header_settings',\n        'header_indicators',\n        'header_compare',\n        'header_undo_redo',\n        'header_screenshot',\n        'header_fullscreen_button',\n        'border_around_the_chart',\n        'header_saveload',\n        'drawing_templates',\n        // 'insert_indicator_dialog_shortcut',\n        // 'create_volume_indicator_by_default_once'\n        'source_selection_markers',\n        'volume_force_overlay',\n        'create_volume_indicator_by_default_once',\n        'create_volume_indicator_by_default',\n        'study_symbol_ticker_description',\n        'insert_indicator_dialog_shortcut',\n      ],\n      enabled_features: ['header_widget'],\n      charts_storage_url: 'https://saveload.tradingview.com',\n      charts_storage_api_version: '1.1',\n      client_id: 'tradingview.com',\n      user_id: 'public_user_id',\n      preset: 'mobile',\n      toolbar_bg: '#ffffff',\n      header_widget_buttons_mode:'adaptive',\n      custom_css_url: '/css/tradingView.css',\n\n      loading_screen: {\n        backgroundColor: t.bg,\n        foregroundColor:'#03cdc1'\n      },\n      theme,\n   \n      overrides: {\n        'paneProperties.backgroundType': 'solid',\n        'paneProperties.background': t.bg,\n        // 'paneProperties.backgroundGradientStartColor': \"#ffffff\",\n        'scalesProperties.lineColor': t.bg,\n        // 'scalesProperties.textColor': t.text,\n        // 'paneProperties.vertGridProperties.color': t.bg,\n        // 'paneProperties.horzGridProperties.color': t.bg,\n        'mainSeriesProperties.candleStyle.barColorsOnPrevClose': true,\n        'mainSeriesProperties.haStyle.barColorsOnPrevClose': true,\n        'mainSeriesProperties.barStyle.barColorsOnPrevClose': true,\n        \n\n\n      },\n    })\n    //\n    // @ts-ignore\n    window.tvWidget.onChartReady(() => {\n      // @ts-ignore\n      const chart = window.tvWidget.chart()\n      const doc = window.tvWidget._iFrame.contentWindow.document.getElementsByTagName('html')[0]\n      // doc.style.setProperty('--tv-color-pane-background', t.bg)        \n      // chart.style.setAttribute('style', `background:${t.bg}`);\n      // chart.setAttribute('style', `background:${t.bg}`)\n      // console.log('onChartReady')\n      // https://1kx-zksync-data-feed.volt.id/data-feed/select\n      const buttons = [\n        // { label: 'time', resolution: '15s' },\n        // { label: '1m', resolution: '1' },\n        { label: '5m', resolution: '5' },\n        { label: '15m', resolution: '15' },\n        // { label: '30m', resolution: '30' },\n        { label: '1H', resolution: '60' },\n        // { label: '4h', resolution: '240' },\n        { label: '1D', resolution: 'D' },\n        // { label: '1w', resolution: '1W' },\n        { label: '1M', resolution: '1M' },\n        // { label: '1y', resolution: '12M' },\n      ]\n      chart.onIntervalChanged().subscribe(null, function () {\n        window.tvWidget.changingInterval = false\n      })\n      buttons.forEach((item) => {\n        const button = window.tvWidget.createButton()\n        \n        // console.log('button', Object.keys(button.__proto__), typeof button)\n        // console.log('button', button)\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        item.resolution === interval && updateSelectedIntervalButton(button)\n        button.setAttribute('data-resolution', item.resolution)\n        button.setAttribute('data-chart-type', 1)\n        let calssName='cusButton'\n        if(item.resolution === interval){\n          calssName='cusButton selected'\n        }\n        button.setAttribute('class', calssName)\n        \n        button.innerHTML = '<span>' + item.label + '</span>'\n        button.addEventListener('click', function () {\n          const chartType = +button.getAttribute('data-chart-type')\n          const resolution = button.getAttribute('data-resolution')\n          localStorage.setItem('tv-interval-charttype', `${resolution}-${chartType}`)\n          if (!window.tvWidget.changingInterval && !button.classList.contains('selected')) {\n            if (chart.resolution() !== resolution) {\n              // console.log('change resolution:', resolution, chart.resolution());\n              window.tvWidget.changingInterval = true\n              datafeed._hasExeGetBars = false\n              chart.setResolution(resolution)\n            }\n            if (chart.chartType() !== chartType) {\n              chart.setChartType(chartType)\n              datafeed._hasExeGetBars = false\n            }\n            updateSelectedIntervalButton(button)\n          }\n        })\n      })\n    })\n  }\n\n  useEffect(() => {\n    initOnReady()\n  }, [theme, symbol])\n\n  // useEffect(() => {\n  //   window.addEventListener('resize', handleResize)\n  //   return window.removeEventListener('resize', handleResize)\n  // }, [])\n\n  return <div id=\"tv_chart_container\" />\n}\n\nexport default Tradeview","import _ from '@/i18n'\nimport { Input } from 'antd'\nimport { SearchOutlined } from '@ant-design/icons'\n\nconst escapeRegExpWildcards = (searchStr: string) => {\n  const regExp = /([\\(\\[\\{\\\\\\^\\$\\}\\]\\)\\?\\*\\+\\.])/gim\n  if (searchStr && regExp.test(searchStr)) {\n    return searchStr.replace(regExp, '\\\\$1')\n  }\n  return searchStr\n}\n\nconst searchByKeywords = (keywords: string, searchArr) => {\n  const keywordsExp = new RegExp('.*?' + escapeRegExpWildcards(keywords) + '.*?', 'img')\n\n  return searchArr.filter((v) => {\n    return keywordsExp.test(v.symbol) || keywords == v.tokenId || keywords == v.liquidity\n  })\n}\n\nfunction SearchInput(props) {\n  const { changeShowList, data } = props\n\n  const handleChange = (e) => {\n    const { value } = e.target\n\n    if (!value) {\n      return changeShowList(data)\n    }\n    const searchResultList = searchByKeywords(value, data)\n    changeShowList(searchResultList)\n  }\n\n  return (\n    <Input\n      placeholder={_('search_tips')}\n      onChange={handleChange}\n      className=\"search_input\"\n      allowClear={true}\n      prefix={<SearchOutlined />}\n    />\n  )\n}\n\nexport default SearchInput\n","import { Modal } from 'antd'\nimport { useEffect, useState } from 'react'\nimport { DownloadArr } from '../ui'\nimport styles from './index.less'\nimport _ from '@/i18n'\nimport Token from './token'\nimport USD from '@/components/price/usd'\nimport SearchInput from '../search/base'\nimport type { TokenDataType } from '@/models/dataType'\nimport DefultIcon from '../icon/defult'\nimport { Loading as Spin } from '@/components/loading'\ntype propsType = {\n  changeToken: (token: TokenDataType) => void\n  data: TokenDataType[]\n  currentToken: TokenDataType\n  isLogin: boolean\n  loading: boolean\n  className: string\n}\nfunction ChooseToken(props: propsType) {\n  const { changeToken, data = [], currentToken, isLogin, loading, className } = props\n  const [modalVisible, setModalVisible] = useState(false)\n  const [initList, setInitList] = useState(data)\n  const [list, setList] = useState<TokenDataType[] | undefined>(undefined)\n  let currentTokenIndex: number | undefined = undefined\n  if (currentToken && currentToken.tokenId)\n    currentTokenIndex = data.findIndex((v) => v.tokenId === currentToken.tokenId)\n\n  // console.log('currentTokenIndex:', currentTokenIndex)\n  // console.log('data', data)\n\n  useEffect(() => {\n    if (data.length > 0) setInitList(data)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, isLogin])\n\n  const choose = (item: TokenDataType) => {\n    setModalVisible(false)\n    changeToken(item)\n  }\n  return (\n    <>\n      {typeof currentTokenIndex === 'undefined' ? (\n        <div\n          className={`${styles.token} ${styles.noToken} ${className}`}\n          onClick={() => setModalVisible(true)}\n        >\n          <div className={styles.noData}>{_('select_asset')}</div>\n          <DownloadArr />\n        </div>\n      ) : (\n        <Token\n          className={className}\n          changeToken={() => setModalVisible(true)}\n          data={currentToken}\n        />\n      )}\n\n      <Modal\n        width={420}\n        footer={null}\n        open={modalVisible}\n        getContainer={() => document.getElementById('J_Page') || document.body}\n        onCancel={() => setModalVisible(false)}\n        closable={false}\n        wrapClassName={styles.modal}\n      >\n        <Spin spinning={loading}>\n          <div className={styles.container}>\n            <div className={styles.search_wrap}>\n              <SearchInput\n                changeShowList={(newlist: TokenDataType[]) => setList(newlist)}\n                data={data}\n              />\n            </div>\n            <div className={styles.content}>\n              {(list || initList).map((item, index) => {\n                const { symbol, fullName, icon, iconLp, tokenId, userTokenBalance } = item\n                const balance = userTokenBalance\n                return (\n                  <div\n                    className={\n                      currentTokenIndex === index\n                        ? `${styles.item} ${styles[`no${index}`]} ${styles.selected_item}`\n                        : `${styles.item} ${styles[`no${index}`]}`\n                    }\n                    key={tokenId}\n                    onClick={() => choose(item)}\n                  >\n                    <div className={styles.info}>\n                      <div className={styles.icon}>\n                        {iconLp || icon ? (\n                          <img src={icon} />\n                        ) : (\n                          <DefultIcon tokenId={tokenId} size={25} />\n                        )}\n                      </div>\n                      <div className={styles.title}>\n                        <div className={styles.symbol}>{symbol}</div>\n                        <div className={styles.full_name}>{fullName}</div>\n                      </div>\n                    </div>\n                    <div className={styles.balance}>\n                      <div className={styles.no}>{balance}</div>\n                      <div className={styles.usd}>\n                        <USD data={{ amount: Number(balance), token: item }} />\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        </Spin>\n      </Modal>\n    </>\n  )\n}\n\nexport default ChooseToken\n","import { calUsdPrice, formatSat } from '@/common/utils'\nimport { formatMr2 } from '../perp/utils'\nimport { formatNumberToKMBT } from '@/common/utils'\nimport FutureLib from '@/lib/future'\nimport { connect } from 'umi'\nimport styles from './data.less'\nimport { useEffect, useMemo, useState } from 'react'\n\nfunction PairData(props) {\n  const {\n    longFundingRate,\n    shortFundingRate,\n    totalShortSize,\n    totalLongSize,\n    userIndexPrice,\n    userIndexTokenDecimal,\n    collateralToken,\n    userCollateralTokenDecimal,\n  } = props.data\n  const totalSize = (size: bigint) => {\n    if (!size) return 0\n    const total = formatSat(size.toString(), userIndexTokenDecimal)\n    return calUsdPrice(total, userIndexPrice)\n  }\n\n  const [insuranceFunds, setInsuranceFunds] = useState('-')\n  useEffect(() => {\n    //\n    const getInsuranceFunds = async () => {\n      const res = await FutureLib.collateralInsuranceFunds(props.chainId, collateralToken)\n\n      const total = formatSat(res.toString(), userCollateralTokenDecimal)\n      const result = formatNumberToKMBT(Number(total))\n      console.log(collateralToken, props.chainId, res, result, 'collateralToken,props.chainIds')\n      setInsuranceFunds(result)\n    }\n    if (props.chainId && collateralToken) {\n      getInsuranceFunds()\n    }\n  }, [collateralToken, props.chainId, userCollateralTokenDecimal])\n\n  const totalLongSizeKMB = useMemo(() => {\n    return formatNumberToKMBT(Number(totalSize(totalLongSize || 0)))\n  }, [totalLongSize])\n  const totalShortSizeKMB = useMemo(() => {\n    return formatNumberToKMBT(Number(totalSize(totalShortSize || 0)))\n  }, [totalShortSize])\n  console.log(props, 'data------')\n  if (!userIndexTokenDecimal) return null\n  return (\n    <div className={styles.wrap}>\n      <div className={styles.item}>\n        <div className={styles.title}>Mark: </div>\n        <div className={styles.desc}>Spot: </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.title}> --</div>\n        <div className={styles.desc}>24H Volume</div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.title}>-- </div>\n        <div className={styles.desc}>24H Fee </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.long}>\n          L ${totalLongSizeKMB} | {formatMr2(longFundingRate || 0)}\n        </div>\n        <div className={styles.short}>\n          S ${totalShortSizeKMB} | {formatMr2(shortFundingRate || 0)}\n        </div>\n      </div>\n      {/* <div className={styles.item}>\n        <div className={styles.title}>-- </div>\n        <div className={styles.desc}>APY </div>\n      </div> */}\n      <div className={styles.item}>\n        <div className={styles.title}> ${insuranceFunds}</div>\n        <div className={styles.desc}>Insurance Pool </div>\n      </div>\n    </div>\n  )\n}\n\nexport default connect(({ wallet }) => ({\n  chainId: wallet.walletChainId,\n}))(PairData)\n","import styles from './index.less'\nimport Tradeview from '@/components/tradeview'\nimport type {\n  CommonStateType,\n  TokenDataType,\n  TokenStateType,\n  WalletStateType,\n} from '@/models/dataType'\nimport { connect,useDispatch } from 'umi'\nimport ChooseToken from '@/components/chooseToken/base'\nimport { useEffect, useState } from 'react'\nimport { Loading } from '@/components/loading'\nimport PairData from './data'\n\nfunction Chart(props: CommonStateType & TokenStateType & WalletStateType) {\n  const dispatch = useDispatch()\n  const { isDarkMode, tokenDatas, chartSelectedTokenId, isLogin, chartSelectedPair, loadError } =\n    props\n  console.log(chartSelectedPair,'chartSelectedPair')\n  const [currentToken, setCurrentToken] = useState<TokenDataType>({} as TokenDataType)\n\n  const onChangeToken = (token: TokenDataType) => {\n    // setCurrentToken(token)\n    dispatch({\n      type: 'tokens/save',\n      payload: {\n        chartSelectedTokenId: token.id,\n        chartSelectedPair: {},\n      },\n    })\n  }\n  // useEffect(() => {\n  //   console.log(currentToken.symbol && tokenDatas && tokenDatas[1])\n  //   if (!currentToken.symbol && tokenDatas && tokenDatas[1]) setCurrentToken(tokenDatas[1])\n  // }, [currentToken.symbol, tokenDatas])\n\n  useEffect(() => {\n    if (chartSelectedTokenId) {\n      const _token = tokenDatas.find((v) => v.id === chartSelectedTokenId)\n      if (_token) {\n        setCurrentToken(_token)\n      }\n    } else if (tokenDatas && tokenDatas[0]) {\n      // debugger\n      setCurrentToken(tokenDatas[0])\n    }\n  }, [chartSelectedTokenId, tokenDatas, tokenDatas && tokenDatas.length])\n\n  return (\n    <div className={`panel ${styles.container}`}>\n      {tokenDatas && !currentToken.symbol && !loadError ? (\n        <div className={styles.loading}>\n          <Loading />\n        </div>\n      ) : (\n        <>\n          <div className={styles.head}>\n            <ChooseToken\n              currentToken={currentToken}\n              changeToken={onChangeToken}\n              data={(tokenDatas || []).filter((v) => v.symbol && v.symbol.toLowerCase() !== 'osd')}\n              className={styles.token}\n              loading={tokenDatas && tokenDatas.length < 1}\n              isLogin={isLogin}\n            />\n            {chartSelectedPair && <PairData data={chartSelectedPair} />}\n          </div>\n          {currentToken.symbol && (\n            <Tradeview theme={isDarkMode ? 'Dark' : 'Light'} symbol={currentToken.symbol} />\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(Chart)\n","import type { BigNumberish } from 'ethers'\nimport { BigNumber } from 'ethers'\n\nexport function e(num: BigNumberish, exp: BigNumberish) {\n  return BigNumber.from(10).pow(exp).mul(num)\n}\n\nexport function amountSlipMin(amount: string, slip: string) {\n  const slipNum = Math.round(+slip * 10000)\n  const min = BigNumber.from(amount).sub(\n    BigNumber.from(amount)\n      .mul(slipNum)\n      .div(100 * 10000),\n  )\n  return min.toString()\n}\n\nexport function amountSlipMax(amount: string, slip: string) {\n  const slipNum = Math.round(+slip * 10000)\n  const max = BigNumber.from(amount).add(\n    BigNumber.from(amount)\n      .mul(slipNum)\n      .div(100 * 10000),\n  )\n  return max.toString()\n}\n","import _ from '@/i18n'\nimport styles from './index.less'\nimport Btn from '@/components/btn'\nimport { DoubleArrCircle,SwapDownArr } from '@/components/ui'\nimport {\n  amountRaw,\n  debounce,\n  envir,\n  formatSat,\n  getTokenDataById,\n  // newSetInterval,\n  toFixed,\n} from '@/common/utils'\nimport { connect, useDispatch } from 'umi'\nimport type { CommonStateType, TokenStateType, WalletStateType } from '@/models/dataType'\nimport { useEffect, useState } from 'react'\nimport { amountSlipMax, amountSlipMin } from '@/common/etherUtils'\nimport { message } from '@/components/message'\nimport { Loading as Spin } from '@/components/loading'\nimport SimpleCard from '@/components/card'\nimport Result from '@/components/result'\nimport { AmountLoading } from '@/common/config'\nimport BN from 'bignumber.js'\n\nfunction Swap(props: {\n  tokenDatas: any\n  walletChainId: any\n  dataSourceChainId: any\n  account: any\n  [key: string]: any\n}) {\n  const {\n    walletChainId,\n    tokenDatas,\n    currentWallet,\n    osdTokenData,\n    slippage,\n    isLogin,\n    swapTokenId,\n    loadingData,\n    loadError,\n  } = props\n  const dispatch = useDispatch()\n\n  const [tokenIn, setTokenIn] = useState('')\n  const [tokenOut, setTokenOut] = useState(swapTokenId)\n  const [amountIn, setAmountIn] = useState('')\n  const [amountOut, setAmountOut] = useState('')\n  const [amountType, setAmountType] = useState('')\n  const [priceImpact, setPriceImpact] = useState('0')\n  const [txid, setTxid] = useState('')\n  const [total, setTotal] = useState(0)\n  const [submiting, setSubmiting] = useState(false)\n  const [calculating, setCalculating] = useState('')\n  const [resultVisible, setResultVisible] = useState(false)\n  const [varA, setVarA] = useState(0)\n\n  const tokenInObj = getTokenDataById(tokenIn, tokenDatas ? [...tokenDatas, osdTokenData] : [])\n  const tokenOutObj = getTokenDataById(tokenOut, tokenDatas ? [...tokenDatas, osdTokenData] : [])\n\n \n\n  const { getTokenPrice, calcSwapAmountIn, swap, calcSwapAmountOut, calcPoolTotal } =\n    currentWallet || {}\n\n  useEffect(() => {\n    async function fun() {\n      if (amountType === 'in' && amountIn) {\n        changeAmountIn(amountIn)\n      } else if (amountType === 'out' && amountOut) {\n        changeAmountOut(amountOut)\n      }\n\n      if (!currentWallet) return\n      let _total = await calcPoolTotal(tokenInObj, tokenOutObj)\n\n      setTotal(_total)\n    }\n    if (tokenOut && tokenIn) fun()\n  }, [tokenOut, tokenIn, isLogin])\n\n  const closeResultModal = () => {\n    setResultVisible(false)\n    setAmountIn('')\n    setAmountOut('')\n    setTxid('')\n    setPriceImpact('0')\n    dispatch({\n      type: 'tokens/updatePrice',\n    })\n  }\n\n  const finishSubmit = (hash) => {\n    setTxid(hash)\n    setResultVisible(true)\n    dispatch({\n      type: 'tokens/updatePrice',\n    })\n  }\n\n  const handleSubmit = async () => {\n    clearTimeout(varA)\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    console.log(currentWallet,'currentWallet')\n    setSubmiting(true)\n\n    const amountInRaw = amountRaw(amountIn, tokenInObj.tokenDecimal)\n    const amountOutRaw = amountRaw(amountOut, tokenOutObj.tokenDecimal)\n    const amountInRawMax = amountSlipMax(amountInRaw, slippage)\n    const amountOutRawMin = amountSlipMin(amountOutRaw, slippage)\n    const res = await swap({\n      chainId: walletChainId,\n      tokenIn,\n      amountInRaw,\n      amountInRawMax,\n      tokenOut,\n      amountOutRaw,\n      amountOutRawMin,\n      type: amountType,\n    })\n    // console.log(res)\n    if (res.error) {\n      message(res.error, {\n        tokenOut: tokenOutObj.symbol,\n        tokenIn: tokenInObj.symbol,\n      })\n    } else if (res.hash) {\n      finishSubmit(res.hash)\n    }\n    setSubmiting(false)\n  }\n\n  async function calImpact(_amountIn: string, _amountOut: string) {\n    if (!_amountIn || !_amountOut) {\n      return '0'\n    }\n    const tokenIn_price = await getTokenPrice(\n      tokenIn,\n      walletChainId,\n      tokenInObj.tokenDecimal,\n      tokenInObj,\n    )\n    const tokenOut_price = await getTokenPrice(\n      tokenOut,\n      walletChainId,\n      tokenOutObj.tokenDecimal,\n      tokenOutObj,\n    )\n    if (!tokenIn_price || !tokenOut_price) return '0'\n    const zeroImpactToken2Amount = new BN(_amountIn).multipliedBy(tokenIn_price).div(tokenOut_price)\n    const impact = zeroImpactToken2Amount\n      .minus(_amountOut)\n      .div(zeroImpactToken2Amount)\n      .multipliedBy(100)\n      .abs()\n    return zeroImpactToken2Amount.eq(0) ? 0 : toFixed(impact.toString(), 2)\n  }\n\n  async function changeAmountInOut(type: 'in' | 'out', amount: string = '0') {\n    // if (calculating) return\n    setAmountType(type)\n\n    if (type === 'in') {\n      setAmountIn(amount)\n    } else {\n      setAmountOut(amount)\n    }\n    const env = await envir(currentWallet, walletChainId)\n    if (!env || !tokenIn || !tokenOut) return\n\n    debounce(type === 'in' ? changeAmountIn : changeAmountOut, 500)(amount)\n  }\n\n  async function calcAmountIn(amount: string, amountInRaw: string) {\n    const _out = await calcSwapAmountOut(walletChainId, amountInRaw, tokenIn, tokenOut)\n    // console.log('_out', _out)\n    if (_out.error) {\n      message(_out.error, {\n        tokenOut: tokenOutObj.symbol,\n        tokenIn: tokenInObj.symbol,\n      })\n      setAmountOut('')\n      setPriceImpact('0')\n    } else {\n      const _amountOut = formatSat(_out.toString(), tokenOutObj.tokenDecimal, 0)\n      // console.log('_amountOut', _amountOut)\n      setAmountOut(_amountOut)\n      const impact = await calImpact(amount, _amountOut)\n      // console.log('impact', impact)\n      setPriceImpact(impact)\n    }\n  }\n\n  async function changeAmountIn(amount: string) {\n    clearTimeout(varA)\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n\n    if (!amount) {\n      setAmountOut('')\n      setPriceImpact('0')\n      return\n    }\n    setCalculating('in')\n\n    const _amountInRaw = amountRaw(amount, tokenInObj.tokenDecimal)\n    await calcAmountIn(amount, _amountInRaw)\n\n    setCalculating('')\n\n    // let timerA = newSetInterval(async () => {\n    //   // console.log(varA)\n    //   await calcAmountIn(amount, _amountInRaw)\n    // }, 3 * 1e3)\n    // setVarA(timerA)\n  }\n\n  async function calcAmountOut(amount: string, amountOutRaw: string) {\n    const _in = await calcSwapAmountIn(walletChainId, amountOutRaw, tokenIn, tokenOut)\n    // console.log('_out', _in)\n    if (_in.error) {\n      message(_in.error, {\n        tokenOut: tokenOutObj.symbol,\n        tokenIn: tokenInObj.symbol,\n      })\n      setAmountIn('')\n      setPriceImpact('0')\n    } else {\n      const _amountIn = formatSat(_in.toString(), tokenInObj.tokenDecimal, 0)\n      // console.log('_amountIn', _amountIn)\n      setAmountIn(_amountIn)\n      const impact = await calImpact(_amountIn, amount)\n      setPriceImpact(impact)\n    }\n  }\n\n  async function changeAmountOut(amount: string) {\n    clearTimeout(varA)\n    if (!amount) {\n      setAmountIn('')\n      setPriceImpact('0')\n      return\n    }\n    setCalculating('out')\n\n    const _amountOutRaw = amountRaw(amount, tokenOutObj.tokenDecimal)\n    await calcAmountOut(amount, _amountOutRaw)\n\n    setCalculating('')\n    // let timerA = newSetInterval(async () => {\n    //   await calcAmountOut(amount, _amountOutRaw)\n    // }, 3 * 1e3)\n    // setVarA(timerA)\n  }\n  const reverse = () => {\n    let tmpIn = tokenIn\n    clearTimeout(varA)\n    setTokenIn(tokenOut)\n    setTokenOut(tmpIn)\n  }\n\n  const beyond_slip = parseFloat(priceImpact) > parseFloat(slippage)\n\n  return (\n    <>\n      <Spin\n        spinning={(tokenDatas && tokenDatas.length < 1 && !loadError) || loadingData || submiting}\n      >\n        <div className={styles.container}>\n          {/* <div className={`primary ${styles.title}`}>{_('market')}</div> */}\n          <SimpleCard\n            className={styles.cardPay}\n            title={_('pay')}\n            amount={calculating === 'out' ? AmountLoading : amountIn}\n            onAmountChange={(amount: number) => changeAmountInOut('in', (amount || '0').toString())}\n            token={tokenInObj}\n            onChangeToken={(item) => {\n              if (item.tokenId === tokenOut) reverse()\n              setTokenIn(item.tokenId)\n            }}\n          />\n          <div className={styles.arr} onClick={reverse}>\n            <SwapDownArr className={styles.arrCircle} />\n          </div>\n          <SimpleCard\n            className={styles.cardReceive}\n            amount={calculating === 'in' ? AmountLoading : amountOut}\n            onAmountChange={(amount: number) =>\n              changeAmountInOut('out', (amount || '0').toString())\n            }\n            token={tokenOutObj}\n            title={_('receive')}\n            onChangeToken={(item) => {\n              if (item.tokenId === tokenIn) reverse()\n              setTokenOut(item.tokenId)\n              dispatch({\n                type: 'tokens/save',\n                payload: {\n                  chartSelectedTokenId: item.tokenId,\n                  chartSelectedPair: {},\n                },\n              })\n            }}\n          />\n          <div className={styles.info}>\n            <div className={styles.item}>\n              <div className={styles.label}>\n                {_('price_impact')} + {_('fee')}\n              </div>\n              <div className={beyond_slip ? `${styles.fee} ${styles.red}` : styles.fee}>\n                {priceImpact}%\n              </div>\n            </div>\n          </div>\n\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={handleSubmit}\n            redCond={beyond_slip}\n            conditions={[\n              {\n                handle: !tokenIn || !tokenOut,\n                txt: _('select_asset'),\n              },\n              {\n                handle: total > 0 && parseFloat(amountOut) > total,\n                txt: _('not_enough', tokenOutObj.symbol),\n              },\n              {\n                handle: parseFloat(amountIn || '0') <= 0 || parseFloat(amountOut || '0') <= 0,\n                txt: _('input_amount'),\n              },\n              // {\n              //   handle:\n              //     parseFloat(amountIn || '0') > parseFloat(tokenInObj.userTokenBalance || '0'),\n              //   txt: _('lack_balance'),\n              // },\n            ]}\n          >\n            {beyond_slip ? _('swap_anyway') : _('swap')}\n          </Btn>\n        </div>\n      </Spin>\n      {resultVisible && (\n        <Result\n          title={_('swap_done')}\n          amountTile={_('swap_amount')}\n          txid={txid}\n          visible={resultVisible}\n          close={closeResultModal}\n          chainId={walletChainId}\n          tokenIn={{\n            ...tokenInObj,\n            amount: amountIn,\n          }}\n          tokenOuts={[{ ...tokenOutObj, amount: amountOut }]}\n        />\n      )}\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n  loading,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n  loading: any\n}) => {\n  const effects = loading.effects\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n    loadingData: effects['tokens/getData'],\n  }\n}\n\nexport default connect(mapStateToProps)(Swap)\n","import { createContext } from 'react';\nvar RowContext = /*#__PURE__*/createContext({});\nexport default RowContext;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport RowContext from './RowContext';\nfunction parseFlex(flex) {\n  if (typeof flex === 'number') {\n    return \"\".concat(flex, \" \").concat(flex, \" auto\");\n  }\n  if (/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(flex)) {\n    return \"0 0 \".concat(flex);\n  }\n  return flex;\n}\nvar sizes = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl'];\nvar Col = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _classNames;\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var _React$useContext2 = React.useContext(RowContext),\n    gutter = _React$useContext2.gutter,\n    wrap = _React$useContext2.wrap,\n    supportFlexGap = _React$useContext2.supportFlexGap;\n  var customizePrefixCls = props.prefixCls,\n    span = props.span,\n    order = props.order,\n    offset = props.offset,\n    push = props.push,\n    pull = props.pull,\n    className = props.className,\n    children = props.children,\n    flex = props.flex,\n    style = props.style,\n    others = __rest(props, [\"prefixCls\", \"span\", \"order\", \"offset\", \"push\", \"pull\", \"className\", \"children\", \"flex\", \"style\"]);\n  var prefixCls = getPrefixCls('col', customizePrefixCls);\n  var sizeClassObj = {};\n  sizes.forEach(function (size) {\n    var _extends2;\n    var sizeProps = {};\n    var propSize = props[size];\n    if (typeof propSize === 'number') {\n      sizeProps.span = propSize;\n    } else if (_typeof(propSize) === 'object') {\n      sizeProps = propSize || {};\n    }\n    delete others[size];\n    sizeClassObj = _extends(_extends({}, sizeClassObj), (_extends2 = {}, _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-\").concat(sizeProps.span), sizeProps.span !== undefined), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-order-\").concat(sizeProps.order), sizeProps.order || sizeProps.order === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-offset-\").concat(sizeProps.offset), sizeProps.offset || sizeProps.offset === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-push-\").concat(sizeProps.push), sizeProps.push || sizeProps.push === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-\").concat(size, \"-pull-\").concat(sizeProps.pull), sizeProps.pull || sizeProps.pull === 0), _defineProperty(_extends2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _extends2));\n  });\n  var classes = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(span), span !== undefined), _defineProperty(_classNames, \"\".concat(prefixCls, \"-order-\").concat(order), order), _defineProperty(_classNames, \"\".concat(prefixCls, \"-offset-\").concat(offset), offset), _defineProperty(_classNames, \"\".concat(prefixCls, \"-push-\").concat(push), push), _defineProperty(_classNames, \"\".concat(prefixCls, \"-pull-\").concat(pull), pull), _classNames), className, sizeClassObj);\n  var mergedStyle = {};\n  // Horizontal gutter use padding\n  if (gutter && gutter[0] > 0) {\n    var horizontalGutter = gutter[0] / 2;\n    mergedStyle.paddingLeft = horizontalGutter;\n    mergedStyle.paddingRight = horizontalGutter;\n  }\n  // Vertical gutter use padding when gap not support\n  if (gutter && gutter[1] > 0 && !supportFlexGap) {\n    var verticalGutter = gutter[1] / 2;\n    mergedStyle.paddingTop = verticalGutter;\n    mergedStyle.paddingBottom = verticalGutter;\n  }\n  if (flex) {\n    mergedStyle.flex = parseFlex(flex);\n    // Hack for Firefox to avoid size issue\n    // https://github.com/ant-design/ant-design/pull/20023#issuecomment-564389553\n    if (wrap === false && !mergedStyle.minWidth) {\n      mergedStyle.minWidth = 0;\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, others, {\n    style: _extends(_extends({}, mergedStyle), style),\n    className: classes,\n    ref: ref\n  }), children);\n});\nif (process.env.NODE_ENV !== 'production') {\n  Col.displayName = 'Col';\n}\nexport default Col;","import { Col } from '../grid';\nexport default Col;","import { useEffect, useState, useMemo } from 'react'\nimport { Switch, Slider, InputNumber, Checkbox } from 'antd'\nimport _ from '@/i18n'\nimport styles from './index.less'\nimport type { CheckboxChangeEvent } from 'antd/es/checkbox'\ntype propsType = {\n  maxLeverage: number\n  leverage: number\n  setLeverage: any,\n  tpsl: boolean,\n  setTPSL: (checked: boolean) => void,\n  tpPrice: number,\n  setTpPrice: (value: number) => void,\n  slPrice: number,\n  setSlPrice: (value: number) => void,\n  targetPrice: number,\n  amountOut: number, //仓位\n  isLong: boolean,\n  tradeType: 'market' | 'limit',\n  cost: number\n}\nfunction TPSL(props: propsType) {\n  const { maxLeverage, leverage, setLeverage, setTPSL, tpsl, tpPrice, setTpPrice, slPrice, setSlPrice, targetPrice, isLong, amountOut, tradeType,cost } = props\n  // const [detailVisible, setDetailVisible] = useState(false)\n  const [silderVisible, setSilderVisible] = useState(false)\n  const [dig, setDig] = useState(leverage)\n  const tpInfo = useMemo(() => {\n    let amount = 0;\n    let rate = 0;\n    if (amountOut !== 0) {\n      amount = isLong ? (tpPrice - targetPrice) * amountOut  : (targetPrice - tpPrice) * amountOut ; // \n      rate = amount/cost*100\n    }\n    return {\n      rate: Number(rate.toFixed(2)) + '%',\n      priceRate: Number(((tpPrice - targetPrice) / targetPrice * 100).toFixed(2)) + '%',\n      amount: Number(amount.toFixed(2))\n    }\n  }, [tpPrice, targetPrice, amountOut, isLong,cost])\n  const slInfo = useMemo(() =>{\n    let amount = 0;\n    let rate = 0;\n    if (amountOut !== 0) {\n      amount = isLong ? (targetPrice - slPrice) * amountOut  : (slPrice - targetPrice) * amountOut ; // \n      // rate = isLong ? (targetPrice - slPrice) / targetPrice * 100  :(slPrice - targetPrice) / targetPrice * 100 \n      rate = amount/cost*100\n    }\n    return {\n      rate: Number(rate.toFixed(2)) + '%',\n      priceRate: Number(((targetPrice - slPrice) / targetPrice * 100).toFixed(2)) + '%',\n      amount: Number(amount.toFixed(2))\n    }\n  } , [slPrice, targetPrice, amountOut, isLong,cost])\n\n  const tiggerValue=useMemo(()=>{\n    if(!amountOut) return undefined\n    if(isLong){\n      return Number((targetPrice-cost/amountOut)).toFixed(2)\n    }else{\n      return Number((Number(targetPrice)+cost/amountOut)).toFixed(2)\n    }\n  },[targetPrice,cost,amountOut,isLong])\n\n  \n\n\n\n  const onChangeDetailVisible = (e: CheckboxChangeEvent) => {\n    setTPSL(e.target.checked)\n  }\n\n  const onChangeSliderVisible = (checked: boolean) => {\n    setSilderVisible(checked)\n  }\n\n  const onChangeDig = (value: number) => {\n    console.log(value)\n    setDig(value)\n    setLeverage(value)\n  }\n\n  useEffect(() => {\n    if (maxLeverage < leverage) {\n      onChangeDig(maxLeverage)\n    }\n  }, [maxLeverage])\n\n  return (\n    <>\n      <div className={styles.row}>\n        {tradeType === 'limit' ? <div className={styles.tpsl}>\n          TP/SL <Checkbox onChange={onChangeDetailVisible} checked={tpsl} className={styles.checkbox} />\n        </div> : <div className={styles.tpsl} />}\n        <div className={styles.silder_trigger}>\n          <div>\n            <InputNumber\n              // formatter={(value) => value + 'x'}\n              value={dig}\n              onChange={onChangeDig}\n              min={1}\n              max={maxLeverage || 1}\n              className={styles.dig}\n            />\n          </div>\n          <span className={styles.txt}>{_('slider')}</span>\n          <Switch onChange={onChangeSliderVisible} />\n        </div>\n      </div>\n      {silderVisible && (\n        <Slider\n          value={dig}\n          onChange={onChangeDig}\n          className={styles.slider}\n          min={1}\n          max={maxLeverage || 1}\n        />\n      )}\n      {\n        tradeType === 'limit' && tpsl && <>\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div>\n                {_('tp_price')}({tpInfo.priceRate} {_('up')})\n              </div>\n              <div>{_('estimated_profit')}</div>\n            </div>\n            <div className={styles.value}>\n              <InputNumber\n                className=\"inputTxt\"\n                value={tpPrice}\n                onChange={setTpPrice}\n                min={isLong?targetPrice:0}\n                max={isLong?Infinity:targetPrice}\n                formatter={value => `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              />\n              <div className={styles.amount_green}>${tpInfo.amount}({tpInfo.rate})</div>\n            </div>\n          </div>\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div>\n                {_('tigger_price')}({slInfo.priceRate} {_('down')})\n              </div>\n              <div>{_('estimated_loss')}</div>\n            </div>\n            <div className={styles.value}>\n              <InputNumber\n                className=\"inputTxt\"\n                value={slPrice}\n                onChange={setSlPrice}\n                min={isLong?tiggerValue:targetPrice}\n                max={isLong?targetPrice:tiggerValue}\n                formatter={value => `${isLong?'≤':'≥'} $ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              />\n              <div className={styles.amount_red}>${slInfo.amount}({slInfo.rate})</div>\n            </div>\n          </div>\n        </>\n      }\n\n\n    </>\n  )\n}\n\nexport default TPSL\n","import styles from './index.less'\nimport _ from '@/i18n'\nimport { InputNumber, message, Modal, Col } from 'antd'\nimport { CheckCircleOutlined } from '@ant-design/icons';\nimport { useEffect, useMemo, useState } from 'react'\nimport ChooseToken from '@/components/chooseToken/base'\nimport { connect, useDispatch } from 'umi'\nimport BN from 'bignumber.js'\nimport type {\n  FutureStateType,\n  TokenDataFullType,\n  TokenDataType,\n  TokenStateType,\n  WalletStateType,\n} from '@/models/dataType'\nimport Btn from '@/components/btn'\nimport TPSL from '../tpsl'\nimport { amountRaw, calUsdPrice, debounce, envir, formatSat } from '@/common/utils'\nimport FutureLib from '@/lib/future'\n// import { message } from '@/components/message'\nimport { Result } from '@/components/result/simple'\nimport { Loading as Spin } from '@/components/loading'\nimport Icon from '@/components/icon'\nimport {\n  opIncreasePosition,\n  calcOpIncreasePosition,\n  LEVERAGE_PRECISION,\n  calcLimitIncreaseSizeDelta,\n  calcLimitDecreaseSizeDelta,\n  TRADING_FEE_RATE_PRECISION,\n  FUNDING_RATE_PRECISION\n} from '@1kx/typechain/helper/future'\nimport { findPair, formatBnPrice, formatPriceToBN } from './utils'\nimport type { Future } from '@1kx/typechain'\nimport { OsdTokenData } from '@/common/config'\nimport { getChainById } from '@/layout/header/chainData'\n\n\ntype PositionType = {\n  collateralToken: string;\n  indexToken: string;\n  isLong: boolean;\n  margin: bigint;\n  openNotional: bigint;\n  size: bigint;\n\n  entryFundingRate: bigint;\n  entryCollateralPrice: bigint;\n  entryIndexPrice: bigint;\n  mmr: bigint;\n}\n\nconst findToken = (_tokenId: string, tokenDatas: any[]) => {\n  if (!_tokenId) return {}\n  if (!tokenDatas) return {}\n  console.log(tokenDatas)\n  const _token = tokenDatas.find(\n    (t) => t.id && t.id.toLowerCase() === _tokenId.toLowerCase(),\n  )\n  return _token || {}\n}\n\ntype DescriptionProps = {\n  label: string,\n  value: string | number\n}\n\nconst Description: React.FC<DescriptionProps> = ({ label, value }) => (<Col span={24}>\n  <div className={styles.DescriptionItem}>\n    <p className={styles.DescriptionItemLabel} >\n      {label}:\n    </p>\n    <p className={styles.DescriptionItemValue}  >\n      {value || '--'}\n    </p>\n\n  </div>\n</Col>)\n\nfunction Perp(props: any) {\n  const dispatch = useDispatch()\n  const {\n    isLogin,\n    tokenDatas,\n    osdTokenData,\n    tokenPairs,\n    isLong,\n    currentWallet,\n    walletChainId,\n    positionList,\n  } = props\n\n  const [amountIn, setAmountIn] = useState<number | null>(null)\n  const [tokenIn, setTokenIn] = useState('')\n  const [amountOut, setAmountOut] = useState<number | null>(null)\n  const [tokenOut, setTokenOut] = useState('')\n  const [submiting, setSubmiting] = useState(false)\n  const [indexTokenData, setIndexTokenData] = useState<TokenDataType[]>([])\n  const [collsTokenData, setCollsTokenData] = useState<TokenDataType[]>([])\n  const [leverage, setLeverage] = useState(1.0)\n  const [type, setType] = useState('')\n  const [tradeType, setTradeType] = useState<'market' | 'limit'>('market')\n\n  const [curPair, setCurPair] = useState(findPair(tokenIn, tokenOut, tokenPairs))\n  const [curPos, setCurPos] = useState({})\n  const [curData, setCurData] = useState({})\n\n  const [targetPrice, setTargetPrice] = useState(0);\n  const [tpPrice, setTpPrice] = useState(0);\n  const [slPrice, setSlPrice] = useState(0);\n  const [tpsl, setTPSL] = useState(false);\n\n  const tokenInObj = findToken(tokenIn, [...tokenDatas, osdTokenData])\n  const tokenOutObj = findToken(tokenOut, [...tokenDatas, osdTokenData])\n\n\n\n  // 初始化数据 获取交易对\n  useEffect(() => {\n    if (tokenDatas && tokenDatas.length > 0) {\n      dispatch({\n        type: 'future/getPairs',\n      })\n    }\n  }, [tokenDatas, dispatch])\n\n  // 初始化页面交易对\n\n  useEffect(() => {\n    let indexTokenList: TokenDataType[] = []\n    if (tokenPairs && tokenDatas.length)\n      tokenPairs.forEach((v) => {\n        const id = indexTokenList.findIndex(\n          (c) => c.id && c.id.toLowerCase() === v.indexToken.toLowerCase(),\n        )\n        if (id < 0) {\n          const _token = findToken(v.indexToken, [...tokenDatas, OsdTokenData])\n          indexTokenList.push(_token)\n        }\n      })\n    setIndexTokenData(indexTokenList)\n\n    if (!tokenOut && indexTokenList[1]) {\n      setTokenOut(indexTokenList[1].id)\n      dispatch({\n        type: 'tokens/save',\n        payload: {\n          chartSelectedTokenId: indexTokenList[1].id,\n        },\n      })\n    }\n  }, [tokenPairs, tokenDatas, dispatch, tokenOut])\n\n  useEffect(() => {\n    let collsTokenList: TokenDataType[] = []\n    if (tokenPairs && tokenDatas.length)\n      tokenPairs.forEach((v) => {\n        if (v.indexToken.toLowerCase() === tokenOut.toLowerCase()) {\n          const _token = findToken(v.collateralToken, [...tokenDatas, osdTokenData])\n          collsTokenList.push(_token)\n        }\n      })\n    setCollsTokenData(collsTokenList)\n    if (!collsTokenList.find((v) => v.id === tokenIn) && collsTokenList[0]) {\n      setTokenIn(collsTokenList[0].id)\n    }\n  }, [tokenOut])\n\n\n\n\n\n\n\n\n  const cost = useMemo(() => {\n    return calUsdPrice(amountIn, curPair.userCollateralPrice)\n  }, [amountIn, curPair])\n\n  useEffect(() => {\n    if (curPair) {\n      setTargetPrice(curPair.userIndexPrice)\n    }\n  }, [curPair])\n\n\n  useEffect(() => {\n    const findPos = () => {\n      console.log(curPair, amountIn, amountOut, 'findPos')\n      const positon = positionList.find(\n        (pair) =>\n          pair.collateralToken.toLowerCase() === tokenIn.toLowerCase() &&\n          pair.indexToken.toLowerCase() === tokenOut.toLowerCase() &&\n          pair.isLong === isLong,\n      )\n      return positon || {}\n    }\n    const _curpair = findPair(tokenIn, tokenOut, tokenPairs)\n    setCurPair(_curpair)\n    dispatch({\n      type: 'tokens/save',\n      payload: {\n        chartSelectedPair: _curpair,\n      },\n    })\n\n    setCurPos(findPos())\n  }, [tokenIn, tokenOut, tokenPairs && tokenPairs.length > 0, positionList.length > 0])\n\n\n\n\n  const updateOpData = (amountInRaw, amountOutRaw) => {\n    try {\n      let indexPrice = curPair.indexPrice;\n      if (tradeType === 'limit') {\n        indexPrice = formatPriceToBN(String(targetPrice), 0)\n      }\n      console.log(curPos,\n        curPair,\n        amountInRaw,\n        amountOutRaw,\n        curPair.collateralPrice,\n        indexPrice, 'opIncreasePositionParams')\n      const data = opIncreasePosition(\n        curPos,\n        curPair,\n        amountInRaw,\n        amountOutRaw,\n        curPair.collateralPrice,\n        indexPrice,\n      )\n\n      console.log(new BN(data.tradingFee.toString()).div(Math.pow(10, curPair.userCollateralTokenDecimal)).toFixed(4), data.tradingFee, curPair.collateralTokenDecimal, 'opIncreasePosition')\n\n      setCurData({\n        ...data,\n        liqPrice: formatBnPrice(data.indexLiqPrice),\n        tradingFeeRate: new BN(data.tradingFeeRate.toString()).div(TRADING_FEE_RATE_PRECISION).multipliedBy(100).toFixed(4),\n        hourFundingRate: new BN(data.hourFundingRate.toString()).div(FUNDING_RATE_PRECISION).multipliedBy(100).toFixed(6),\n        tradingFee: new BN(data.tradingFee.toString()).div(Math.pow(10, curPair.userCollateralTokenDecimal)).toFixed(4),\n        amountInRaw,\n        amountOutRaw,\n      })\n    } catch (err) {\n      setCurData({})\n      console.log(err)\n      message.error(err.message || 'unknown error')\n    }\n\n  }\n\n  const calcMaginIndex = (size, margin) => {\n\n\n    try {\n      let indexPrice = curPair.indexPrice;\n      if (tradeType === 'limit') {\n        indexPrice = formatPriceToBN(String(targetPrice), 0)\n      }\n      console.log(curPos,\n        curPair,\n        BigInt(leverage * LEVERAGE_PRECISION),\n        BigInt(margin),\n        BigInt(size),\n        curPair.collateralPrice,\n        indexPrice)\n      const data = calcOpIncreasePosition(\n        curPos,\n        curPair,\n        BigInt(leverage * LEVERAGE_PRECISION),\n        BigInt(margin),\n        BigInt(size),\n        curPair.collateralPrice,\n        indexPrice,\n      )\n\n      console.log(data)\n\n      updateOpData(data.marginDelta, data.sizeDelta)\n      return data\n    } catch (err) {\n      console.log(err)\n      return { marginDelta: -1, sizeDelta: -1 }\n    }\n  }\n\n  const calAmountOut = (_amountIn: number) => {\n    if (!_amountIn) {\n      setAmountOut(0)\n      return\n    }\n    const amountInRaw = amountRaw(_amountIn.toString(), curPair.userCollateralTokenDecimal)\n    let { sizeDelta } = calcMaginIndex(0, amountInRaw)\n    if (sizeDelta < 0) sizeDelta = 0n\n    const _size = formatSat(sizeDelta.toString(), curPair.userIndexTokenDecimal)\n\n    console.log(_size, 'setAmountOut')\n\n    setAmountOut(_size)\n  }\n\n  const changeAmountIn = async (value: number) => {\n    setAmountIn(value)\n    setType('in')\n\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    debounce(calAmountOut, 500)(value)\n  }\n\n  const onChangeTokenIn = (token: TokenDataFullType) => {\n    setTokenIn(token.id)\n  }\n  const calAmountIn = (_amountOut: number) => {\n    if (!_amountOut) {\n      setAmountIn(0)\n      return\n    }\n    const amountOutRaw = amountRaw((_amountOut || 0).toString(), curPair.userIndexTokenDecimal)\n    let { marginDelta } = calcMaginIndex(amountOutRaw, 0)\n    if (marginDelta < 0) marginDelta = 0n\n    const _margin = formatSat(marginDelta.toString(), curPair.userCollateralTokenDecimal)\n\n    setAmountIn(_margin)\n  }\n\n  useEffect(() => {\n    if (type === 'in') {\n      calAmountOut(amountIn)\n    } else if (type === 'out') {\n      calAmountIn(amountOut)\n    }\n  }, [leverage, tokenIn, tokenOut])\n\n  const changeAmountOut = async (value: number) => {\n    setAmountOut(value)\n    setType('out')\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    debounce(calAmountIn, 500)(value)\n  }\n\n  const onChangeTokenOut = (_token: TokenDataFullType) => {\n    setTokenOut(_token.id)\n    dispatch({\n      type: 'tokens/save',\n      payload: {\n        chartSelectedTokenId: _token.id,\n      },\n    })\n  }\n\n  const handleLimitIncreaseAndDecreasePosition = async () => {\n    try {\n      const targetPriceRaw = formatPriceToBN(String(targetPrice), 0)\n      const tpPriceRaw = formatPriceToBN(String(tpPrice), 0)\n      const slPriceRaw = formatPriceToBN(String(slPrice), 0)\n      const execFee = await FutureLib.getLimitMinExecFee(walletChainId)\n      const { minSizeDelta, maxSizeDelta } = calcLimitDecreaseSizeDelta(\n        curPair,\n        isLong,\n        curData.notionalDelta,\n        curPair.collateralPrice,\n        curPair.indexPrice,\n        slPriceRaw,\n        tpPriceRaw,\n      )\n      const params: Future.LimitInAndDeParams = {\n        _collateralToken: tokenIn,\n        _indexToken: tokenOut,\n        _isLong: isLong,\n        _increaseMarginDelta: curData.amountInRaw,\n        _increaseNotionalDelta: curData.notionalDelta, // ???开仓名义价值 不确定这里的价格使用的是 当前还是目标\n        _increaseSizeDelta: calcLimitIncreaseSizeDelta(\n          curPair,\n          isLong,\n          curData.notionalDelta,\n          // curPair.collateralPrice, 改成1美元\n          formatPriceToBN('1', 0),\n          curPair.indexPrice,\n          targetPriceRaw\n        ),\n        _increaseExecFee: execFee,\n        _decreaseNotionalDelta: curData.notionalDelta,\n        _decreaseMinSizeDelta: minSizeDelta,\n        _decreaseMaxSizeDelta: maxSizeDelta,\n        _decreaseExecFee: execFee\n      }\n      const result = await FutureLib.limitIncreaseAndDecreasePosition(walletChainId, params, currentWallet)\n      return result\n    } catch (error) {\n      console.log(error)\n\n      message.error(error.message || 'unknown error');\n    }\n\n  }\n  // 未勾选tpsl\n  const handleLimitIncreasePosition = async () => {\n\n    try {\n      const targetPriceRaw = formatPriceToBN(String(targetPrice), 0)\n      const execFee = await FutureLib.getLimitMinExecFee(walletChainId)\n\n      const params: Future.LimitInParams = {\n        _collateralToken: tokenIn,\n        _indexToken: tokenOut,\n        _isLong: isLong,\n        _marginDelta: curData.amountInRaw,\n        _notionalDelta: curData.notionalDelta, // ???开仓名义价值 不确定这里的价格使用的是 当前还是目标\n        _sizeDelta: calcLimitIncreaseSizeDelta(\n          curPair,\n          isLong,\n          curData.notionalDelta,\n          curPair.collateralPrice,\n          curPair.indexPrice,\n          targetPriceRaw\n        ),\n        _execFee: execFee,\n\n      }\n      const result = await FutureLib.limitIncreasePosition(walletChainId, params, currentWallet)\n      return result\n    } catch (error) {\n      console.log(error)\n      message.error(error.message || 'unknown error');\n    }\n\n  }\n\n  const handleIncreasePosition = async () => {\n    const reslut = await dispatch({\n      type: 'future/increasePosition',\n      payload: {\n        params: {\n          _collateralToken: tokenIn,\n          _indexToken: tokenOut,\n          _isLong: isLong,\n          _amountIn: curData.amountInRaw,\n          _notionalDelta: curData.notionalDelta,\n        },\n      },\n    })\n    return reslut\n  }\n\n\n  const renderLimitResult = (hash: string) => {\n    Modal.destroyAll()\n    const { exporerTxUrl = '' } = getChainById(walletChainId)\n    Modal.warning({\n      title: '',\n      width: 420,\n      className: styles.modal,\n      wrapClassName: styles.modalWrap,\n      icon: null,\n      getContainer: () => document.getElementById('J_Page') || document.body,\n      okText: 'Close',\n\n      onOk: () => {\n        setAmountIn(0)\n        setAmountOut(0)\n        dispatch({\n          type: 'future/getPairs',\n        })\n      },\n      content: (\n        <div className={styles.modalContainer}>\n          <div className={styles.icon}>\n          <Icon type=\"icon-success\" style={{width:60,height:60}} />\n\n          </div>\n\n          <p className={styles.title}>Success</p>\n          <p className={styles.subTitle}>\n            {isLong ? 'Long' : 'Short'} {amountOut} {tokenOutObj.symbol} with ${amountIn} {tokenInObj.symbol} collateral\n          </p>\n\n          <a href={`${exporerTxUrl}/${hash}`} target=\"_blank\" rel=\"noreferrer\" className={styles.link}>View on explorer</a>\n\n        </div>\n      )\n    })\n  }\n\n  const handleSubmit = async () => {\n   \n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    setSubmiting(true)\n    let res: any;\n\n\n\n\n\n    if (tradeType === 'market') {\n      // 市价单\n      res = await handleIncreasePosition()\n    } else {\n      // 现价单\n\n      if (tpsl) {\n        res = await handleLimitIncreaseAndDecreasePosition()\n      } else {\n        res = await handleLimitIncreasePosition()\n      }\n    }\n\n\n\n\n    if (res && res.hash) {\n      console.log(res, 'res')\n      if (tradeType === 'limit') {\n        renderLimitResult(res.hash)\n      } else {\n        Result({\n          msg: isLong ? (\n            <div className={`${styles.result_icon} ${styles.green}`}>\n              <Icon type=\"icon-up\" />\n              {_('long_opend')}\n            </div>\n          ) : (\n            <div className={`${styles.result_icon} ${styles.red}`}>\n              <Icon type=\"icon-down1\" />\n              {_('short_opend')}\n            </div>\n          ),\n          txid: res.hash,\n          token: tokenOutObj,\n          chainId: walletChainId,\n          onOk: () => {\n            setAmountIn(0)\n            setAmountOut(0)\n            dispatch({\n              type: 'future/getPairs',\n            })\n          },\n        })\n        dispatch({\n          type: 'future/getPositionList',\n        })\n      }\n    }\n\n    setSubmiting(false)\n\n  }\n\n\n\n\n\n  const loading = !!tokenPairs && tokenPairs.length < 1 && !!tokenDatas\n  const TPSLOpt = {\n    slPrice,\n    setSlPrice,\n    tpPrice,\n    setTpPrice,\n    tpsl,\n    setTPSL: (_tpsl) => {\n      setTPSL(_tpsl);\n      if (_tpsl) {\n        const _maxPrice = Number((targetPrice * 1.1).toFixed(2));\n        const _minPrice = Number((targetPrice * 0.9).toFixed(2));\n        setTpPrice(isLong ? _maxPrice : _minPrice)\n        setSlPrice(isLong ? _minPrice : _maxPrice)\n      }\n    },\n    targetPrice,\n    amountOut,\n    isLong,\n    tradeType,\n    cost\n  }\n\n\n\n  const beforeSubmit = () => {\n    if (tradeType === 'limit') {\n      Modal.destroyAll()\n      Modal.warning({\n        title: '',\n        width: 420,\n        className: styles.modal,\n        wrapClassName: styles.modalWrap,\n        icon: null,\n        getContainer: () => document.getElementById('J_Page') || document.body,\n        okText: 'Sign transaction in wallet',\n        onOk: () => { Modal.destroyAll(); handleSubmit() },\n        maskClosable: true,\n        content: (\n          <div className={styles.modalContainer}>\n            <p className={styles.title}>Confirm {isLong ? 'Long' : 'Short'}</p>\n            <p className={styles.subTitle}>\n              {isLong ? 'Long' : 'Short'} {amountOut} {tokenOutObj.symbol} with ${amountIn} {tokenInObj.symbol} collateral\n            </p>\n            <div className={styles.content} >\n              <Description label='Max slippage' value=\"0.2%\" />\n              <Description label='Leverage' value={`${leverage}x`} />\n              <Description label='Entry Price' value={`$${targetPrice}`} />\n            </div>\n          </div>\n        )\n      })\n    } else {\n      handleSubmit()\n    }\n  }\n\n\n\n  return (\n    <>\n      <div className={styles.container}>\n        <Spin spinning={loading || submiting}>\n          <div className={styles.tradeTypes}>\n            <span className={tradeType === 'market' ? styles.active : ''} onClick={() => { setTradeType('market') }}>\n              Market\n            </span>\n            <span className={tradeType === 'limit' ? styles.active : ''} onClick={() => { setTradeType('limit') }}>\n              Limit\n            </span>\n          </div>\n\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div>\n                {_('pay')}({_('margin')}+{_('fee')}): $\n                {cost}\n              </div>\n              <div>\n                {_('balance')}:&nbsp;\n                <span\n                  className=\"primary\"\n                  onClick={() => changeAmountIn(parseFloat(tokenInObj.userTokenBalance))}\n                >\n                  {tokenInObj.userTokenBalance}\n                </span>\n              </div>\n            </div>\n            <div className={styles.value}>\n              <InputNumber\n                className=\"inputTxt\"\n                value={amountIn}\n                onChange={changeAmountIn}\n                min={0}\n                placeholder=\"0.00\"\n              />\n              <ChooseToken\n                currentToken={tokenInObj}\n                changeToken={onChangeTokenIn}\n                data={collsTokenData}\n                isLogin={isLogin}\n                loading={loading}\n              />\n            </div>\n          </div>\n\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div className={isLong ? styles.green : styles.red}>\n                {isLong ? _('long') : _('short')}: ${calUsdPrice(amountOut, tradeType === 'market' ? curPair.userIndexPrice : targetPrice)}\n              </div>\n              {tradeType === 'market' && <div>\n                {_('market_price')}: ${curPair.userIndexPrice}\n              </div>}\n            </div>\n            <div className={styles.value}>\n              <InputNumber\n                className=\"inputTxt\"\n                value={amountOut}\n                onChange={changeAmountOut}\n                min={0}\n                placeholder=\"0.00\"\n              />\n              <ChooseToken\n                currentToken={tokenOutObj}\n                changeToken={onChangeTokenOut}\n                data={indexTokenData}\n                isLogin={isLogin}\n                loading={loading}\n              />\n            </div>\n          </div>\n          {\n            tradeType === 'limit' && <div className={styles.card}>\n              <div className={styles.label}>\n                <div >\n                  {_('price')}\n                </div>\n                <div>\n                  {_('market_price')}: ${curPair.userIndexPrice}\n                </div>\n              </div>\n              <div className={styles.value}>\n                <InputNumber\n                  className=\"inputTxt\"\n                  value={targetPrice}\n                  onChange={setTargetPrice}\n                  min={isLong ? 0 : curPair.userIndexPrice}\n                  max={isLong ? curPair.userIndexPrice : Infinity}\n                />\n                <p style={{ marginBottom: 0 }}>USD</p>\n              </div>\n            </div>\n          }\n\n\n\n          <TPSL\n            maxLeverage={curPair.userMaxLeverage}\n            leverage={leverage}\n            setLeverage={setLeverage}\n            {...TPSLOpt}\n          />\n\n\n          <div className={styles.info}>\n            <div className={styles.item}>\n              <div className={styles.label}>{_('entry_price')}</div>\n              <div className={styles.fee}>${tradeType === 'market' ? curPair.userIndexPrice : targetPrice}</div>\n            </div>\n            {tradeType === 'market' && <div className={styles.item}>\n              <div className={styles.label}>{_('liquidation_price')}</div>\n              <div className={styles.fee}>{curData.liqPrice && `$${curData.liqPrice}`}</div>\n            </div>}\n            {tradeType === 'market' && <div className={styles.item}>\n              <div className={styles.label}>{_('funding_rate')}</div>\n              <div className={styles.fee}>{curData.hourFundingRate}%/1h</div>\n            </div>}\n            <div className={styles.item}>\n              <div className={styles.label}>Fees</div>\n              {curData.tradingFeeRate && <div className={styles.fee}>{curData.tradingFeeRate}% ({curData.tradingFee}{tokenInObj.symbol})</div>}\n            </div>\n\n          </div>\n\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={beforeSubmit}\n            className={isLong ? styles.green_btn : styles.red_btn}\n            conditions={[\n              {\n                handle: !tokenIn || !tokenOut,\n                txt: _('select_asset'),\n              },\n              {\n                handle: amountIn <= 0 || amountOut <= 0,\n                txt: _('input_amount'),\n              },\n              {\n                handle: amountIn > parseFloat(tokenInObj.userTokenBalance || '0'),\n                txt: _('lack_balance'),\n              },\n              {\n                handle: tradeType === 'limit' && ((isLong && targetPrice >= curPair.userIndexPrice) || (!isLong && targetPrice <= curPair.userIndexPrice)),\n                txt: _('invalid_limit_price'),\n              },\n              //   {\n              //     handle: total > 0 && parseFloat(amountOut) > total,\n              //     txt: _('not_enough', tokenOutObj.symbol),\n              //   },\n            ]}\n          >\n            {isLong ? _('open_long') : _('open_short')}\n          </Btn>\n        </Spin>\n      </div>\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  tokens,\n  wallet,\n  future,\n}: {\n  tokens: TokenStateType\n  wallet: WalletStateType\n  future: FutureStateType\n}) => {\n  return {\n    ...tokens,\n    ...wallet,\n    ...future,\n  }\n}\n\nexport default connect(mapStateToProps)(Perp)\n","import { useState } from 'react'\nimport { TradeMenuDatas } from '@/common/config'\nimport PanelMenu from '@/components/menu'\nimport Swap from '../swap'\nimport Perp from '../perp'\n// import Short from '../short'\nimport styles from './index.less'\nimport { useEffect } from 'react'\n// import arrowSvg from '@/assets/svg/arrow.svg'\n\nexport default function Panel(props: { network: string }) {\n  const { network } = props\n  console.log(network,'networknetworknetworknetwork')\n  const [menuIndex, setMenuIndex] = useState(0)\n  let panels = [\n    <Swap key=\"swap\" />,\n    <Perp key=\"long\" isLong={true} />,\n    <Perp key=\"short\" isLong={false} />,\n  ]\n  useEffect(()=>{\n    if(network !== 'zk'&&network !== 'sepolia'&&network !== 'arbitrum'){\n      setMenuIndex(0)\n    }\n  },[network])\n\n  if (network === 'zk'||network === 'sepolia'||network === 'arbitrum') {\n    console.log(network,'networknetworknetworknetwork1')\n    panels.length = 3\n    TradeMenuDatas[1].disabled = false\n    TradeMenuDatas[2].disabled = false\n  } else {\n    panels.length = 1\n    TradeMenuDatas[1].disabled = true\n    TradeMenuDatas[2].disabled = true\n  }\n\n  return (\n    <div className={styles.container}>\n      <PanelMenu\n        menuIndex={menuIndex}\n        setMenuIndex={setMenuIndex}\n        menuDatas={TradeMenuDatas}\n        className={styles.menu}\n      />\n      {panels.map((panel, index) => {\n        return (\n          // eslint-disable-next-line react/no-array-index-key\n          <div key={index} style={{ display: index === menuIndex ? 'block' : 'none' }}>\n            {panel}\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n","import _ from '@/i18n'\nimport styles from './info.less'\nimport type { FutureStateType } from '@/models/dataType'\nimport { connect } from 'umi'\nimport { useEffect, useState } from 'react'\nimport { amountRaw, formatSat } from '@/common/utils'\nimport {\n  opIncreaseMargin,\n  opDecreaseMargin,\n  calcMr,\n  calcIndexLiqPrice,\n} from '@1kx/typechain/helper/future'\nimport { formatBnPrice, formatLeverage, formatMr } from '../perp/utils'\nimport { ArrowRight } from '@/components/ui'\ntype propsType = {\n  currentToken: any\n  amountIn: string\n  isAdd: boolean\n}\ntype dataType = {\n  oldLeverage: string\n  newLeverage: string\n  oldMr: string\n  newMr: string\n  mmr: string\n  oldMargin: string\n  newMargin: string | number\n  newLiqPrice: string\n}\n\nfunction Info(props: propsType) {\n  const { currentToken, amountIn, isAdd } = props\n  const { margin, pair, openNotional, userLiqPrice } = currentToken\n\n  const [data, setData] = useState<dataType>({} as dataType)\n\n  useEffect(() => {\n    const amountInRaw = amountRaw(amountIn || '0', pair.userCollateralTokenDecimal)\n    const params = [currentToken, pair, BigInt(amountInRaw), pair.collateralPrice, pair.indexPrice]\n    let res = isAdd ? opIncreaseMargin(...params) : opDecreaseMargin(...params)\n\n    const oldLeverage = formatLeverage(margin, openNotional)\n    let newLeverage = formatLeverage(res.pos.margin, res.pos.openNotional)\n\n    const oldMr = formatMr(calcMr(currentToken, pair, pair.collateralPrice, pair.indexPrice))\n    let newMr = formatMr(res.mr)\n\n    const mmr = formatMr(res.pos.mmr)\n\n    const oldMargin = formatSat(margin.toString(), pair.userCollateralTokenDecimal)\n    let newMargin = formatSat(res.pos.margin.toString(), pair.userCollateralTokenDecimal)\n\n    let newLiqPrice = formatBnPrice(\n      calcIndexLiqPrice(res.pos, res.pair, res.pair.collateralPrice, res.pair.indexPrice),\n      4,\n    )\n    if (!amountIn) {\n      newLeverage = oldLeverage\n      newMr = oldMr\n      newMargin = oldMargin\n      newLiqPrice = userLiqPrice\n    }\n\n    setData({\n      oldLeverage,\n      newLeverage,\n      oldMr,\n      newMr,\n      mmr,\n      oldMargin,\n      newMargin,\n      newLiqPrice,\n    })\n  }, [currentToken, amountIn])\n\n  return (\n    <div className={styles.info}>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('leverage')}</div>\n        <div className={styles.value}>\n          {data.oldLeverage} <ArrowRight /> {data.newLeverage}\n        </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('margin_rate')}</div>\n        <div className={styles.value}>\n          {data.oldMr} <ArrowRight /> {data.newMr}\n        </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('maintenance_margin_rate')}</div>\n        <div className={styles.value}>{data.mmr}</div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>EST {_('liq_price')}</div>\n        <div className={styles.value}>\n          ${userLiqPrice} <ArrowRight /> ${data.newLiqPrice}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = ({ future }: { future: FutureStateType }) => {\n  return {\n    ...future,\n  }\n}\n\nexport default connect(mapStateToProps)(Info)\n","import { Loading as Spin } from '@/components/loading'\nimport styles from './add.less'\nimport _ from '@/i18n'\nimport { useState } from 'react'\nimport Slider from '@/components/slider'\nimport Btn from '@/components/btn'\nimport Info from './info'\nimport { amountRaw, calUsdPrice } from '@/common/utils'\nimport { InputNumber } from 'antd'\nimport Token from '@/components/chooseToken/token'\nimport { useDispatch } from 'umi'\nimport { Result } from '@/components/result/simple'\nimport { message } from '@/components/message'\nimport type { FutureStateType } from '@/models/dataType'\nimport { connect } from 'umi'\n\nfunction AddMargin(props) {\n  const dispatch = useDispatch()\n  const { currentToken, loading, closeModal } = props\n  const {\n    userMargin: margin,\n    collateralTokenObj: collateralToken,\n    indexTokenObj: indexToken,\n    isLong,\n    pair,\n  } = currentToken\n  const { userTokenBalance } = collateralToken\n  const [submiting, setSubmiting] = useState(false)\n  const [amountIn, setAmountIn] = useState(0)\n\n  const changeAmount = (value: number) => {\n    setAmountIn(value)\n  }\n\n  const handleSubmit = async () => {\n    setSubmiting(true)\n    try {\n      const res = await dispatch({\n        type: 'future/increaseMargin',\n        payload: {\n          tokenId: collateralToken.id,\n          params: {\n            _collateralToken: collateralToken.id,\n            _indexToken: indexToken.id,\n            _isLong: isLong,\n            _amountIn: amountRaw(amountIn.toString(), collateralToken.tokenDecimal),\n          },\n        },\n      })\n\n      if (res.hash) {\n        Result({\n          msg: _('success'),\n          txid: res.hash,\n          token: currentToken,\n          onOk: () => {\n            closeModal()\n            dispatch({\n              type: 'future/getPairs',\n            })\n          },\n        })\n        dispatch({\n          type: 'future/getPositionList',\n        })\n      } else {\n        message('Failed')\n      }\n    } catch (error: any) {\n      message(error)\n    }\n    setSubmiting(false)\n  }\n\n  return (\n    <Spin spinning={loading || submiting}>\n      <div className={styles.container}>\n        <div className={styles.card}>\n          <div className={styles.label}>\n            <div>\n              {_('current_margin')}: ${calUsdPrice(margin, pair.userCollateralPrice)}\n            </div>\n            <div>\n              {_('wallet_bal')}:&nbsp;\n              <span className=\"primary\" onClick={() => changeAmount(parseFloat(userTokenBalance))}>\n                {userTokenBalance}\n              </span>\n            </div>\n          </div>\n          <div className={styles.value}>\n            <InputNumber className=\"inputTxt\" value={amountIn} onChange={changeAmount} min={0} />\n            <Token data={collateralToken} />\n          </div>\n          <Slider amount={amountIn} onChange={changeAmount} max={userTokenBalance} />\n        </div>\n        <Info currentToken={currentToken} amountIn={amountIn} isAdd={true} />\n        <Btn\n          height={50}\n          align=\"center\"\n          onClick={handleSubmit}\n          conditions={[\n            {\n              handle: amountIn <= 0,\n              txt: _('input_amount'),\n            },\n            {\n              handle: amountIn > parseFloat(userTokenBalance || '0'),\n              txt: _('lack_balance'),\n            },\n          ]}\n        >\n          {_('incrase_margin')}\n        </Btn>\n      </div>\n    </Spin>\n  )\n}\n\nconst mapStateToProps = ({ future }: { future: FutureStateType }) => {\n  return {\n    ...future,\n  }\n}\n\nexport default connect(mapStateToProps)(AddMargin)\n","import { Loading as Spin } from '@/components/loading'\nimport styles from './add.less'\nimport _ from '@/i18n'\nimport { useEffect, useState } from 'react'\nimport Slider from '@/components/slider'\nimport Btn from '@/components/btn'\nimport Info from './info'\nimport { amountRaw, formatSat } from '@/common/utils'\nimport { InputNumber } from 'antd'\nimport Token from '@/components/chooseToken/token'\nimport { useDispatch, connect } from 'umi'\nimport { Result } from '@/components/result/simple'\nimport { message } from '@/components/message'\nimport type { FutureStateType } from '@/models/dataType'\nimport { calcMaxDecreaseMargin } from '@1kx/typechain/helper/future'\n\nfunction RemoveMargin(props) {\n  const dispatch = useDispatch()\n  const { currentToken, loading, closeModal } = props\n  const {\n    userMargin: margin,\n    collateralTokenObj: collateralToken,\n    indexTokenObj: indexToken,\n    isLong,\n    pair,\n  } = currentToken\n  const [submiting, setSubmiting] = useState(false)\n  const [amountIn, setAmountIn] = useState(0)\n  const [maxRemovable, setMaxRemovable] = useState('0')\n\n  const changeAmount = (value: number) => {\n    setAmountIn(value)\n  }\n\n  useEffect(() => {\n    const max = calcMaxDecreaseMargin(currentToken, pair, pair.collateralPrice, pair.indexPrice)\n    const maxStr = formatSat(max.toString(), pair.userCollateralTokenDecimal)\n    // console.log('params:', currentToken, pair, pair.collateralPrice, pair.indexPrice)\n    // console.log(max, maxStr)\n    setMaxRemovable(maxStr)\n  }, [])\n\n  const handleSubmit = async () => {\n    setSubmiting(true)\n    try {\n      const res = await dispatch({\n        type: 'future/decreaseMargin',\n        payload: {\n          tokenId: collateralToken.id,\n          params: {\n            _collateralToken: collateralToken.id,\n            _indexToken: indexToken.id,\n            _isLong: isLong,\n            _amountOut: amountRaw(amountIn.toString(), collateralToken.tokenDecimal),\n          },\n        },\n      })\n      if (res.hash) {\n        Result({\n          msg: _('success'),\n          txid: res.hash,\n          token: currentToken,\n          onOk: () => {\n            closeModal()\n            dispatch({\n              type: 'future/getPairs',\n            })\n          },\n        })\n        dispatch({\n          type: 'future/getPositionList',\n        })\n      } else {\n        message('Failed')\n      }\n    } catch (error: any) {\n      message(error)\n    }\n    setSubmiting(false)\n  }\n\n  return (\n    <Spin spinning={loading || submiting}>\n      <div className={styles.container}>\n        <div className={styles.card}>\n          <div className={styles.label}>\n            <div>\n              {_('max_removable')}:{' '}\n              <span className=\"primary\" onClick={() => changeAmount(parseFloat(maxRemovable))}>\n                {maxRemovable}\n              </span>\n            </div>\n            <div>\n              {_('current_margin')}: {margin}\n            </div>\n          </div>\n          <div className={styles.value}>\n            <InputNumber className=\"inputTxt\" value={amountIn} onChange={changeAmount} min={0} />\n            <Token data={collateralToken} />\n          </div>\n          <Slider amount={amountIn} onChange={changeAmount} max={maxRemovable} />\n        </div>\n        <Info currentToken={currentToken} amountIn={amountIn} isAdd={false} />\n        <Btn\n          height={50}\n          align=\"center\"\n          onClick={handleSubmit}\n          conditions={[\n            {\n              handle: amountIn <= 0,\n              txt: _('input_amount'),\n            },\n            {\n              handle: amountIn >= parseFloat(margin || '0'),\n              txt: _('lack_balance'),\n            },\n          ]}\n        >\n          {_('withdraw_margin')}\n        </Btn>\n      </div>\n    </Spin>\n  )\n}\n\nconst mapStateToProps = ({ future }: { future: FutureStateType }) => {\n  return {\n    ...future,\n  }\n}\n\nexport default connect(mapStateToProps)(RemoveMargin)\n","import { Modal } from 'antd'\n// import styles from './index.less'\nimport PanelMenu from '@/components/menu'\nimport { MarginMenuDatas } from '@/common/config'\nimport AddMargin from './add'\nimport RemoveMargin from './remove'\nimport { useState } from 'react'\n\nexport default function Liquidity(props) {\n  const { visible, setVisible, currentToken } = props\n  const [menutIndex, setMenuIndex] = useState(0)\n\n  return (\n    <Modal\n      width={420}\n      footer={null}\n      open={visible}\n      getContainer={() => document.getElementById('J_Page') || document.body}\n      onCancel={() => setVisible(false)}\n      closable={false}\n      // wrapClassName={styles.modal}\n    >\n      <PanelMenu menuDatas={MarginMenuDatas} menuIndex={menutIndex} setMenuIndex={setMenuIndex} />\n      <div style={{ display: menutIndex === 0 ? 'block' : 'none' }}>\n        <AddMargin currentToken={currentToken} closeModal={() => setVisible(false)} />\n      </div>\n      <div style={{ display: menutIndex === 1 ? 'block' : 'none' }}>\n        <RemoveMargin currentToken={currentToken} closeModal={() => setVisible(false)} />\n      </div>\n    </Modal>\n  )\n}\n","import _ from '@/i18n'\nimport styles from '../margin/info.less'\nimport BN from 'bignumber.js'\nimport type { FutureStateType } from '@/models/dataType'\nimport { connect } from 'umi'\nimport { opDecreasePosition } from '@1kx/typechain/helper/future'\nimport { useEffect, useState } from 'react'\nimport { formatBnPrice, formatLeverage, formatMr, formatPnl } from '../perp/utils'\nimport { amountRaw, formatSat } from '@/common/utils'\nimport { ArrowRight } from '@/components/ui'\ntype dataType = {\n  isPositive: boolean\n  pnlStr: string\n  roeStr: string\n  leverage: string\n  receive: number\n  mr: string\n  liqPrice: string\n  leftMargin: string\n}\ntype propsType = {\n  currentToken: any\n  amountIn: string\n}\nfunction Info(props: propsType) {\n  const { currentToken, amountIn } = props\n  const {\n    collateralTokenObj,\n    userSize: size,\n    margin,\n    userMargin,\n    openNotional,\n    pair,\n  } = currentToken\n  const [data, setData] = useState<dataType>({} as dataType)\n\n  useEffect(() => {\n    const amountInRaw = amountRaw(amountIn || '0', pair.userIndexTokenDecimal)\n    // console.log({\n    //   pos: currentToken,\n    //   pair: pair,\n    //   size: BigInt(amountInRaw),\n    //   collateralPrice: pair.collateralPrice,\n    //   indexPrice: pair.indexPrice,\n    // })\n    const closeShortRes = opDecreasePosition(\n      currentToken,\n      pair,\n      BigInt(amountInRaw),\n      pair.collateralPrice,\n      pair.indexPrice,\n    )\n    // console.log('closeShortRes', closeShortRes)\n    const { isPositive, pnlStr, roeStr } = formatPnl(\n      closeShortRes.pnl,\n      pair.userCollateralTokenDecimal,\n      margin,\n    )\n    const leverage = formatLeverage(margin, openNotional)\n    const receive = formatSat(\n      closeShortRes.receiveMargin.toString(),\n      pair.userCollateralTokenDecimal,\n    )\n    let mr = formatMr(closeShortRes.mr)\n    let liqPrice = formatBnPrice(closeShortRes.indexLiqPrice)\n\n    const leftMargin = new BN(size - amountIn).div(size).multipliedBy(userMargin).toFixed(6)\n\n    if (amountIn >= size) {\n      mr = '--'\n      liqPrice = '--'\n    }\n    setData({\n      isPositive,\n      pnlStr,\n      roeStr,\n      leverage,\n      receive,\n      mr,\n      liqPrice,\n      leftMargin,\n    })\n  }, [currentToken, amountIn])\n\n  return (\n    <div className={styles.info}>\n      <div className={styles.item}>\n        <div className={styles.label}>\n          {_('pnl')}/{_('roe')}\n        </div>\n        <div className={data.isPositive ? 'primary' : 'red'}>\n          {data.pnlStr}/{data.roeStr}\n        </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('leverage')}</div>\n        <div className={styles.value}>{data.leverage}</div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('margin')}</div>\n        <div className={styles.value}>\n          {userMargin} <ArrowRight /> {data.leftMargin}\n        </div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('margin_rate')}</div>\n        <div className={styles.value}>{data.mr}</div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>EST {_('liquidation_price')}</div>\n        <div className={styles.value}>${data.liqPrice}</div>\n      </div>\n      <div className={styles.item}>\n        <div className={styles.label}>{_('receive')}</div>\n        <div className={data.isPositive ? 'primary' : 'red'}>\n          {data.receive} {_('in')} {collateralTokenObj.symbol}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = ({ future }: { future: FutureStateType }) => {\n  return {\n    ...future,\n  }\n}\n\nexport default connect(mapStateToProps)(Info)\n","import { Loading as Spin } from '@/components/loading'\nimport styles from './closePosition.less'\nimport _ from '@/i18n'\nimport { useState } from 'react'\nimport Slider from '@/components/slider'\nimport Btn from '@/components/btn'\nimport Info from './info'\nimport { amountRaw, calUsdPrice } from '@/common/utils'\nimport { InputNumber } from 'antd'\nimport Token from '@/components/chooseToken/token'\nimport { useDispatch, connect } from 'umi'\nimport { Result } from '@/components/result/simple'\nimport { message } from '@/components/message'\nimport BN from 'bignumber.js'\nimport type { FutureStateType } from '@/models/dataType'\nimport { opDecreasePosition } from '@1kx/typechain/helper/future'\nimport Icon from '@/components/icon'\n\nfunction ClosePostion(props) {\n  const dispatch = useDispatch()\n  const { currentToken, loading, closeModal } = props\n  const {\n    userSize: size,\n    collateralTokenObj,\n    indexTokenObj,\n    isLong,\n    userMargin: margin,\n    pair,\n  } = currentToken\n  const [submiting, setSubmiting] = useState(false)\n  const [amountIn, setAmountIn] = useState(0)\n\n  const changeAmount = (value: number) => {\n    setAmountIn(value)\n  }\n\n  const opReturn = (amountInRaw) => {\n    const data = opDecreasePosition(\n      currentToken,\n      pair,\n      BigInt(amountInRaw),\n      pair.collateralPrice,\n      pair.indexPrice,\n    )\n    console.log('data:', data)\n    return data\n  }\n\n  const handleSubmit = async () => {\n    setSubmiting(true)\n    console.log(amountIn, size)\n    const amountInRaw = amountRaw(amountIn.toString(), pair.userIndexTokenDecimal)\n\n    const _data = opReturn(amountInRaw)\n\n    try {\n      const res = await dispatch({\n        type: 'future/decreasePosition',\n        payload: {\n          tokenId: collateralTokenObj.id,\n          params: {\n            _collateralToken: collateralTokenObj.id,\n            _indexToken: indexTokenObj.id,\n            _isLong: isLong,\n            _marginDelta:\n              amountIn === size\n                ? 0\n                : new BN(amountIn)\n                  .div(size)\n                  .multipliedBy(margin)\n                  .multipliedBy(Math.pow(10, pair.userCollateralTokenDecimal))\n                  .toFixed(0),\n            // _notionalDelta: new BN(amountIn)\n            //   .div(size)\n            //   .multipliedBy(openNotional)\n            //   .multipliedBy(Math.pow(10, collateralTokenObj.tokenDecimal))\n            //   .toFixed(0),\n            _notionalDelta: _data.notionalDelta,\n          },\n        },\n      })\n      if (res.hash) {\n        Result({\n          msg: isLong ? (\n            <div className={`${styles.result_icon} ${styles.green}`}>\n              <Icon type=\"icon-up\" />\n              {_('long_closed')}\n            </div>\n          ) : (\n            <div className={`${styles.result_icon} ${styles.red}`}>\n              <Icon type=\"icon-down1\" />\n              {_('short_closed')}\n            </div>\n          ),\n          txid: res.hash,\n          token: indexTokenObj,\n          chainId: props.wallet.walletChainId,\n          onOk: () => {\n            closeModal()\n            dispatch({\n              type: 'future/getPairs',\n            })\n          },\n        })\n\n        dispatch({\n          type: 'future/getPositionList',\n        })\n      }\n    } catch (error: any) {\n      message(error)\n    }\n    setSubmiting(false)\n  }\n\n  return (\n    <Spin spinning={loading || submiting}>\n      <div className={styles.container}>\n        <div className={styles.card}>\n          <div className={styles.label}>\n            <div>\n              {_('close')} {isLong ? _('long') : _('short')}: $\n              {calUsdPrice(amountIn, pair.userIndexPrice)}\n            </div>\n            <div>\n              {_('position_size')}:&nbsp;\n              <span className=\"primary\" onClick={() => changeAmount(size)}>\n                {size}\n              </span>\n            </div>\n          </div>\n          <div className={styles.value}>\n            <InputNumber\n              className=\"inputTxt\"\n              value={amountIn}\n              onChange={changeAmount}\n              min={0}\n              max={size}\n            />\n            <Token data={indexTokenObj} />\n          </div>\n          <Slider amount={amountIn} onChange={changeAmount} max={size} />\n        </div>\n        <div className={styles.card}>\n          <div className={styles.label}>\n            <div>{_('price')}</div>\n            <div>\n              {_('mark')}:{pair.userIndexPrice}\n            </div>\n          </div>\n          <div className={styles.value}>\n            <div>{pair.userIndexPrice}</div>\n            <div>USD</div>\n          </div>\n        </div>\n        <Info currentToken={currentToken} amountIn={amountIn} />\n        <Btn\n          height={50}\n          align=\"center\"\n          onClick={handleSubmit}\n          conditions={[\n            {\n              handle: amountIn <= 0,\n              txt: _('input_amount'),\n            },\n            {\n              handle: amountIn > parseFloat(size || '0'),\n              txt: _('lack_balance'),\n            },\n          ]}\n        >\n          {_('close_position')}\n        </Btn>\n      </div>\n    </Spin>\n  )\n}\n\nconst mapStateToProps = ({ future, wallet }: { future: FutureStateType, wallet: any }) => {\n  return {\n    ...future,\n    wallet\n  }\n}\n\nexport default connect(mapStateToProps)(ClosePostion)\n","import { Modal } from 'antd'\nimport styles from './index.less'\nimport PanelMenu from '@/components/menu'\nimport { ClosePositionDatas } from '@/common/config'\nimport ClosePosition from './closePosition'\nimport { useState } from 'react'\n\nexport default function ClosePositionMenu(props) {\n  const { visible, setVisible, currentToken } = props\n  const [menutIndex, setMenuIndex] = useState(1)\n\n  return (\n    <Modal\n      width={420}\n      footer={null}\n      open={visible}\n      getContainer={() => document.getElementById('J_Page') || document.body}\n      onCancel={() => setVisible(false)}\n      closable={false}\n      wrapClassName={styles.modal}\n    >\n      <PanelMenu\n        menuDatas={ClosePositionDatas}\n        menuIndex={menutIndex}\n        setMenuIndex={setMenuIndex}\n      />\n      {/* <div style={{ display: menutIndex === 0 ? 'block' : 'none' }}>\n        <AddMargin currentToken={currentToken} closeModal={() => setVisible(false)} />\n      </div> */}\n      <div style={{ display: menutIndex === 1 ? 'block' : 'none' }}>\n        <ClosePosition currentToken={currentToken} closeModal={() => setVisible(false)} />\n      </div>\n    </Modal>\n  )\n}\n","import styles from './index.less'\nimport { Table } from 'antd'\nimport _ from '@/i18n'\nimport { useEffect, useState,useRef } from 'react'\nimport Margin from '../margin'\nimport type { ColumnsType } from 'antd/lib/table'\nimport type {\n  FutureStateType,\n  TokenDataFullType,\n  TokenStateType,\n  WalletStateType,\n} from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { calUsdPrice, formatSat, toFixed } from '@/common/utils'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\nimport CloseOrder from '../closePosition'\nimport { calcPnl, calcMr } from '@1kx/typechain/helper/future'\nimport { formatLeverage, formatMr, formatPnl } from '../perp/utils'\n\nfunction Positions(props) {\n  const { positionList, account, tokenPairs, tokenDatas } = props\n  const dispatch = useDispatch()\n  const [marginVisible, setMarginVisible] = useState(false)\n  const [closeOrderVisible, setCloseOrderVisible] = useState(false)\n  const [currentToken, setCurrentToken] = useState({})\n  const [loading, setLoading] = useState(false)\n  const [varA, setVarA] = useState(0)\n  const intervalRef = useRef<any>(null);\n\n  \n\n  useEffect(() => {\n    const fun = async () => {\n      if (account) {\n        setLoading(true)\n        await dispatch({\n          type: 'future/getPositionList',\n        })\n        setLoading(false)\n      }\n    }\n    if(tokenPairs && tokenPairs.length > 0){\n      fun()\n    }\n    \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [account, tokenPairs])\n\n  useEffect(() => {\n    intervalRef.current = setInterval(async () => {\n     \n      if (account && tokenPairs && tokenPairs.length > 0) {\n        // dispatch({\n        //   type: 'future/getPositionList',\n        // })\n      }\n    }, 5 * 1e3)\n\n    return () => {\n      clearInterval(intervalRef.current);\n    }\n  }, [account,tokenPairs,dispatch])\n\n  const showMarginModal = (token) => {\n    setCurrentToken(token)\n    setMarginVisible(true)\n  }\n  const closeOrder = (token) => {\n    setCurrentToken(token)\n    setCloseOrderVisible(true)\n  }\n  const columns: ColumnsType<TokenDataFullType> = [\n    {\n      title: (\n        <div>\n          {_('positions')}\n          <br />\n          {_('funding_rate')}\n        </div>\n      ),\n      dataIndex: 'positions',\n      key: 'positions',\n      align: 'left',\n      render: (text, record) => {\n        const { indexTokenObj, isLong, pair, openNotional, margin } = record\n        const fundingRate = (isLong ? pair.longFundingRate : pair.shortFundingRate).toString()\n        const userFundingRate = formatSat(fundingRate, 7)\n\n        // const leverage = margin\n        //   ? new BN(openNotional.toString()).div(margin.toString()).toFixed(2)\n        //   : 0\n\n        const leverage = formatLeverage(margin, openNotional)\n        return (\n          <div className={styles.type}>\n            <span className={isLong ? styles.green : styles.red}>{isLong ? 'L' : 'S'}</span>{' '}\n            {indexTokenObj.symbol} <span className={styles.text}>{leverage}</span>\n            <br />\n            <span className={styles.text}>{userFundingRate}%/1h</span>\n          </div>\n        )\n      },\n    },\n    {\n      title: (\n        <div>\n          {_('size')}\n          <br /> {_('pnl')}/{_('roe')}\n        </div>\n      ),\n      dataIndex: 'userSize',\n      key: 'userSize',\n      align: 'right',\n      render: (text, record) => {\n        const { indexTokenObj, pair, margin } = record\n        let pnl = calcPnl(record, pair, pair.collateralPrice, pair.indexPrice)\n        const { isPositive, pnlStr, roeStr } = formatPnl(\n          pnl,\n          pair.userCollateralTokenDecimal,\n          margin,\n        )\n\n        return (\n          <>\n            <div>\n              {toFixed(text, 4)} {indexTokenObj.symbol}\n            </div>\n\n            <div className={isPositive ? styles.green : styles.red}>\n              {pnlStr} ({roeStr})\n            </div>\n          </>\n        )\n      },\n    },\n\n    {\n      title: (\n        <>\n          {_('margin')}\n          <br />\n          {_('value')}\n        </>\n      ),\n      dataIndex: 'userMargin',\n      key: 'userMargin',\n      align: 'right',\n      render: (text, record) => {\n        const { collateralTokenObj, pair } = record\n        return (\n          <div>\n            {text} {collateralTokenObj.symbol} <br />${calUsdPrice(text, pair.userCollateralPrice)}\n          </div>\n        )\n      },\n    },\n\n    {\n      title: (\n        <>\n          {_('entry_price')}\n          <br />\n          {_('liq_price')}\n        </>\n      ),\n      dataIndex: 'userEntryIndexPrice',\n      key: 'userEntryIndexPrice',\n      align: 'right',\n      render: (text, record) => {\n        const { userLiqPrice } = record\n        return (\n          <div>\n            ${text}\n            <br />${userLiqPrice}\n          </div>\n        )\n      },\n    },\n\n    {\n      title: (\n        <>\n          {_('mr')}\n          <br />\n          {_('mmr')}\n        </>\n      ),\n      dataIndex: 'mr',\n      key: 'mr',\n      align: 'right',\n      render: (text, record) => {\n        const { userMmr, pair } = record\n\n        const mr = calcMr(record, pair, pair.collateralPrice, pair.indexPrice)\n        const mr_str = formatMr(mr)\n        return (\n          <div>\n            {mr_str}\n            <br />\n            {userMmr}%\n          </div>\n        )\n      },\n    },\n\n    {\n      title: _('manage'),\n      dataIndex: 'manage',\n      key: 'manage',\n      align: 'center',\n      render: (text, record) => {\n        return (\n          <div className={styles.action}>\n            <span onClick={() => showMarginModal(record)}>{_('edit_margin')}</span>\n            <span onClick={() => closeOrder(record)} className={styles.close}>\n              {_('close')}\n            </span>\n          </div>\n        )\n      },\n    },\n  ]\n  return (\n    <>\n      <Table\n        columns={columns}\n        dataSource={positionList.filter((v) => v.size > 0&&v.userSize)}\n        className={styles.table}\n        rowKey=\"id\"\n        loading={{\n          spinning: loading && positionList.length < 1 && !!tokenDatas,\n          indicator: <Loading3QuartersOutlined spin style={{ fontSize: 30 }} />,\n        }}\n      />\n      {marginVisible && (\n        <Margin visible={marginVisible} setVisible={setMarginVisible} currentToken={currentToken} />\n      )}\n      {closeOrderVisible && (\n        <CloseOrder\n          visible={closeOrderVisible}\n          setVisible={setCloseOrderVisible}\n          currentToken={currentToken}\n        />\n      )}\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  tokens,\n  future,\n  wallet,\n  loading,\n}: {\n  tokens: TokenStateType\n  future: FutureStateType\n  wallet: WalletStateType\n  loading: any\n}) => {\n  const effects = loading.effects\n  return {\n    ...tokens,\n    ...future,\n    ...wallet,\n    loading: effects['future/getPositionList'] || false,\n  }\n}\n\nexport default connect(mapStateToProps)(Positions)\n","import styles from './index.less'\nimport { Table } from 'antd'\nimport _ from '@/i18n'\nimport { useEffect, useState } from 'react'\nimport type { FutureStateType, HistoryStateType, WalletStateType } from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { formatDate, strAbbreviation } from '@/common/utils'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\nimport { getChainById } from '@/layout/header/chainData'\nimport { getNetwork } from '@/common/utils'\n\nconst pageCount = 10\n\nfunction TradeHistory(props) {\n  const { account, type, positionList, walletChainId,dataSourceChainId,currentWallet={} } = props\n  console.log(props,'TradeHistory')\n  const dispatch = useDispatch()\n  const [totalCount, setTotalCount] = useState(0)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [records, setRecords] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [varA, setVarA] = useState(0)\n  const chainData = getChainById(walletChainId)\n  const network = getNetwork(dataSourceChainId, currentWallet.network)\n\n  const getCount = async () => {\n    if (type === 'personal' && !account) {\n      return setTotalCount(0)\n    }\n    const param = type === 'personal' ? { account,network } : {network}\n\n    const count = await dispatch({\n      type: 'history/getOrderAggregationCount',\n      payload: param,\n    })\n    setTotalCount(count)\n  }\n\n  const getRecords = async (page: number = 1) => {\n    if (type === 'personal' && !account) {\n      return setRecords([])\n    }\n    let param = {\n      skip: (page - 1) * pageCount,\n      first: pageCount,\n      network\n    }\n    if (type === 'personal') {\n      param.account = account\n    }\n    const recordsRes = await dispatch({\n      type: 'history/getOrderAggregation',\n      payload: param,\n    })\n    setRecords(recordsRes)\n  }\n\n  useEffect(() => {\n    const fun = async () => {\n      setLoading(true)\n      await getCount()\n      await getRecords()\n      setLoading(false)\n    }\n    fun()\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [account, positionList.length])\n\n  useEffect(() => {\n    const timeoutA = setTimeout(async () => {\n      setVarA(varA + 1)\n      await getCount()\n      getRecords(currentPage)\n    }, 30 * 1e3)\n\n    return () => {\n      clearTimeout(timeoutA)\n    }\n  }, [varA])\n\n  const onChange = async (value: number) => {\n    console.log(value)\n    setCurrentPage(value)\n    getRecords(value)\n  }\n\n  const columns = [\n    {\n      title: '',\n      dataIndex: 'timestamp',\n      key: 'timestamp',\n      width: 180,\n      render: (text) => formatDate(text * 1000, 'YYYY/MM/DD, HH:mm A'),\n    },\n    {\n      title: '',\n      dataIndex: 'content',\n      key: 'content',\n    },\n    {\n      title: '',\n      dataIndex: 'account',\n      key: 'account',\n      width: 162,\n      render: (text) => {\n        return (\n          <>\n            {_('owner')}:&nbsp;\n            <a\n              className=\"primary\"\n              href={`${chainData.exporerAccountUrl}/${text}?network=${chainData.network}`}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {strAbbreviation(text)}\n            </a>\n          </>\n        )\n      },\n    },\n  ]\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.table_wrap}>\n        <Table\n          columns={columns}\n          dataSource={records}\n          className={styles.table}\n          rowKey=\"timestamp\"\n          loading={{\n            spinning: loading && records.length < 1,\n            indicator: <Loading3QuartersOutlined spin style={{ fontSize: 30 }} />,\n          }}\n          pagination={{\n            onChange,\n            total: totalCount,\n            showTotal: (total) => {\n              const lastPageCount =\n                pageCount * currentPage > total ? total : pageCount * currentPage\n              return `${pageCount * (currentPage - 1) + 1} - ${lastPageCount} of ${total}`\n            },\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = ({\n  future,\n  history,\n  wallet,\n}: {\n  future: FutureStateType\n  history: HistoryStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...future,\n    ...history,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(TradeHistory)\n","\nimport { Table, Spin } from 'antd'\nimport _ from '@/i18n'\nimport React, { useEffect, useState, useMemo } from 'react'\nimport { connect, useDispatch } from 'umi'\nimport { formatDate } from '@/common/utils'\nimport type { FuturePair } from '@1kx/typechain/helper/future'\nimport FutureLib from '@/lib/future'\nimport styles from './index.less'\n\n//本来考虑穿过去处理 发现useEffect。。\ntype Props = {\n  list: API.FutureLimitItem[],\n  account: string,\n  network: 'zk' | 'sepolia'|'arbitrum' | null,\n  loading: boolean,\n  tokenPairs: FuturePair[],\n  chainId: string,\n  tokens: any,\n\n}\n\n\nconst LimitOrder: React.FC<Props> = ({ list = [], account = '', network = '', loading , chainId, tokenPairs = [], tokens }) => {\n  \n\n  const tokenPairsReday = useMemo(() => {\n    return tokenPairs.length > 0\n  }, [tokenPairs])\n  const tokensReday = useMemo(() => {\n    return tokens.tokenDatas.length > 0\n  }, [tokens])\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (account && tokenPairsReday && tokensReday) {\n      console.log('wtffff')\n      dispatch({\n        type: 'future/fetchLimitOrder',\n        payload: { account, network },\n        callback: (ret) => {\n          if (ret.error) {\n            console.log(ret)\n          }\n        }\n      })\n    }\n  }, [account, network, tokenPairsReday, tokensReday, dispatch])\n\n  const handleCancel = async (record: API.FutureLimitItem) => {\n    // 取消开仓限价单\n    // 取消关仓限价单\n    // 注意到完整执行完 时间较长  需要加个loading状态\n    dispatch({\n      type: 'future/save',\n      payload: {\n        limitOrder: list.map(item => {\n          item.submiting = item.id === record.id\n          return item\n        })\n      },\n    })\n    try {\n      await FutureLib.cancelIncreaseOrder(chainId, BigInt(record.orderIndex))\n    } catch (err) {\n      console.log(err)\n    }\n\n\n    dispatch({\n      type: 'future/fetchLimitOrder',\n      payload: { account, network },\n      callback: (ret) => {\n        if (ret.error) {\n          console.log(ret)\n        }\n      }\n    })\n  }\n\n  const handleCancelAll = () => {\n    // 取消开仓限价单\n    // 取消关仓限价单 \n    dispatch({\n      type: 'future/fetchLimitOrder',\n      payload: { account, network },\n      callback: (ret) => {\n        if (ret.error) {\n          console.log(ret)\n        }\n      }\n    })\n  }\n\n\n  const columns = [\n    {\n      title: 'Time',\n      dataIndex: 'timestamp',\n      key: 'timestamp',\n      render: (text) => formatDate(text * 1000, 'MM/DD, HH:mm:ss'),\n      align: 'right'\n    },\n\n    {\n      title: 'Positions',\n      dataIndex: 'execStatusName',\n      key: 'execStatusName',\n      align: 'right',\n      render: (text, record: API.FutureLimitItem) => {\n        return <>\n          {\n            record.execStatus === 3 && <><span className={record.isLong ? styles.longText : styles.shortText}>{record.isLong ? 'L' : 'S'}</span> <span>{record.indexSymbol}</span></>\n          }\n        </>\n      },\n    },\n    {\n      title: 'Size',\n      dataIndex: 'notionalDeltaForUSD',\n      key: 'notionalDeltaForUSD',\n      render: (text) => `$${text}`,\n      align: 'right'\n    },\n    {\n      title: <div className={styles.tableTh}>\n        <span>\n          Margin\n        </span>\n        <span>\n          Value\n        </span>\n      </div>,\n      dataIndex: 'Margin',\n      key: 'Margin',\n      render: (text,record) => (<div className={styles.tableTh}>\n        <span>\n          {text} {record.collateralSymbol}\n        </span>\n        <span>\n         ${record.MarginValue}\n        </span>\n      </div>),\n      align: 'right'\n    },\n    {\n      title: 'Price',\n      dataIndex: 'targetPrice',\n      key: 'targetPrice',\n      align: 'right',\n      render: (text, record: API.FutureLimitItem) => {\n        return <>\n          {\n            record.targetPrice ? `$${record.targetPrice}` : `$${record.maxPrice}-$${record.minPrice}`\n\n          }\n\n        </>\n      },\n    },\n    {\n      title: () => (<span   >Manage</span>),\n      key: 'action',\n      align: 'right',\n      render: (_, record) => {\n        console.log(record.submiting)\n        return <Spin spinning={Boolean(record.submiting)} size=\"small\"><span className={styles.editText} onClick={() => { handleCancel(record) }}>Cancel</span></Spin>\n      },\n    },\n\n  ]\n\n  return (\n    <div className={styles.container} >\n      <div >\n        <Table\n          columns={columns}\n          dataSource={list}\n          size=\"small\"\n          loading={loading}\n\n          rowKey=\"id\"\n        />\n      </div>\n    </div>\n  )\n}\n\n\n\nexport default connect(({ future, wallet, tokens, loading }) => ({\n  list: future.limitOrder,\n  tokenPairs: future.tokenPairs, //计算价格使用\n  account: wallet.account, //请求参数\n  network: wallet.currentWallet && wallet.currentWallet.network, //参数\n  chainId: wallet.walletChainId,\n  tokens: tokens, // 需要根据indexToken 找到 coin name\n  loading: loading.effects['future/fetchLimitOrder'] ,\n}))(LimitOrder)\n","import Layout from '@/layout'\nimport { useState } from 'react'\nimport { connect } from 'umi'\nimport Chart from './chart'\nimport styles from './index.less'\nimport Panel from './panel'\nimport Positions from './positions'\nimport _ from '@/i18n'\nimport TradeHistory from './tradeHistory'\nimport LimitOrder from './LimitOrder'\nimport type { CommonStateType, WalletStateType } from '@/models/dataType'\nimport { getNetwork } from '@/common/utils'\n\nconst menuDatas = [_('positions'), _('trade_history'), _('market_trades'),_('open_orders'),]\n\nfunction Trade(props: CommonStateType & WalletStateType) {\n  const { isShowChart, dataSourceChainId, currentWallet = {} } = props\n  const [menuIndex, setMenuIndex] = useState(0)\n  const network = getNetwork(dataSourceChainId, currentWallet.network)\n  const isZk = network === 'zk' || network === 'arbitrum'\n  return (\n    <Layout>\n      <div className={styles.container}>\n        <Panel network={network} />\n        <div className={styles.datas}>\n          {isShowChart && <Chart />}\n          {isZk && (\n            <div className={styles.table_datas}>\n              <div className={styles.title_wrap}>\n                {menuDatas.map((menu, index) => (\n                  <div\n                    className={index === menuIndex ? styles.current_title : styles.title}\n                    key={menu}\n                    onClick={() => {\n                      setMenuIndex(index)\n                    }}\n                  >\n                    {menu}\n                  </div>\n                ))}\n              </div>\n              {menuIndex === 0 && <Positions />}\n              {menuIndex === 1 && <TradeHistory type=\"personal\" />}\n              {menuIndex === 2 && <TradeHistory type=\"market\" />}\n              {menuIndex === 3 &&  <LimitOrder/>}\n             \n            </div>\n          )}\n        </div>\n      </div>\n    </Layout>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  wallet,\n}: {\n  common: CommonStateType\n  wallet: WalletStateType\n}) => {\n  return { ...common, ...wallet }\n}\n\nexport default connect(mapStateToProps)(Trade)\n"],"sourceRoot":""}