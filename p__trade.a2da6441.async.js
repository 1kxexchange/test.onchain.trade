(self["webpackChunk_1kx_sourceCode"]=self["webpackChunk_1kx_sourceCode"]||[]).push([[974],{67297:function(e){e.exports={modal:"modal___1_gXd",result_title:"result_title___5hb-i",token:"token___1FK7M",name:"name___1bUZZ",result_link:"result_link___l4B_7"}},53768:function(e){e.exports={wrap:"wrap___1OpI5",item:"item___zU5Kt",title:"title___3culT",desc:"desc___3n3h3",long:"long___1uSq0",short:"short___3wkPh"}},16269:function(e){e.exports={container:"container___3YDFE",head:"head___15mBz",token:"token___29QUj",loading:"loading___3qch5"}},58162:function(e){e.exports={card:"card___1UP7m",label:"label___E0Z4P",value:"value___IacHa",amount:"amount___1Ncvm",info:"info___2gBow",item:"item___Vzey6",arr:"arr___3rZxA",green:"green___sEuxo",red:"red___NU2Lf",result_icon:"result_icon___BQsqf"}},21597:function(){},25631:function(e){e.exports={container:"container___1CbrE",datas:"datas___3_cio",table_datas:"table_datas___2RqPN",title_wrap:"title_wrap___22dT8",title:"title___112th",current_title:"current_title___3zuwG"}},60155:function(e){e.exports={card:"card___1iTMp",label:"label___1aijI",value:"value___7xM9H",amount:"amount___1evn4",info:"info___x8-9s",item:"item___asDq0",arr:"arr___2wrBs",green:"green___vlGjE",red:"red___3tRta",result_icon:"result_icon___1elrl"}},9696:function(e){e.exports={info:"info___1DWvF",item:"item___3hTZ9",value:"value___2vWj2"}},42226:function(e){e.exports={container:"container___JUd0k",menu:"menu___do0Dr"}},8372:function(e){e.exports={card:"card___-cdFP",label:"label___3sEo9",value:"value___27Ayq",amount:"amount___1R05F",info:"info___1wQzP",item:"item___2dUcO",arr:"arr___2_7li",green:"green___qdu2p",red:"red___1OEwC",result_icon:"result_icon___3-1TI",container:"container___2dK5f",green_btn:"green_btn___3-Dfq",red_btn:"red_btn___3H6fG"}},1055:function(e){e.exports={action:"action___1mXKf",close:"close___1JRKn",green:"green___5xcuC",red:"red___3IMlB",table:"table___10SoB",type:"type___19l_i",text:"text___6Jsaq"}},43591:function(e){e.exports={card:"card___12_YK",label:"label___1i87X",value:"value___10mvD",amount:"amount___1a1tA",info:"info___1E0ri",item:"item___2rFou",arr:"arr___1G7cO",green:"green___1DTBX",red:"red___3bNDu",result_icon:"result_icon___3TEtn",container:"container___1akww",cardPay:"cardPay___3iFvS",cardReceive:"cardReceive___21mqq",title:"title___1UCoc",arrCircle:"arrCircle___1UUf_"}},49469:function(e){e.exports={card:"card___23Xeh",label:"label___1yf02",value:"value___1izNl",amount:"amount___1TgUu",info:"info___2ZjGy",item:"item___lQXSz",arr:"arr___37VJx",green:"green___2xKdg",red:"red___3B8Id",result_icon:"result_icon___1le6K",slider:"slider___1EgIv",row:"row___1sQqU",tpsl:"tpsl___31WMX",checkbox:"checkbox___2CZwt",silder_trigger:"silder_trigger___3-UZq",txt:"txt____r4mf",dig:"dig___1vySU",amount_green:"amount_green___1LFDz",amount_red:"amount_red___1if3C"}},50710:function(e){e.exports={container:"container___3aGt9"}},38973:function(e,n,t){"use strict";t.d(n,{x:function(){return x}});t(71194);var a=t(37079),r=t(67297),s=t.n(r),i=t(86914),l=t(49878),c=t(88249),o=t.n(c),d=t(3150),u=t(19159),m=t(89072),_=t(48521);function x(e){var n=e.msg,t=e.txid,r=e.token,c=e.onOk,x=e.chainId,h=r||{},v=h.icon,p=h.tokenId,g=h.symbol,f=(0,m.x)(x);a.Z.warning({width:420,title:"",content:(0,_.jsxs)("div",{className:s().container,children:[(0,_.jsxs)("div",{className:s().result_title,children:[r&&(0,_.jsxs)("div",{className:s().token,children:[v?(0,_.jsx)("img",{src:v,width:25}):(0,_.jsx)(u.Z,{tokenId:p,size:25}),(0,_.jsx)("div",{className:s().name,children:g})]}),n]}),(0,_.jsxs)("div",{className:s().result_link,children:[(0,_.jsxs)("a",{className:"primary",href:"".concat(f.exporerTxUrl,"/").concat(t,"?network=").concat(f.network),target:"_blank",rel:"noreferrer",children:[(0,i.Z)("browse"),": ",(0,d.Zp)(t,[16,16])]}),(0,_.jsx)(l.Z,{text:t,children:(0,_.jsx)("img",{src:o(),style:{cursor:"pointer"}})})]})]}),onOk:c,okText:(0,i.Z)("ok"),wrapClassName:s().modal,getContainer:()=>document.getElementById("J_Page")||document.body})}},25061:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return hn}});var a=t(8870),r=t(2824),s=t(3786),i=t(67294),l=t(55902),c=t(16269),o=t.n(c),d=t(3150),u=t(48521),m=(0,d.l$)(),_="iPhone"===m||"Android"===m;function x(e){window.tvWidget.selectedIntervalButton&&window.tvWidget.selectedIntervalButton.classList.remove("selected"),e.classList.add("selected"),window.tvWidget.selectedIntervalButton=e}function h(e){var n=e.symbol,t=e.theme,a=(0,l.Kd)(),r=()=>{var e="https://zksync-data-feed.onchain.trade/data-feed",r="30",s=new window.Datafeeds.UDFCompatibleDatafeed(e),i={bg:"#1D2233",text:"#fff"},l={bg:"#fff",text:"#000"},c="Dark"===t?i:l;window.tvWidget=new window.TradingView.widget({symbol:n.toLowerCase(),interval:r,container:"tv_chart_container",width:_?"360px":"676px",height:"302px",datafeed:s,library_path:"/charting_library/",locale:"zh-cn"===a?"zh":"en",disabled_features:["use_localstorage_for_settings","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_screenshot","header_fullscreen_button","border_around_the_chart","header_saveload","drawing_templates","source_selection_markers","volume_force_overlay","create_volume_indicator_by_default_once","create_volume_indicator_by_default","study_symbol_ticker_description","insert_indicator_dialog_shortcut"],enabled_features:["header_widget"],charts_storage_url:"https://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",preset:"mobile",toolbar_bg:"#ffffff",header_widget_buttons_mode:"adaptive",loading_screen:{backgroundColor:c.bg,foregroundColor:"#03cdc1"},theme:t,overrides:{"paneProperties.backgroundType":"solid","paneProperties.background":c.bg,"paneProperties.backgroundGradientStartColor":"#ffffff","scalesProperties.lineColor":c.text,"scalesProperties.textColor":c.text,"paneProperties.vertGridProperties.color":c.bg,"paneProperties.horzGridProperties.color":c.bg,"mainSeriesProperties.candleStyle.barColorsOnPrevClose":!0,"mainSeriesProperties.haStyle.barColorsOnPrevClose":!0,"mainSeriesProperties.barStyle.barColorsOnPrevClose":!0}}),window.tvWidget.onChartReady((()=>{var e=window.tvWidget.chart(),n=window.tvWidget._iFrame.contentWindow.document.getElementsByTagName("html")[0];n.style.setProperty("--tv-color-pane-background",c.bg);var t=[{label:"time",resolution:"15s"},{label:"1m",resolution:"1"},{label:"5m",resolution:"5"},{label:"15m",resolution:"15"},{label:"30m",resolution:"30"},{label:"1h",resolution:"60"},{label:"4h",resolution:"240"},{label:"1d",resolution:"D"},{label:"1w",resolution:"1W"},{label:"1m",resolution:"1M"},{label:"1y",resolution:"12M"}];e.onIntervalChanged().subscribe(null,(function(){window.tvWidget.changingInterval=!1})),t.forEach((n=>{var t=window.tvWidget.createButton();n.resolution===r&&x(t),t.setAttribute("data-resolution",n.resolution),t.setAttribute("data-chart-type",1),t.innerHTML="<span>"+n.label+"</span>",t.addEventListener("click",(function(){var n=+t.getAttribute("data-chart-type"),a=t.getAttribute("data-resolution");localStorage.setItem("tv-interval-charttype","".concat(a,"-").concat(n)),window.tvWidget.changingInterval||t.classList.contains("selected")||(e.resolution()!==a&&(window.tvWidget.changingInterval=!0,s._hasExeGetBars=!1,e.setResolution(a)),e.chartType()!==n&&(e.setChartType(n),s._hasExeGetBars=!1),x(t))}))}))}))};return(0,i.useEffect)((()=>{r()}),[t,n]),(0,u.jsx)("div",{id:"tv_chart_container"})}var v=h,p=(t(71194),t(37079)),g=t(43856),f=t(28759),j=t.n(f),Z=t(86914),k=t(33925),b=t(55130),w=(t(47673),t(40305)),y=t(76570),N=e=>{var n=/([\(\[\{\\\^\$\}\]\)\?\*\+\.])/gim;return e&&n.test(e)?e.replace(n,"\\$1"):e},S=(e,n)=>{var t=new RegExp(".*?"+N(e)+".*?","img");return n.filter((n=>t.test(n.symbol)||e==n.tokenId||e==n.liquidity))};function T(e){var n=e.changeShowList,t=e.data,a=e=>{var a=e.target.value;if(!a)return n(t);var r=S(a,t);n(r)};return(0,u.jsx)(w.Z,{placeholder:(0,Z.Z)("search_tips"),onChange:a,className:"search_input",allowClear:!0,prefix:(0,u.jsx)(y.Z,{})})}var I=T,C=t(19159),P=t(6011);function D(e){var n=e.changeToken,t=e.data,a=void 0===t?[]:t,s=e.currentToken,l=e.isLogin,c=e.loading,o=e.className,d=(0,i.useState)(!1),m=(0,r.Z)(d,2),_=m[0],x=m[1],h=(0,i.useState)(a),v=(0,r.Z)(h,2),f=v[0],w=v[1],y=(0,i.useState)(void 0),N=(0,r.Z)(y,2),S=N[0],T=N[1],D=void 0;s&&s.tokenId&&(D=a.findIndex((e=>e.tokenId===s.tokenId))),(0,i.useEffect)((()=>{a.length>0&&w(a)}),[a,l]);var L=e=>{x(!1),n(e)};return(0,u.jsxs)(u.Fragment,{children:["undefined"===typeof D?(0,u.jsxs)("div",{className:"".concat(j().token," ").concat(j().noToken," ").concat(o),onClick:()=>x(!0),children:[(0,u.jsx)("div",{className:j().noData,children:(0,Z.Z)("select_asset")}),(0,u.jsx)(g.m6,{})]}):(0,u.jsx)(k.Z,{className:o,changeToken:()=>x(!0),data:s}),(0,u.jsx)(p.Z,{width:420,footer:null,open:_,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>x(!1),closable:!1,wrapClassName:j().modal,children:(0,u.jsx)(P.g,{spinning:c,children:(0,u.jsxs)("div",{className:j().container,children:[(0,u.jsx)("div",{className:j().search_wrap,children:(0,u.jsx)(I,{changeShowList:e=>T(e),data:a})}),(0,u.jsx)("div",{className:j().content,children:(S||f).map(((e,n)=>{var t=e.symbol,a=e.fullName,r=e.icon,s=e.iconLp,i=e.tokenId,l=e.userTokenBalance,c=l;return(0,u.jsxs)("div",{className:D===n?"".concat(j().item," ").concat(j()["no".concat(n)]," ").concat(j().selected_item):"".concat(j().item," ").concat(j()["no".concat(n)]),onClick:()=>L(e),children:[(0,u.jsxs)("div",{className:j().info,children:[(0,u.jsx)("div",{className:j().icon,children:s||r?(0,u.jsx)("img",{src:r}):(0,u.jsx)(C.Z,{tokenId:i,size:25})}),(0,u.jsxs)("div",{className:j().title,children:[(0,u.jsx)("div",{className:j().symbol,children:t}),(0,u.jsx)("div",{className:j().full_name,children:a})]})]}),(0,u.jsxs)("div",{className:j().balance,children:[(0,u.jsx)("div",{className:j().no,children:c}),(0,u.jsx)("div",{className:j().usd,children:(0,u.jsx)(b.Z,{data:{amount:Number(c),token:e}})})]})]},i)}))})]})})})]})}var L=D,B=t(34795),E=t(53768),M=t.n(E);function F(e){var n=e.data,t=n.longFundingRate,a=n.shortFundingRate,r=n.totalShortSize,s=n.totalLongSize,i=n.userIndexPrice,l=n.userIndexTokenDecimal,c=e=>{if(!e)return 0;var n=(0,d.gB)(e.toString(),l);return(0,d.Ce)(n,i)};return l?(0,u.jsxs)("div",{className:M().wrap,children:[(0,u.jsxs)("div",{className:M().item,children:[(0,u.jsx)("div",{className:M().title,children:"Mark: "}),(0,u.jsx)("div",{className:M().desc,children:"Spot: "})]}),(0,u.jsxs)("div",{className:M().item,children:[(0,u.jsx)("div",{className:M().title,children:" "}),(0,u.jsx)("div",{className:M().desc,children:"24H Volume"})]}),(0,u.jsxs)("div",{className:M().item,children:[(0,u.jsx)("div",{className:M().title,children:" "}),(0,u.jsx)("div",{className:M().desc,children:"24H Fee "})]}),(0,u.jsxs)("div",{className:M().item,children:[(0,u.jsxs)("div",{className:M().long,children:["L $",c(s||0)," | ",(0,B.z)(t||0)]}),(0,u.jsxs)("div",{className:M().short,children:["S $",c(r||0)," | ",(0,B.z)(a||0)]})]}),(0,u.jsxs)("div",{className:M().item,children:[(0,u.jsx)("div",{className:M().title,children:" "}),(0,u.jsx)("div",{className:M().desc,children:"APY "})]})]}):null}var O=F;function z(e){var n=(0,l.I0)(),t=e.isDarkMode,a=e.tokenDatas,s=e.chartSelectedTokenId,c=e.isLogin,d=e.chartSelectedPair,m=e.loadError,_=(0,i.useState)({}),x=(0,r.Z)(_,2),h=x[0],p=x[1],g=e=>{n({type:"tokens/save",payload:{chartSelectedTokenId:e.id,chartSelectedPair:{}}})};return(0,i.useEffect)((()=>{if(s){var e=a.find((e=>e.id===s));e&&p(e)}else a&&a[0]&&p(a[0])}),[s,a,a&&a.length]),(0,u.jsx)("div",{className:"panel ".concat(o().container),children:!a||h.symbol||m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:o().head,children:[(0,u.jsx)(L,{currentToken:h,changeToken:g,data:(a||[]).filter((e=>e.symbol&&"osd"!==e.symbol.toLowerCase())),className:o().token,loading:a&&a.length<1,isLogin:c}),d&&(0,u.jsx)(O,{data:d})]}),h.symbol&&(0,u.jsx)(v,{theme:t?"Dark":"Light",symbol:h.symbol})]}):(0,u.jsx)("div",{className:o().loading,children:(0,u.jsx)(P.g,{})})})}var $=e=>{var n=e.common,t=e.tokens,r=e.wallet;return(0,a.Z)((0,a.Z)((0,a.Z)({},n),t),r)},q=(0,l.$j)($)(z),R=t(25631),A=t.n(R),U=t(89544),W=t(44512),X=t(39428),G=t(3182),K=t(43591),H=t.n(K),Q=t(21512),J=t(91747);function V(e,n){var t=Math.round(1e4*+n),a=J.O$.from(e).sub(J.O$.from(e).mul(t).div(1e6));return a.toString()}function Y(e,n){var t=Math.round(1e4*+n),a=J.O$.from(e).add(J.O$.from(e).mul(t).div(1e6));return a.toString()}var ee=t(19186),ne=t(75899),te=t(68052),ae=t(905);function re(e){var n=e.walletChainId,t=e.tokenDatas,s=e.currentWallet,c=e.osdTokenData,o=e.slippage,m=e.isLogin,_=e.swapTokenId,x=e.loadingData,h=e.loadError,v=(0,l.I0)(),p=(0,i.useState)(""),f=(0,r.Z)(p,2),j=f[0],k=f[1],b=(0,i.useState)(_),w=(0,r.Z)(b,2),y=w[0],N=w[1],S=(0,i.useState)(""),T=(0,r.Z)(S,2),I=T[0],C=T[1],D=(0,i.useState)(""),L=(0,r.Z)(D,2),B=L[0],E=L[1],M=(0,i.useState)(""),F=(0,r.Z)(M,2),O=F[0],z=F[1],$=(0,i.useState)("0"),q=(0,r.Z)($,2),R=q[0],A=q[1],W=(0,i.useState)(""),K=(0,r.Z)(W,2),J=K[0],re=K[1],se=(0,i.useState)(0),ie=(0,r.Z)(se,2),le=ie[0],ce=ie[1],oe=(0,i.useState)(!1),de=(0,r.Z)(oe,2),ue=de[0],me=de[1],_e=(0,i.useState)(""),xe=(0,r.Z)(_e,2),he=xe[0],ve=xe[1],pe=(0,i.useState)(!1),ge=(0,r.Z)(pe,2),fe=ge[0],je=ge[1],Ze=(0,i.useState)(0),ke=(0,r.Z)(Ze,2),be=ke[0],we=(ke[1],(0,d._u)(j,t?[...t,c]:[])),ye=(0,d._u)(y,t?[...t,c]:[]),Ne=s||{},Se=Ne.getTokenPrice,Te=Ne.calcSwapAmountIn,Ie=Ne.swap,Ce=Ne.calcSwapAmountOut,Pe=Ne.calcPoolTotal;(0,i.useEffect)((()=>{function e(){return n.apply(this,arguments)}function n(){return n=(0,G.Z)((0,X.Z)().mark((function e(){var n;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("in"===O&&I?qe(I):"out"===O&&B&&We(B),s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Pe(we,ye);case 5:n=e.sent,ce(n);case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}y&&j&&e()}),[y,j,m]);var De=()=>{je(!1),C(""),E(""),re(""),A("0"),v({type:"tokens/updatePrice"})},Le=e=>{re(e),je(!0),v({type:"tokens/updatePrice"})},Be=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var t,a,r,i,l,c;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return clearTimeout(be),e.next=3,(0,d.bX)(s,n);case 3:if(t=e.sent,t){e.next=6;break}return e.abrupt("return");case 6:return me(!0),a=(0,d.xo)(I,we.tokenDecimal),r=(0,d.xo)(B,ye.tokenDecimal),i=Y(a,o),l=V(r,o),e.next=13,Ie({chainId:n,tokenIn:j,amountInRaw:a,amountInRawMax:i,tokenOut:y,amountOutRaw:r,amountOutRawMin:l,type:O});case 13:c=e.sent,c.error?(0,ee.y)(c.error,{tokenOut:ye.symbol,tokenIn:we.symbol}):c.hash&&Le(c.hash),me(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ee(e,n){return Me.apply(this,arguments)}function Me(){return Me=(0,G.Z)((0,X.Z)().mark((function e(t,a){var r,s,i,l;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}return e.abrupt("return","0");case 2:return e.next=4,Se(j,n,we.tokenDecimal,we);case 4:return r=e.sent,e.next=7,Se(y,n,ye.tokenDecimal,ye);case 7:if(s=e.sent,r&&s){e.next=10;break}return e.abrupt("return","0");case 10:return i=new ae.Z(t).multipliedBy(r).div(s),l=i.minus(a).div(i).multipliedBy(100).abs(),e.abrupt("return",i.eq(0)?0:(0,d.FH)(l.toString(),2));case 13:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function Fe(e){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,G.Z)((0,X.Z)().mark((function e(t){var a,r,i=arguments;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"0",z(t),"in"===t?C(a):E(a),e.next=5,(0,d.bX)(s,n);case 5:if(r=e.sent,r&&j&&y){e.next=8;break}return e.abrupt("return");case 8:(0,d.Ds)("in"===t?qe:We,500)(a);case 9:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function ze(e,n){return $e.apply(this,arguments)}function $e(){return $e=(0,G.Z)((0,X.Z)().mark((function e(t,a){var r,s,i;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ce(n,a,j,y);case 2:if(r=e.sent,!r.error){e.next=9;break}(0,ee.y)(r.error,{tokenOut:ye.symbol,tokenIn:we.symbol}),E(""),A("0"),e.next=15;break;case 9:return s=(0,d.gB)(r.toString(),ye.tokenDecimal,0),E(s),e.next=13,Ee(t,s);case 13:i=e.sent,A(i);case 15:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function qe(e){return Re.apply(this,arguments)}function Re(){return Re=(0,G.Z)((0,X.Z)().mark((function e(t){var a,r;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return clearTimeout(be),e.next=3,(0,d.bX)(s,n);case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:if(t){e.next=10;break}return E(""),A("0"),e.abrupt("return");case 10:return ve("in"),r=(0,d.xo)(t,we.tokenDecimal),e.next=14,ze(t,r);case 14:ve("");case 15:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}function Ae(e,n){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,G.Z)((0,X.Z)().mark((function e(t,a){var r,s,i;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Te(n,a,j,y);case 2:if(r=e.sent,!r.error){e.next=9;break}(0,ee.y)(r.error,{tokenOut:ye.symbol,tokenIn:we.symbol}),C(""),A("0"),e.next=15;break;case 9:return s=(0,d.gB)(r.toString(),we.tokenDecimal,0),C(s),e.next=13,Ee(s,t);case 13:i=e.sent,A(i);case 15:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function We(e){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,G.Z)((0,X.Z)().mark((function e(n){var t;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(clearTimeout(be),n){e.next=5;break}return C(""),A("0"),e.abrupt("return");case 5:return ve("out"),t=(0,d.xo)(n,ye.tokenDecimal),e.next=9,Ae(n,t);case 9:ve("");case 10:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}var Ge=()=>{var e=j;clearTimeout(be),k(y),N(e)},Ke=parseFloat(R)>parseFloat(o);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(P.g,{spinning:t&&t.length<1&&!h||x||ue,children:(0,u.jsxs)("div",{className:H().container,children:[(0,u.jsx)(ne.Z,{className:H().cardPay,title:(0,Z.Z)("pay"),amount:"out"===he?U.m5:I,onAmountChange:e=>Fe("in",(e||"0").toString()),token:we,onChangeToken:e=>{e.tokenId===y&&Ge(),k(e.tokenId)}}),(0,u.jsx)("div",{className:H().arr,onClick:Ge,children:(0,u.jsx)(g.re,{className:H().arrCircle})}),(0,u.jsx)(ne.Z,{className:H().cardReceive,amount:"in"===he?U.m5:B,onAmountChange:e=>Fe("out",(e||"0").toString()),token:ye,title:(0,Z.Z)("receive"),onChangeToken:e=>{e.tokenId===j&&Ge(),N(e.tokenId),v({type:"tokens/save",payload:{chartSelectedTokenId:e.tokenId,chartSelectedPair:{}}})}}),(0,u.jsx)("div",{className:H().info,children:(0,u.jsxs)("div",{className:H().item,children:[(0,u.jsxs)("div",{className:H().label,children:[(0,Z.Z)("price_impact")," + ",(0,Z.Z)("fee")]}),(0,u.jsxs)("div",{className:Ke?"".concat(H().fee," ").concat(H().red):H().fee,children:[R,"%"]})]})}),(0,u.jsx)(Q.Z,{height:50,align:"center",onClick:Be,redCond:Ke,conditions:[{handle:!j||!y,txt:(0,Z.Z)("select_asset")},{handle:le>0&&parseFloat(B)>le,txt:(0,Z.Z)("not_enough",ye.symbol)},{handle:parseFloat(I||"0")<=0||parseFloat(B||"0")<=0,txt:(0,Z.Z)("input_amount")}],children:Ke?(0,Z.Z)("swap_anyway"):(0,Z.Z)("swap")})]})}),fe&&(0,u.jsx)(te.Z,{title:(0,Z.Z)("swap_done"),amountTile:(0,Z.Z)("swap_amount"),txid:J,visible:fe,close:De,chainId:n,tokenIn:(0,a.Z)((0,a.Z)({},we),{},{amount:I}),tokenOuts:[(0,a.Z)((0,a.Z)({},ye),{},{amount:B})]})]})}var se=e=>{var n=e.common,t=e.tokens,r=e.wallet,s=e.loading,i=s.effects;return(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},n),t),r),{},{loadingData:i["tokens/getData"]})},ie=(0,l.$j)(se)(re),le=(t(77883),t(49747)),ce=t(8372),oe=t.n(ce),de=(t(66126),t(99177)),ue=(t(77576),t(12028)),me=t(49469),_e=t.n(me);function xe(e){var n=e.maxLeverage,t=e.leverage,a=e.setLeverage,s=(0,i.useState)(!1),l=(0,r.Z)(s,2),c=l[0],o=l[1],d=(0,i.useState)(t),m=(0,r.Z)(d,2),_=m[0],x=m[1],h=e=>{o(e)},v=e=>{console.log(e),x(e),a(e)};return(0,i.useEffect)((()=>{n<t&&v(n)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:_e().row,children:[(0,u.jsx)("div",{className:_e().tpsl}),(0,u.jsxs)("div",{className:_e().silder_trigger,children:[(0,u.jsx)("div",{children:(0,u.jsx)(le.Z,{value:_,onChange:v,min:1,max:n||1,className:_e().dig})}),(0,u.jsx)("span",{className:_e().txt,children:(0,Z.Z)("slider")}),(0,u.jsx)(ue.Z,{onChange:h})]})]}),c&&(0,u.jsx)(de.Z,{value:_,onChange:v,className:_e().slider,min:1,max:n||1})]})}var he=xe,ve=t(38973),pe=t(39423),ge=t(51159);function fe(e){var n=(0,l.I0)(),t=e.isLogin,s=e.tokenDatas,c=e.osdTokenData,o=e.tokenPairs,m=e.isLong,_=e.currentWallet,x=e.walletChainId,h=e.positionList,v=(0,i.useState)(0),p=(0,r.Z)(v,2),g=p[0],f=p[1],j=(0,i.useState)(""),k=(0,r.Z)(j,2),b=k[0],w=k[1],y=(0,i.useState)(0),N=(0,r.Z)(y,2),S=N[0],T=N[1],I=(0,i.useState)(""),C=(0,r.Z)(I,2),D=C[0],E=C[1],M=(0,i.useState)(!1),F=(0,r.Z)(M,2),O=F[0],z=F[1],$=(0,i.useState)([]),q=(0,r.Z)($,2),R=q[0],A=q[1],U=(0,i.useState)([]),W=(0,r.Z)(U,2),K=W[0],H=W[1],J=(0,i.useState)(1),V=(0,r.Z)(J,2),Y=V[0],ee=V[1],ne=(0,i.useState)(""),te=(0,r.Z)(ne,2),ae=te[0],re=te[1],se=(0,i.useState)((0,B.d3)(b,D,o)),ie=(0,r.Z)(se,2),ce=ie[0],de=ie[1],ue=(0,i.useState)({}),me=(0,r.Z)(ue,2),_e=me[0],xe=me[1],fe=(0,i.useState)({}),je=(0,r.Z)(fe,2),Ze=je[0],ke=je[1],be=e=>{if(!e)return{};var n=[...s,c].find((n=>n.id.toLowerCase()===e.toLowerCase()));return n||{}},we=be(b),ye=be(D);(0,i.useEffect)((()=>{s&&s.length>0&&n({type:"future/getPairs"})}),[(s||[]).length>0]),(0,i.useEffect)((()=>{var e=[];o&&o.forEach((n=>{var t=e.findIndex((e=>e.id.toLowerCase()===n.indexToken.toLowerCase()));if(t<0){var a=be(n.indexToken);e.push(a)}})),A(e),!D&&e[1]&&(E(e[1].id),n({type:"tokens/save",payload:{chartSelectedTokenId:e[1].id}}))}),[o,s]),(0,i.useEffect)((()=>{var e=[];o&&o.forEach((n=>{if(n.indexToken.toLowerCase()===D.toLowerCase()){var t=be(n.collateralToken);e.push(t)}})),H(e),!e.find((e=>e.id===b))&&e[0]&&w(e[0].id)}),[D]);var Ne=()=>{var e=h.find((e=>e.collateralToken.toLowerCase()===b.toLowerCase()&&e.indexToken.toLowerCase()===D.toLowerCase()&&e.isLong===m));return e};(0,i.useEffect)((()=>{var e=(0,B.d3)(b,D,o);de(e),n({type:"tokens/save",payload:{chartSelectedPair:e}}),xe(Ne())}),[b,D,o&&o.length>0,h.length>0]);var Se=(e,n)=>{var t=(0,ge.Xl)(_e,ce,BigInt(e),BigInt(n),ce.collateralPrice,ce.indexPrice);console.log("data:",t),ke((0,a.Z)((0,a.Z)({},t),{},{liqPrice:(0,B.T$)(t.indexLiqPrice),amountInRaw:e,amountOutRaw:n}))},Te=(e,n)=>{try{var t=(0,ge.iM)(_e,ce,BigInt(Y*ge.sz),BigInt(n),BigInt(e),ce.collateralPrice,ce.indexPrice);return Se(t.marginDelta,t.sizeDelta),t}catch(a){console.log(a)}},Ie=e=>{if(e){var n=(0,d.xo)(e.toString(),ce.userCollateralTokenDecimal),t=Te(0,n),a=t.sizeDelta;a<0&&(a=0n);var r=(0,d.gB)(a.toString(),ce.userIndexTokenDecimal);T(r)}else T(0)},Ce=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(n){var t;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(n),re("in"),e.next=4,(0,d.bX)(_,x);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return");case 7:(0,d.Ds)(Ie,500)(n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Pe=e=>{w(e.id)},De=e=>{if(e){var n=(0,d.xo)((e||0).toString(),ce.userIndexTokenDecimal),t=Te(n,0),a=t.marginDelta;a<0&&(a=0n);var r=(0,d.gB)(a.toString(),ce.userCollateralTokenDecimal);f(r)}else f(0)};(0,i.useEffect)((()=>{"in"===ae?Ie(g):"out"===ae&&De(S)}),[Y,b,D]);var Le=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(n){var t;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return T(n),re("out"),e.next=4,(0,d.bX)(_,x);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return");case 7:(0,d.Ds)(De,500)(n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Be=e=>{E(e.id),n({type:"tokens/save",payload:{chartSelectedTokenId:e.id}})},Ee=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var t,a;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,d.bX)(_,x);case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return z(!0),e.next=8,n({type:"future/increasePosition",payload:{params:{_collateralToken:b,_indexToken:D,_isLong:m,_amountIn:Ze.amountInRaw,_notionalDelta:Ze.notionalDelta}}});case 8:a=e.sent,a.hash&&((0,ve.x)({msg:m?(0,u.jsxs)("div",{className:"".concat(oe().result_icon," ").concat(oe().green),children:[(0,u.jsx)(pe.Z,{type:"icon-up"}),(0,Z.Z)("long_opend")]}):(0,u.jsxs)("div",{className:"".concat(oe().result_icon," ").concat(oe().red),children:[(0,u.jsx)(pe.Z,{type:"icon-down1"}),(0,Z.Z)("short_opend")]}),txid:a.hash,token:ye,onOk:()=>{f(0),T(0),n({type:"future/getPairs"})}}),n({type:"future/getPositionList"})),z(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=!!o&&o.length<1&&!!s;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:oe().container,children:(0,u.jsxs)(P.g,{spinning:Me||O,children:[(0,u.jsxs)("div",{className:oe().card,children:[(0,u.jsxs)("div",{className:oe().label,children:[(0,u.jsxs)("div",{children:[(0,Z.Z)("pay"),"(",(0,Z.Z)("margin"),"+",(0,Z.Z)("fee"),"): $",(0,d.Ce)(g,ce.userCollateralPrice)]}),(0,u.jsxs)("div",{children:[(0,Z.Z)("balance"),":\xa0",(0,u.jsx)("span",{className:"primary",onClick:()=>Ce(parseFloat(we.userTokenBalance)),children:we.userTokenBalance})]})]}),(0,u.jsxs)("div",{className:oe().value,children:[(0,u.jsx)(le.Z,{className:"inputTxt",value:g,onChange:Ce,min:0}),(0,u.jsx)(L,{currentToken:we,changeToken:Pe,data:K,isLogin:t,loading:Me})]})]}),(0,u.jsxs)("div",{className:oe().card,children:[(0,u.jsxs)("div",{className:oe().label,children:[(0,u.jsxs)("div",{className:m?oe().green:oe().red,children:[m?(0,Z.Z)("long"):(0,Z.Z)("short"),": $",(0,d.Ce)(S,ce.userIndexPrice)]}),(0,u.jsxs)("div",{children:[(0,Z.Z)("market_price"),": $",ce.userIndexPrice]})]}),(0,u.jsxs)("div",{className:oe().value,children:[(0,u.jsx)(le.Z,{className:"inputTxt",value:S,onChange:Le,min:0}),(0,u.jsx)(L,{currentToken:ye,changeToken:Be,data:R,isLogin:t,loading:Me})]})]}),(0,u.jsx)(he,{maxLeverage:ce.userMaxLeverage,leverage:Y,setLeverage:ee}),(0,u.jsxs)("div",{className:oe().info,children:[(0,u.jsxs)("div",{className:oe().item,children:[(0,u.jsx)("div",{className:oe().label,children:(0,Z.Z)("entry_price")}),(0,u.jsxs)("div",{className:oe().fee,children:["$",ce.userIndexPrice]})]}),(0,u.jsxs)("div",{className:oe().item,children:[(0,u.jsx)("div",{className:oe().label,children:(0,Z.Z)("liquidation_price")}),(0,u.jsx)("div",{className:oe().fee,children:Ze.liqPrice&&"$".concat(Ze.liqPrice)})]}),(0,u.jsxs)("div",{className:oe().item,children:[(0,u.jsx)("div",{className:oe().label,children:(0,Z.Z)("funding_rate")}),(0,u.jsxs)("div",{className:oe().fee,children:[ce.userTradingFeeRate,"%/1h"]})]})]}),(0,u.jsx)(Q.Z,{height:50,align:"center",onClick:Ee,className:m?oe().green_btn:oe().red_btn,conditions:[{handle:!b||!D,txt:(0,Z.Z)("select_asset")},{handle:g<=0||S<=0,txt:(0,Z.Z)("input_amount")},{handle:g>parseFloat(we.userTokenBalance||"0"),txt:(0,Z.Z)("lack_balance")}],children:m?(0,Z.Z)("open_long"):(0,Z.Z)("open_short")})]})})})}var je=e=>{var n=e.tokens,t=e.wallet,r=e.future;return(0,a.Z)((0,a.Z)((0,a.Z)({},n),t),r)},Ze=(0,l.$j)(je)(fe),ke=t(42226),be=t.n(ke);function we(e){var n=e.network,t=(0,i.useState)(0),a=(0,r.Z)(t,2),s=a[0],l=a[1],c=[(0,u.jsx)(ie,{},"swap"),(0,u.jsx)(Ze,{isLong:!0},"long"),(0,u.jsx)(Ze,{isLong:!1},"short")];return"zk"===n?(c.length=3,U.Dx[1].disabled=!1,U.Dx[2].disabled=!1):(c.length=1,U.Dx[1].disabled=!0,U.Dx[2].disabled=!0),(0,u.jsxs)("div",{className:be().container,children:[(0,u.jsx)(W.Z,{menuIndex:s,setMenuIndex:l,menuDatas:U.Dx,className:be().menu}),c.map(((e,n)=>(0,u.jsx)("div",{style:{display:n===s?"block":"none"},children:e},n)))]})}t(55250);var ye=t(52060),Ne=t(1055),Se=t.n(Ne),Te=t(60155),Ie=t.n(Te),Ce=t(66996),Pe=t(9696),De=t.n(Pe);function Le(e){var n=e.currentToken,t=e.amountIn,a=e.isAdd,s=n.margin,l=n.pair,c=n.openNotional,o=n.userLiqPrice,m=(0,i.useState)({}),_=(0,r.Z)(m,2),x=_[0],h=_[1];return(0,i.useEffect)((()=>{var e=(0,d.xo)(t||"0",l.userCollateralTokenDecimal),r=[n,l,BigInt(e),l.collateralPrice,l.indexPrice],i=a?(0,ge.G1)(...r):(0,ge.pK)(...r),u=(0,B.Qy)(s,c),m=(0,B.Qy)(i.pos.margin,i.pos.openNotional),_=(0,B.z)((0,ge.li)(n,l,l.collateralPrice,l.indexPrice)),x=(0,B.z)(i.mr),v=(0,B.z)(i.pos.mmr),p=(0,d.gB)(s.toString(),l.userCollateralTokenDecimal),g=(0,d.gB)(i.pos.margin.toString(),l.userCollateralTokenDecimal),f=(0,B.T$)((0,ge.ey)(i.pos,i.pair,i.pair.collateralPrice,i.pair.indexPrice),4);t||(m=u,x=_,g=p,f=o),h({oldLeverage:u,newLeverage:m,oldMr:_,newMr:x,mmr:v,oldMargin:p,newMargin:g,newLiqPrice:f})}),[n,t]),(0,u.jsxs)("div",{className:De().info,children:[(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("leverage")}),(0,u.jsxs)("div",{className:De().value,children:[x.oldLeverage," ",(0,u.jsx)(g.ol,{})," ",x.newLeverage]})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("margin_rate")}),(0,u.jsxs)("div",{className:De().value,children:[x.oldMr," ",(0,u.jsx)(g.ol,{})," ",x.newMr]})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("maintenance_margin_rate")}),(0,u.jsx)("div",{className:De().value,children:x.mmr})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsxs)("div",{className:De().label,children:["EST ",(0,Z.Z)("liq_price")]}),(0,u.jsxs)("div",{className:De().value,children:["$",o," ",(0,u.jsx)(g.ol,{})," $",x.newLiqPrice]})]})]})}var Be=e=>{var n=e.future;return(0,a.Z)({},n)},Ee=(0,l.$j)(Be)(Le);function Me(e){var n=(0,l.I0)(),t=e.currentToken,a=e.loading,s=e.closeModal,c=t.userMargin,o=t.collateralTokenObj,m=t.indexTokenObj,_=t.isLong,x=t.pair,h=o.userTokenBalance,v=(0,i.useState)(!1),p=(0,r.Z)(v,2),g=p[0],f=p[1],j=(0,i.useState)(0),b=(0,r.Z)(j,2),w=b[0],y=b[1],N=e=>{y(e)},S=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var a;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,n({type:"future/increaseMargin",payload:{tokenId:o.id,params:{_collateralToken:o.id,_indexToken:m.id,_isLong:_,_amountIn:(0,d.xo)(w.toString(),o.tokenDecimal)}}});case 4:a=e.sent,a.hash?((0,ve.x)({msg:(0,Z.Z)("success"),txid:a.hash,token:t,onOk:()=>{s(),n({type:"future/getPairs"})}}),n({type:"future/getPositionList"})):(0,ee.y)("Failed"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),(0,ee.y)(e.t0);case 11:f(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)(P.g,{spinning:a||g,children:(0,u.jsxs)("div",{className:Ie().container,children:[(0,u.jsxs)("div",{className:Ie().card,children:[(0,u.jsxs)("div",{className:Ie().label,children:[(0,u.jsxs)("div",{children:[(0,Z.Z)("current_margin"),": $",(0,d.Ce)(c,x.userCollateralPrice)]}),(0,u.jsxs)("div",{children:[(0,Z.Z)("wallet_bal"),":\xa0",(0,u.jsx)("span",{className:"primary",onClick:()=>N(parseFloat(h)),children:h})]})]}),(0,u.jsxs)("div",{className:Ie().value,children:[(0,u.jsx)(le.Z,{className:"inputTxt",value:w,onChange:N,min:0}),(0,u.jsx)(k.Z,{data:o})]}),(0,u.jsx)(Ce.Z,{amount:w,onChange:N,max:h})]}),(0,u.jsx)(Ee,{currentToken:t,amountIn:w,isAdd:!0}),(0,u.jsx)(Q.Z,{height:50,align:"center",onClick:S,conditions:[{handle:w<=0,txt:(0,Z.Z)("input_amount")},{handle:w>parseFloat(h||"0"),txt:(0,Z.Z)("lack_balance")}],children:(0,Z.Z)("incrase_margin")})]})})}var Fe=e=>{var n=e.future;return(0,a.Z)({},n)},Oe=(0,l.$j)(Fe)(Me);function ze(e){var n=(0,l.I0)(),t=e.currentToken,a=e.loading,s=e.closeModal,c=t.userMargin,o=t.collateralTokenObj,m=t.indexTokenObj,_=t.isLong,x=t.pair,h=(0,i.useState)(!1),v=(0,r.Z)(h,2),p=v[0],g=v[1],f=(0,i.useState)(0),j=(0,r.Z)(f,2),b=j[0],w=j[1],y=(0,i.useState)("0"),N=(0,r.Z)(y,2),S=N[0],T=N[1],I=e=>{w(e)};(0,i.useEffect)((()=>{var e=(0,ge.sl)(t,x,x.collateralPrice,x.indexPrice),n=(0,d.gB)(e.toString(),x.userCollateralTokenDecimal);T(n)}),[]);var C=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var a;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,n({type:"future/decreaseMargin",payload:{tokenId:o.id,params:{_collateralToken:o.id,_indexToken:m.id,_isLong:_,_amountOut:(0,d.xo)(b.toString(),o.tokenDecimal)}}});case 4:a=e.sent,a.hash?((0,ve.x)({msg:(0,Z.Z)("success"),txid:a.hash,token:t,onOk:()=>{s(),n({type:"future/getPairs"})}}),n({type:"future/getPositionList"})):(0,ee.y)("Failed"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),(0,ee.y)(e.t0);case 11:g(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)(P.g,{spinning:a||p,children:(0,u.jsxs)("div",{className:Ie().container,children:[(0,u.jsxs)("div",{className:Ie().card,children:[(0,u.jsxs)("div",{className:Ie().label,children:[(0,u.jsxs)("div",{children:[(0,Z.Z)("max_removable"),":"," ",(0,u.jsx)("span",{className:"primary",onClick:()=>I(parseFloat(S)),children:S})]}),(0,u.jsxs)("div",{children:[(0,Z.Z)("current_margin"),": ",c]})]}),(0,u.jsxs)("div",{className:Ie().value,children:[(0,u.jsx)(le.Z,{className:"inputTxt",value:b,onChange:I,min:0}),(0,u.jsx)(k.Z,{data:o})]}),(0,u.jsx)(Ce.Z,{amount:b,onChange:I,max:S})]}),(0,u.jsx)(Ee,{currentToken:t,amountIn:b,isAdd:!1}),(0,u.jsx)(Q.Z,{height:50,align:"center",onClick:C,conditions:[{handle:b<=0,txt:(0,Z.Z)("input_amount")},{handle:b>=parseFloat(c||"0"),txt:(0,Z.Z)("lack_balance")}],children:(0,Z.Z)("withdraw_margin")})]})})}var $e=e=>{var n=e.future;return(0,a.Z)({},n)},qe=(0,l.$j)($e)(ze);function Re(e){var n=e.visible,t=e.setVisible,a=e.currentToken,s=(0,i.useState)(0),l=(0,r.Z)(s,2),c=l[0],o=l[1];return(0,u.jsxs)(p.Z,{width:420,footer:null,open:n,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>t(!1),closable:!1,children:[(0,u.jsx)(W.Z,{menuDatas:U.o7,menuIndex:c,setMenuIndex:o}),(0,u.jsx)("div",{style:{display:0===c?"block":"none"},children:(0,u.jsx)(Oe,{currentToken:a,closeModal:()=>t(!1)})}),(0,u.jsx)("div",{style:{display:1===c?"block":"none"},children:(0,u.jsx)(qe,{currentToken:a,closeModal:()=>t(!1)})})]})}var Ae=t(56804),Ue=t(21597),We=t.n(Ue),Xe=t(58162),Ge=t.n(Xe);function Ke(e){var n=e.currentToken,t=e.amountIn,a=n.collateralTokenObj,s=n.userSize,l=n.margin,c=n.userMargin,o=n.openNotional,m=n.pair,_=(0,i.useState)({}),x=(0,r.Z)(_,2),h=x[0],v=x[1];return(0,i.useEffect)((()=>{var e=(0,d.xo)(t||"0",m.userIndexTokenDecimal),a=(0,ge.Rh)(n,m,BigInt(e),m.collateralPrice,m.indexPrice),r=(0,B.BE)(a.pnl,m.userCollateralTokenDecimal,l),i=r.isPositive,u=r.pnlStr,_=r.roeStr,x=(0,B.Qy)(l,o),h=(0,d.gB)(a.receiveMargin.toString(),m.userCollateralTokenDecimal),p=(0,B.z)(a.mr),g=(0,B.T$)(a.indexLiqPrice),f=new ae.Z(s-t).div(s).multipliedBy(c).toFixed(6);t>=s&&(p="--",g="--"),v({isPositive:i,pnlStr:u,roeStr:_,leverage:x,receive:h,mr:p,liqPrice:g,leftMargin:f})}),[n,t]),(0,u.jsxs)("div",{className:De().info,children:[(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsxs)("div",{className:De().label,children:[(0,Z.Z)("pnl"),"/",(0,Z.Z)("roe")]}),(0,u.jsxs)("div",{className:h.isPositive?"primary":"red",children:[h.pnlStr,"/",h.roeStr]})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("leverage")}),(0,u.jsx)("div",{className:De().value,children:h.leverage})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("margin")}),(0,u.jsxs)("div",{className:De().value,children:[c," ",(0,u.jsx)(g.ol,{})," ",h.leftMargin]})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("margin_rate")}),(0,u.jsx)("div",{className:De().value,children:h.mr})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsxs)("div",{className:De().label,children:["EST ",(0,Z.Z)("liquidation_price")]}),(0,u.jsxs)("div",{className:De().value,children:["$",h.liqPrice]})]}),(0,u.jsxs)("div",{className:De().item,children:[(0,u.jsx)("div",{className:De().label,children:(0,Z.Z)("receive")}),(0,u.jsxs)("div",{className:h.isPositive?"primary":"red",children:[h.receive," ",(0,Z.Z)("in")," ",a.symbol]})]})]})}var He=e=>{var n=e.future;return(0,a.Z)({},n)},Qe=(0,l.$j)(He)(Ke);function Je(e){var n=(0,l.I0)(),t=e.currentToken,a=e.loading,s=e.closeModal,c=t.userSize,o=t.collateralTokenObj,m=t.indexTokenObj,_=t.isLong,x=t.userMargin,h=t.pair,v=(0,i.useState)(!1),p=(0,r.Z)(v,2),g=p[0],f=p[1],j=(0,i.useState)(0),b=(0,r.Z)(j,2),w=b[0],y=b[1],N=e=>{y(e)},S=e=>{var n=(0,ge.Rh)(t,h,BigInt(e),h.collateralPrice,h.indexPrice);return console.log("data:",n),n},T=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var t,a,r;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!0),console.log(w,c),t=(0,d.xo)(w.toString(),h.userIndexTokenDecimal),a=S(t),e.prev=4,e.next=7,n({type:"future/decreasePosition",payload:{tokenId:o.id,params:{_collateralToken:o.id,_indexToken:m.id,_isLong:_,_marginDelta:w===c?0:new ae.Z(w).div(c).multipliedBy(x).multipliedBy(Math.pow(10,h.userCollateralTokenDecimal)).toFixed(0),_notionalDelta:a.notionalDelta}}});case 7:r=e.sent,r.hash&&((0,ve.x)({msg:_?(0,u.jsxs)("div",{className:"".concat(Ge().result_icon," ").concat(Ge().green),children:[(0,u.jsx)(pe.Z,{type:"icon-up"}),(0,Z.Z)("long_closed")]}):(0,u.jsxs)("div",{className:"".concat(Ge().result_icon," ").concat(Ge().red),children:[(0,u.jsx)(pe.Z,{type:"icon-down1"}),(0,Z.Z)("short_closed")]}),txid:r.hash,token:m,onOk:()=>{s(),n({type:"future/getPairs"})}}),n({type:"future/getPositionList"})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),(0,ee.y)(e.t0);case 14:f(!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)(P.g,{spinning:a||g,children:(0,u.jsxs)("div",{className:Ge().container,children:[(0,u.jsxs)("div",{className:Ge().card,children:[(0,u.jsxs)("div",{className:Ge().label,children:[(0,u.jsxs)("div",{children:[(0,Z.Z)("close")," ",_?(0,Z.Z)("long"):(0,Z.Z)("short"),": $",(0,d.Ce)(w,h.userIndexPrice)]}),(0,u.jsxs)("div",{children:[(0,Z.Z)("position_size"),":\xa0",(0,u.jsx)("span",{className:"primary",onClick:()=>N(c),children:c})]})]}),(0,u.jsxs)("div",{className:Ge().value,children:[(0,u.jsx)(le.Z,{className:"inputTxt",value:w,onChange:N,min:0,max:c}),(0,u.jsx)(k.Z,{data:m})]}),(0,u.jsx)(Ce.Z,{amount:w,onChange:N,max:c})]}),(0,u.jsxs)("div",{className:Ge().card,children:[(0,u.jsxs)("div",{className:Ge().label,children:[(0,u.jsx)("div",{children:(0,Z.Z)("price")}),(0,u.jsxs)("div",{children:[(0,Z.Z)("mark"),":",h.userIndexPrice]})]}),(0,u.jsxs)("div",{className:Ge().value,children:[(0,u.jsx)("div",{children:h.userIndexPrice}),(0,u.jsx)("div",{children:"USD"})]})]}),(0,u.jsx)(Qe,{currentToken:t,amountIn:w}),(0,u.jsx)(Q.Z,{height:50,align:"center",onClick:T,conditions:[{handle:w<=0,txt:(0,Z.Z)("input_amount")},{handle:w>parseFloat(c||"0"),txt:(0,Z.Z)("lack_balance")}],children:(0,Z.Z)("close_position")})]})})}var Ve=e=>{var n=e.future;return(0,a.Z)({},n)},Ye=(0,l.$j)(Ve)(Je);function en(e){var n=e.visible,t=e.setVisible,a=e.currentToken,s=(0,i.useState)(1),l=(0,r.Z)(s,2),c=l[0],o=l[1];return(0,u.jsxs)(p.Z,{width:420,footer:null,open:n,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>t(!1),closable:!1,wrapClassName:We().modal,children:[(0,u.jsx)(W.Z,{menuDatas:U.UT,menuIndex:c,setMenuIndex:o}),(0,u.jsx)("div",{style:{display:1===c?"block":"none"},children:(0,u.jsx)(Ye,{currentToken:a,closeModal:()=>t(!1)})})]})}function nn(e){var n=e.positionList,t=e.account,a=e.tokenPairs,s=e.tokenDatas,c=(0,l.I0)(),o=(0,i.useState)(!1),m=(0,r.Z)(o,2),_=m[0],x=m[1],h=(0,i.useState)(!1),v=(0,r.Z)(h,2),p=v[0],g=v[1],f=(0,i.useState)({}),j=(0,r.Z)(f,2),k=j[0],b=j[1],w=(0,i.useState)(!1),y=(0,r.Z)(w,2),N=y[0],S=y[1],T=(0,i.useState)(0),I=(0,r.Z)(T,2),C=I[0],P=I[1];(0,i.useEffect)((()=>{var e=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return S(!0),e.next=4,c({type:"future/getPositionList"});case 4:S(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,a&&a.length>0]),(0,i.useEffect)((()=>{var e=setTimeout((0,G.Z)((0,X.Z)().mark((function e(){return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:P(C+1),t&&a&&a.length>0&&c({type:"future/getPositionList"});case 2:case"end":return e.stop()}}),e)}))),5e3);return()=>{clearTimeout(e)}}),[C]);var D=e=>{b(e),x(!0)},L=e=>{b(e),g(!0)},E=[{title:(0,u.jsxs)("div",{children:[(0,Z.Z)("positions"),(0,u.jsx)("br",{}),(0,Z.Z)("funding_rate")]}),dataIndex:"positions",key:"positions",align:"left",render:(e,n)=>{var t=n.indexTokenObj,a=n.isLong,r=n.pair,s=n.openNotional,i=n.margin,l=(a?r.longFundingRate:r.shortFundingRate).toString(),c=(0,d.gB)(l,7),o=(0,B.Qy)(i,s);return(0,u.jsxs)("div",{className:Se().type,children:[(0,u.jsx)("span",{className:a?Se().green:Se().red,children:a?"L":"S"})," ",t.symbol," ",(0,u.jsx)("span",{className:Se().text,children:o}),(0,u.jsx)("br",{}),(0,u.jsxs)("span",{className:Se().text,children:[c,"%/1h"]})]})}},{title:(0,u.jsxs)("div",{children:[(0,Z.Z)("size"),(0,u.jsx)("br",{})," ",(0,Z.Z)("pnl"),"/",(0,Z.Z)("roe")]}),dataIndex:"userSize",key:"userSize",align:"right",render:(e,n)=>{var t=n.indexTokenObj,a=n.pair,r=n.margin,s=(0,ge.YT)(n,a,a.collateralPrice,a.indexPrice),i=(0,B.BE)(s,a.userCollateralTokenDecimal,r),l=i.isPositive,c=i.pnlStr,o=i.roeStr;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,d.FH)(e,4)," ",t.symbol]}),(0,u.jsxs)("div",{className:l?Se().green:Se().red,children:[c," (",o,")"]})]})}},{title:(0,u.jsxs)(u.Fragment,{children:[(0,Z.Z)("margin"),(0,u.jsx)("br",{}),(0,Z.Z)("value")]}),dataIndex:"userMargin",key:"userMargin",align:"right",render:(e,n)=>{var t=n.collateralTokenObj,a=n.pair;return(0,u.jsxs)("div",{children:[e," ",t.symbol," ",(0,u.jsx)("br",{}),"$",(0,d.Ce)(e,a.userCollateralPrice)]})}},{title:(0,u.jsxs)(u.Fragment,{children:[(0,Z.Z)("entry_price"),(0,u.jsx)("br",{}),(0,Z.Z)("liq_price")]}),dataIndex:"userEntryIndexPrice",key:"userEntryIndexPrice",align:"right",render:(e,n)=>{var t=n.userLiqPrice;return(0,u.jsxs)("div",{children:["$",e,(0,u.jsx)("br",{}),"$",t]})}},{title:(0,u.jsxs)(u.Fragment,{children:[(0,Z.Z)("mr"),(0,u.jsx)("br",{}),(0,Z.Z)("mmr")]}),dataIndex:"mr",key:"mr",align:"right",render:(e,n)=>{var t=n.userMmr,a=n.pair,r=(0,ge.li)(n,a,a.collateralPrice,a.indexPrice),s=(0,B.z)(r);return(0,u.jsxs)("div",{children:[s,(0,u.jsx)("br",{}),t,"%"]})}},{title:(0,Z.Z)("manage"),dataIndex:"manage",key:"manage",align:"center",render:(e,n)=>(0,u.jsxs)("div",{className:Se().action,children:[(0,u.jsx)("span",{onClick:()=>D(n),children:(0,Z.Z)("edit_margin")}),(0,u.jsx)("span",{onClick:()=>L(n),className:Se().close,children:(0,Z.Z)("close")})]})}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ye.Z,{columns:E,dataSource:n.filter((e=>e.size>0)),className:Se().table,rowKey:"id",loading:{spinning:N&&n.length<1&&!!s,indicator:(0,u.jsx)(Ae.Z,{spin:!0,style:{fontSize:30}})}}),_&&(0,u.jsx)(Re,{visible:_,setVisible:x,currentToken:k}),p&&(0,u.jsx)(en,{visible:p,setVisible:g,currentToken:k})]})}var tn=e=>{var n=e.tokens,t=e.future,r=e.wallet,s=e.loading,i=s.effects;return(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},n),t),r),{},{loading:i["future/getPositionList"]||!1})},an=(0,l.$j)(tn)(nn),rn=t(50710),sn=t.n(rn),ln=t(89072),cn=10;function on(e){var n=e.account,t=e.type,a=e.positionList,s=e.walletChainId,c=(0,l.I0)(),o=(0,i.useState)(0),m=(0,r.Z)(o,2),_=m[0],x=m[1],h=(0,i.useState)(1),v=(0,r.Z)(h,2),p=v[0],g=v[1],f=(0,i.useState)([]),j=(0,r.Z)(f,2),k=j[0],b=j[1],w=(0,i.useState)(!1),y=(0,r.Z)(w,2),N=y[0],S=y[1],T=(0,i.useState)(0),I=(0,r.Z)(T,2),C=I[0],P=I[1],D=(0,ln.x)(s),L=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var a,r;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("personal"!==t||n){e.next=2;break}return e.abrupt("return",x(0));case 2:return a="personal"===t?{account:n}:{},e.next=5,c({type:"history/getOrderAggregationCount",payload:a});case 5:r=e.sent,x(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){var a,r,s,i=arguments;return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=i.length>0&&void 0!==i[0]?i[0]:1,"personal"!==t||n){e.next=3;break}return e.abrupt("return",b([]));case 3:return r={skip:(a-1)*cn,first:cn},"personal"===t&&(r.account=n),e.next=7,c({type:"history/getOrderAggregation",payload:r});case 7:s=e.sent,b(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((()=>{var e=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(){return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return S(!0),e.next=3,L();case 3:return e.next=5,B();case 5:S(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n,a.length]),(0,i.useEffect)((()=>{var e=setTimeout((0,G.Z)((0,X.Z)().mark((function e(){return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return P(C+1),e.next=3,L();case 3:B(p);case 4:case"end":return e.stop()}}),e)}))),3e4);return()=>{clearTimeout(e)}}),[C]);var E=function(){var e=(0,G.Z)((0,X.Z)().mark((function e(n){return(0,X.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(n),g(n),B(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=[{title:"",dataIndex:"timestamp",key:"timestamp",width:180,render:e=>(0,d.p6)(1e3*e,"YYYY/MM/DD, HH:mm A")},{title:"",dataIndex:"content",key:"content"},{title:"",dataIndex:"account",key:"account",width:162,render:e=>(0,u.jsxs)(u.Fragment,{children:[(0,Z.Z)("owner"),":\xa0",(0,u.jsx)("a",{className:"primary",href:"".concat(D.exporerAccountUrl,"/").concat(e,"?network=").concat(D.network),target:"_blank",rel:"noreferrer",children:(0,d.Zp)(e)})]})}];return(0,u.jsx)("div",{className:sn().container,children:(0,u.jsx)("div",{className:sn().table_wrap,children:(0,u.jsx)(ye.Z,{columns:M,dataSource:k,className:sn().table,rowKey:"timestamp",loading:{spinning:N&&k.length<1,indicator:(0,u.jsx)(Ae.Z,{spin:!0,style:{fontSize:30}})},pagination:{onChange:E,total:_,showTotal:e=>{var n=cn*p>e?e:cn*p;return"".concat(cn*(p-1)+1," - ").concat(n," of ").concat(e)}}})})})}var dn=e=>{var n=e.future,t=e.history,r=e.wallet;return(0,a.Z)((0,a.Z)((0,a.Z)({},n),t),r)},un=(0,l.$j)(dn)(on),mn=[(0,Z.Z)("positions"),(0,Z.Z)("trade_history"),(0,Z.Z)("market_trades")];function _n(e){var n=e.isShowChart,t=e.dataSourceChainId,a=e.currentWallet,l=void 0===a?{}:a,c=(0,i.useState)(0),o=(0,r.Z)(c,2),m=o[0],_=o[1],x=(0,d.Hy)(t,l.network),h="zk"===x;return(0,u.jsx)(s.Z,{children:(0,u.jsxs)("div",{className:A().container,children:[(0,u.jsx)(we,{network:x}),(0,u.jsxs)("div",{className:A().datas,children:[n&&(0,u.jsx)(q,{}),h&&(0,u.jsxs)("div",{className:A().table_datas,children:[(0,u.jsx)("div",{className:A().title_wrap,children:mn.map(((e,n)=>(0,u.jsx)("div",{className:n===m?A().current_title:A().title,onClick:()=>{_(n)},children:e},e)))}),0===m&&(0,u.jsx)(an,{}),1===m&&(0,u.jsx)(un,{type:"personal"}),2===m&&(0,u.jsx)(un,{type:"market"})]})]})]})})}var xn=e=>{var n=e.common,t=e.wallet;return(0,a.Z)((0,a.Z)({},n),t)},hn=(0,l.$j)(xn)(_n)}}]);