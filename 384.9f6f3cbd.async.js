(self["webpackChunk_1kx_sourceCode"]=self["webpackChunk_1kx_sourceCode"]||[]).push([[384],{16312:function(e){e.exports={card:"card___X2t_w",label:"label___3kSJ9",value:"value___vPr4C",amount:"amount___28QoP",info:"info___3S3kZ",item:"item___EzhrT",arr:"arr___sG6wt",green:"green___Q3Bw_",red:"red___284AR",result_icon:"result_icon___1eoKk",container:"container___1bNK4",repay:"repay___3T4jn",borrow:"borrow___3omfj",error:"error___WlYKh",collateral:"collateral___2J7Qh",coll_title:"coll_title___3u7dq",panel:"panel___3Byw1",token:"token___3q3_M",incard_wrap:"incard_wrap___1-629",close:"close___kqqup"}},32636:function(e){e.exports={card:"card___29Y3U",label:"label___1BrRj",value:"value___1DY4V",amount:"amount___2pJtZ",info:"info___dacWO",item:"item___3Wexh",arr:"arr___2t7Ui",green:"green___2xwfj",red:"red___2TAuz",result_icon:"result_icon___20eKA",deposit:"deposit___1zH4d",remove:"remove___2pxJz",tooltip:"tooltip___1RT7R",container:"container___hG5-7"}},78129:function(e,n,t){"use strict";t.d(n,{Z:function(){return z}});t(71194);var a=t(37079),r=t(16312),s=t.n(r),o=t(89544),i=t(44512),c=(t(22385),t(59381)),l=t(8870),u=t(39428),d=t(3182),p=t(2824),h=t(86914),m=t(21512),x=t(3150),v=t(67294),Z=t(55902),k=t(6011),f=t(75899),_=t(39423),j=t(66996),w=t(73218),b=t(19186),y=t(68052),g=t(48521);function I(e){var n=(0,Z.I0)(),t=e.currentWallet,a=e.walletChainId,r=e.currentToken,i=e.closeModal,I=e.tokenDatasSorted,N=t||{},S=N.calcBorrowRiskRate,C=N.borrow,D=N.calcBorrowLimit,T=(0,v.useState)([{id:(new Date).getTime(),userAmount:"",token:"",amount:"0"}]),F=(0,p.Z)(T,2),B=F[0],A=F[1],P=(0,v.useState)(""),O=(0,p.Z)(P,2),R=O[0],L=O[1],q=(0,v.useState)("0"),E=(0,p.Z)(q,2),W=E[0],X=E[1],J=(0,v.useState)(r),M=(0,p.Z)(J,2),z=M[0],H=M[1],$=(0,v.useState)(!1),K=(0,p.Z)($,2),Q=K[0],U=K[1],Y=(0,v.useState)(!1),G=(0,p.Z)(Y,2),V=G[0],ee=G[1],ne=(0,v.useState)(""),te=(0,p.Z)(ne,2),ae=te[0],re=te[1],se=(0,v.useState)(""),oe=(0,p.Z)(se,2),ie=oe[0],ce=oe[1],le=(0,v.useState)(!1),ue=(0,p.Z)(le,2),de=ue[0],pe=ue[1],he=0;function me(e,n){return xe.apply(this,arguments)}function xe(){return xe=(0,d.Z)((0,u.Z)().mark((function e(n,t){var a;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!de){e.next=2;break}return e.abrupt("return");case 2:a=[...B],a[t].userAmount=n,B.forEach((e=>{if(e.token){var r=(0,x.xD)(e.token,I);a[t].tokenData=r,a[t].amount=(0,x.xo)(n,r.tokenDecimal)}})),A(a),(0,x.Ds)(ve,500)(a);case 7:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function ve(){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,d.Z)((0,u.Z)().mark((function e(){var n,r,s,o,i=arguments;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:B,e.next=3,(0,x.bX)(t,a);case 3:if(r=e.sent,r){e.next=6;break}return e.abrupt("return");case 6:if(z.tokenId){e.next=8;break}return e.abrupt("return");case 8:return pe(!0),e.next=11,D(a,z,n);case 11:return s=e.sent,X(s),e.next=15,S({chainId:a,_indatas:n,tokenDatas:I,amountOut:R,outToken:z});case 15:o=e.sent,ce(o),pe(!1);case 18:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}var ke=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n({type:"tokens/updatePrice"});case 2:n({type:"tokens/fetchPoolInfo"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=e=>{re(e),ee(!0),ke()};function _e(){return je.apply(this,arguments)}function je(){return je=(0,d.Z)((0,u.Z)().mark((function e(){var n,r;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.bX)(t,a);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return U(!0),e.prev=6,e.next=9,C({chainId:a,inDatas:B,outToken:z,amountOut:R});case 9:r=e.sent,r.error?(0,b.y)(r.error):r.hash&&fe(r.hash),U(!1),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](6),console.log(e.t0),(0,b.y)(e.t0),U(!1);case 19:case"end":return e.stop()}}),e,null,[[6,14]])}))),je.apply(this,arguments)}(0,v.useEffect)((()=>{ve()}),[1,z,R]);var we=()=>{A((e=>[...e,{id:(new Date).getTime(),userAmount:"",token:"",amount:"0"}]))},be=e=>{var n=[...B];n.splice(e,1),A(n),ve(n)},ye=(e,n)=>{var t=[...B],a=t.findIndex((e=>e.token.toLowerCase()===n.tokenId.toLowerCase()));if(a>-1)return(0,b.y)("".concat(n.symbol," ").concat((0,h.Z)("already_selected")));var r=(0,x.xD)(n.tokenId,I);r&&(t[e]=(0,l.Z)((0,l.Z)({},t[e]),{},{token:n.tokenId,tokenData:r,amount:(0,x.xo)(t[e].userAmount||"0",r.tokenDecimal)}),A(t),ve(t))},ge=()=>{ee(!1),i(),ke()};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.g,{spinning:(I||[]).length<1||Q,children:(0,g.jsxs)("div",{className:s().container,children:[B.map(((e,n)=>{var t;return(0,g.jsxs)("div",{className:s().incard_wrap,children:[(0,g.jsx)(f.Z,{title:"".concat((0,h.Z)("pay"),"(").concat((0,h.Z)("collateral"),")"),amount:e.userAmount,priceType:"borrow",type:"borrow",onAmountChange:e=>me((e||0).toString(),n),token:B[n].tokenData||{},onChangeToken:e=>ye(n,e),slider:(0,g.jsx)(j.Z,{amount:e.userAmount,onChange:e=>me((e||0).toString(),n),max:(null===(t=B[n].tokenData)||void 0===t?void 0:t.userTokenBalance)||0})}),B.length>1&&(0,g.jsx)("div",{className:s().close,onClick:()=>be(n),children:(0,g.jsx)(w.Z,{})})]},e.id)})),(0,g.jsx)("div",{className:s().arr,onClick:we,children:(0,g.jsx)(_.Z,{type:"icon-plus"})}),(0,g.jsx)(f.Z,{amount:R,onAmountChange:e=>L((e||0).toString()),token:z,onChangeToken:H,type:"borrow",left:(0,g.jsxs)("div",{onClick:()=>L(W),children:[(0,h.Z)("borrow_limit"),":"," ",(0,g.jsx)("span",{className:"primary",children:de?o.m5:(0,x.FH)(W,4)})]}),right:(0,g.jsxs)("div",{children:[(0,h.Z)("borrowed"),": ",he]})}),(0,g.jsxs)("div",{className:s().info,children:[(0,g.jsxs)("div",{className:s().item,children:[(0,g.jsx)("div",{className:s().label,children:(0,h.Z)("apr")}),(0,g.jsxs)("div",{className:s().fee,children:[z.apr,"%"]})]}),(0,g.jsxs)("div",{className:s().item,children:[(0,g.jsx)("div",{className:s().label,style:{borderBottom:"1px dashed var(--primary-color)"},children:(0,g.jsx)(c.Z,{title:(0,h.Z)("risk_factor_tips"),children:(0,h.Z)("risk_factor")})}),(0,g.jsx)("div",{className:s().fee,children:de?o.m5:ie})]})]}),(0,g.jsx)(m.Z,{height:50,align:"center",onClick:_e,conditions:[{handle:parseFloat(z.userUpdatedAt)<=0,txt:(0,h.Z)("cant_borrow")},{handle:parseFloat(R||"0")<=0&&parseFloat(B[0].userAmount||"0")<=0,txt:(0,h.Z)("input_amount")},{handle:(()=>{var e=!1;return B.forEach((n=>{n.token&&parseFloat(n.userAmount)>parseFloat(n.tokenData?n.tokenData.userTokenBalance:"0")&&(e=!0)})),e})(),txt:(0,h.Z)("lack_balance")},{handle:parseFloat(R||"0")>parseFloat(W||"0"),txt:(0,h.Z)("beyond")}],children:parseFloat(R||"0")<=0&&parseFloat(B[0].userAmount)>0?(0,h.Z)("add_collateral"):(0,h.Z)("borrow")})]})}),(0,g.jsx)(y.Z,{title:(0,h.Z)("borrow_done"),amountTitle:(0,h.Z)("deposited_amount"),txid:ae,visible:V,close:ge,chainId:a,tokenIns:(()=>{var e=[];return B.forEach((n=>{e.push((0,l.Z)({amount:n.userAmount,tokenId:n.token},n.tokenData))})),e})(),tokenOuts:[(0,l.Z)((0,l.Z)({},z),{},{amount:R})]})]})}var N=e=>{var n=e.common,t=e.tokens,a=e.wallet;return(0,l.Z)((0,l.Z)((0,l.Z)({},n),t),a)},S=(0,Z.$j)(N)(I),C=(t(77883),t(49747)),D=t(43856),T=t(40553),F=t(30359),B=t.n(F),A=(0,v.lazy)((()=>t.e(373).then(t.bind(t,56373)).then((e=>{var n=e.default;return{default:(0,v.forwardRef)(((e,t)=>(0,g.jsx)(n,(0,l.Z)({ref:t},e))))}})))),P=t(7230),O=t(55130);function R(e){var n=e.onAmountChange,t=e.amount,a=e.token,r=e.onChangeToken,s=e.left,o=e.right,i=e.title,c=e.rightBottom,l=e.type,u=void 0===l?"":l,d=e.className,p=e.slider,h=(0,v.useRef)(null),m=e=>{null===n||void 0===n||n(e)};return(0,g.jsxs)("div",{className:"".concat(B().card," ").concat(d),onClick:e=>{(0,x.r3)(e.currentTarget,e.target)&&h.current.focus()},children:[(0,g.jsxs)("div",{className:B().label,children:[s||(0,g.jsxs)("div",{children:[i,":",(0,g.jsx)(v.Suspense,{fallback:"loading",children:(0,g.jsx)(O.Z,{data:{amount:t,token:a}})})]})," ",o||(0,g.jsx)(P.F,{token:a,setFullAmount:e=>n(e),type:u})]}),(0,g.jsxs)("div",{className:B().value,children:[(0,g.jsx)(v.Suspense,{fallback:"loading",children:(0,g.jsx)(A,{className:"inputTxt",amount:t,onChange:m,ref:h})}),c||(0,g.jsx)(T.Z,{currentToken:a,changeToken:r,type:u})]}),p]})}var L=R,q=t(33925),E=t(905),W=t(3987);function X(e){var n=(0,Z.I0)(),t=e.currentToken,a=e.tokenDatasSorted,r=e.walletChainId,o=e.currentWallet,i=(e.account,e.closeModal),f=o||{},_=f.repay,w=f.calcRepayRiskRate,I=f.getAccountDebt,N=(0,v.useState)(t),S=(0,p.Z)(N,2),T=S[0],F=S[1],B=(0,x.FD)("0"),A=(0,p.Z)(B,2),P=A[0],O=A[1],R=(0,v.useState)("0"),X=(0,p.Z)(R,2),J=X[0],M=X[1],z=(0,v.useState)(!1),H=(0,p.Z)(z,2),$=H[0],K=H[1],Q=(0,v.useState)([]),U=(0,p.Z)(Q,2),Y=U[0],G=U[1],V=(0,v.useState)(!1),ee=(0,p.Z)(V,2),ne=ee[0],te=ee[1],ae=(0,v.useState)(!1),re=(0,p.Z)(ae,2),se=re[0],oe=re[1],ie=(0,v.useState)(""),ce=(0,p.Z)(ie,2),le=ce[0],ue=ce[1],de=(0,v.useState)("1"),pe=(0,p.Z)(de,2),he=pe[0],me=pe[1],xe=T.tokenId,ve=T.symbol,Ze=(0,v.useState)(!1),ke=(0,p.Z)(Ze,2),fe=ke[0],_e=ke[1],je=(0,v.useState)(T.userDebt),we=(0,p.Z)(je,2),be=we[0],ye=we[1];function ge(e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,d.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:O(n),n&&M((0,x.xo)(n,T.tokenDecimal));case 2:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}(0,v.useEffect)((()=>{var e=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I(r,xe,T.positions.collaterals);case 2:n=e.sent,ye((0,x.gB)(n,T.tokenDecimal,0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();I&&e()}),[parseFloat(T.userDebt)>0]);var Ne=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n({type:"tokens/getData"});case 2:t=e.sent,n({type:"tokens/fetchPoolInfo",payload:{datas:t}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=e=>{ue(e),oe(!0),Ne()};function Ce(){return De.apply(this,arguments)}function De(){return De=(0,d.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.bX)(o,r);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return te(!0),e.next=8,_({chainId:r,tokenId:xe,tokenIn:T,amountInRaw:J,tokenOuts:Y});case 8:t=e.sent,console.log(t),t.error?(0,b.y)(t.error):t.hash&&Se(t.hash),te(!1);case 12:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}(0,v.useEffect)((()=>{O("0"),M("0");var e=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var n,t,r;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:_e(!0),n=T.positions.collaterals,t=void 0===n?[]:n,r=[],t=t.filter((e=>e.amount>0)),t.forEach((e=>{var n=(0,x._u)(e.token,a);n&&e.amount&&r.push({token:n,max:(0,x.gB)(e.amount.toString(),n.tokenDecimal),amount:"",visible:1===t.length})})),G(r),_e(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();T.positions&&e()}),[T]),(0,v.useEffect)((()=>{var e=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w({chainId:r,tokenIn:T,amountIn:P,tokenOuts:Y});case 2:n=e.sent,me(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Y.length<1||!w||e()}),[P,Y]);var Te=()=>{oe(!1),i(),Ne()},Fe=parseFloat(he)>=1,Be=new E.Z(0),Ae=function(){var e=(0,d.Z)((0,u.Z)().mark((function e(){var n,t,a;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.bX)(o,r);case 2:if(n=e.sent,n){e.next=6;break}return O(parseFloat(T.userDebt)>parseFloat(T.userTokenBalance)?T.userTokenBalance:T.userDebt),e.abrupt("return");case 6:if(!(parseFloat(T.userDebt)>parseFloat(T.userTokenBalance))){e.next=10;break}M(xe.tokenBalance),e.next=17;break;case 10:return e.next=12,I(r,xe,T.positions.collaterals);case 12:t=e.sent,a=(0,x.gB)(t,T.tokenDecimal,0),O(a),M(t),ye(a);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.g,{spinning:a&&a.length<1||ne,children:(0,g.jsxs)("div",{className:s().container,id:"J_repay",children:[(0,g.jsx)(L,{left:(0,g.jsxs)("div",{onClick:Ae,children:[(0,h.Z)("max_payable"),":"," ",(0,g.jsxs)("span",{className:"primary",children:[(0,g.jsx)(W.Z,{value:be})," ",ve]})]}),right:(0,g.jsxs)("div",{onClick:Ae,children:[(0,h.Z)("balance"),":"," ",(0,g.jsx)("span",{className:"primary",children:(0,x.FH)(T.userTokenBalance,4)})]}),amount:P,onAmountChange:e=>ge(e),token:T,onChangeToken:e=>F(e),slider:(0,g.jsx)(j.Z,{amount:P.read(),onChange:e=>ge(e),max:T.userDebt})}),(0,g.jsxs)(k.g,{spinning:fe,children:[Y.length>1&&(0,g.jsxs)("div",{className:s().collateral,children:[(0,g.jsxs)("div",{className:s().coll_title,children:[(0,g.jsxs)("div",{className:s().label,children:[(0,h.Z)("collateral"),":"]}),(0,g.jsx)("div",{className:s().arr,onClick:()=>K(!$),style:{display:Y.length>0?"block":"none"},children:(0,g.jsx)(D.m6,{})})]}),(0,g.jsx)("div",{className:s().panel,style:{display:$?"flex":"none"},children:Y.map(((e,n)=>(0,g.jsx)("div",{className:s().token,onClick:()=>{var e=[...Y];e[n].visible=!e[n].visible,G(e)},children:(0,g.jsx)(q.Z,{data:e.token})},e.token.tokenId)))})]}),Y.map(((e,n)=>{var t=e.token,a=e.amount,r=e.max,o=e.visible;Be=Be.plus(a||0);var i=(0,x.B2)([{amount:a||0,token:t}],"borrow");return(0,g.jsxs)("div",{className:s().card,style:{display:o?"block":"none"},children:[(0,g.jsxs)("div",{className:s().label,children:[(0,g.jsxs)("div",{children:[(0,h.Z)("withdraw"),": $",(0,x.FH)(i,2)]}),(0,g.jsxs)("div",{onClick:()=>{var e=[...Y];e[n].amount=r,G(e)},children:[(0,h.Z)("max_withdraw"),": ",(0,g.jsx)("span",{className:"primary",children:r})]})]}),(0,g.jsxs)("div",{className:s().value,children:[(0,g.jsx)("div",{className:s().amount,children:(0,g.jsx)(C.Z,{className:"inputTxt",value:a,min:0,max:r,onChange:e=>{var t=[...Y];t[n].amount=e,G(t)}})}),(0,g.jsx)(q.Z,{data:t})]}),(0,g.jsx)(j.Z,{amount:a,onChange:e=>{var t=[...Y];t[n].amount=e,G(t)},max:r})]},t.tokenId)}))]}),(0,g.jsxs)("div",{className:s().info,children:[(0,g.jsxs)("div",{className:s().item,children:[(0,g.jsx)("div",{className:s().label,children:(0,h.Z)("apr")}),(0,g.jsxs)("div",{className:s().fee,children:[T.apr,"%"]})]}),(0,g.jsxs)("div",{className:s().item,children:[(0,g.jsx)("div",{className:s().label,children:(0,h.Z)("debt")}),(0,g.jsxs)("div",{className:s().fee,children:[T.userDebt," ",ve]})]}),(0,g.jsxs)("div",{className:s().item,children:[(0,g.jsx)("div",{className:s().label,style:{borderBottom:"1px dashed var(--primary-color)"},children:(0,g.jsx)(c.Z,{title:(0,h.Z)("risk_factor_tips"),children:(0,h.Z)("risk_factor")})}),(0,g.jsx)("div",{className:Fe?s().fee:"".concat(s().fee," ").concat(s().error),children:"Infinity"===he?"--":he})]})]}),(0,g.jsxs)(m.Z,{height:50,align:"center",onClick:Ce,conditions:[{handle:parseFloat(T.userDebt)<=0&&parseFloat(T.userTotalCol)<=0,txt:(0,h.Z)("no_debt")},{handle:Be.plus(P.read()).lte(0),txt:(0,h.Z)("input_amount")},{handle:!ve,txt:(0,h.Z)("select_asset")},{handle:!Fe,txt:(0,h.Z)("rf_above")}],className:Fe?null:"wrong",children:[Be.gt(0)&&parseFloat(P.read()||"0")>0&&"".concat((0,h.Z)("repay")," & ").concat((0,h.Z)("remove_coll")),Be.lte(0)&&parseFloat(P.read()||"0")>0&&(0,h.Z)("repay"),Be.gt(0)&&parseFloat(P.read()||"0")<=0&&(0,h.Z)("remove_coll")]})]})}),se&&(0,g.jsx)(y.Z,{title:(0,h.Z)("repayment_success"),amountTitle:(0,h.Z)("repaid_debt"),receiveTitle:(0,h.Z)("received_coll"),txid:le,chainId:r,visible:se,close:Te,tokenIn:(0,l.Z)((0,l.Z)({},T),{},{amount:P.read()}),tokenOuts:(()=>{var e=[];return Y.map((n=>{n.amount&&e.push((0,l.Z)({amount:n.amount.toString()},n.token))})),e})()})]})}var J=e=>{var n=e.common,t=e.tokens,a=e.wallet;return(0,l.Z)((0,l.Z)((0,l.Z)({},n),t),a)},M=(0,Z.$j)(J)(X);function z(e){var n=e.showPanelIndex,t=e.setShowPanelIndex,r=e.currentToken;return(0,g.jsxs)(a.Z,{width:420,footer:null,open:n>-1,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>t(-1),closable:!1,wrapClassName:s().modal,children:[(0,g.jsx)(i.Z,{menuDatas:o.Tv,menuIndex:n,setMenuIndex:t}),(0,g.jsx)("div",{style:{display:0===n?"block":"none"},children:(0,g.jsx)(S,{currentToken:r,closeModal:()=>t(-1)})}),(0,g.jsx)("div",{style:{display:1===n?"block":"none"},children:(0,g.jsx)(M,{currentToken:r,closeModal:()=>t(-1)})})]})}},73167:function(e,n,t){"use strict";t.d(n,{A:function(){return i},b:function(){return c}});var a=t(16312),r=t.n(a),s=t(86914),o=t(48521),i=e=>{var n=e.setShowPanelIndex,t=e.txt;return(0,o.jsx)("span",{className:r().borrow,onClick:e=>{e.stopPropagation(),n(0)},children:t||(0,s.Z)("borrow")})},c=e=>{var n=e.setShowPanelIndex;return(0,o.jsx)("span",{className:r().repay,onClick:e=>{e.stopPropagation(),n(1)},children:(0,s.Z)("repay")})}},94530:function(e,n,t){"use strict";t.d(n,{Z:function(){return D}});t(71194);var a=t(37079),r=t(32636),s=t.n(r),o=t(44512),i=t(89544),c=t(8870),l=t(39428),u=t(3182),d=t(2824),p=t(86914),h=t(43856),m=t(21512),x=t(3150),v=t(67294),Z=t(55902),k=t(6011),f=t(75899),_=t(19186),j=t(68052),w=t(48521);function b(e){var n=(0,Z.I0)(),t=e.walletChainId,a=e.tokenDatas,r=e.currentToken,o=e.close,b=e.currentWallet,y=b||{},g=y.calcAddLiqOut,I=y.addLiq,N=(0,v.useState)(r.tokenId||(a[0]||{}).tokenId),S=(0,d.Z)(N,2),C=S[0],D=S[1],T=(0,v.useState)(""),F=(0,d.Z)(T,2),B=F[0],A=F[1],P=(0,v.useState)(""),O=(0,d.Z)(P,2),R=O[0],L=O[1],q=(0,v.useState)("0"),E=(0,d.Z)(q,2),W=E[0],X=E[1],J=(0,v.useState)(!1),M=(0,d.Z)(J,2),z=M[0],H=M[1],$=(0,v.useState)(!1),K=(0,d.Z)($,2),Q=K[0],U=K[1],Y=(0,v.useState)(""),G=(0,d.Z)(Y,2),V=G[0],ee=G[1],ne=(0,v.useState)(!1),te=(0,d.Z)(ne,2),ae=te[0],re=te[1],se=C?(0,x.xD)(C,a):a[0];function oe(e){return ie.apply(this,arguments)}function ie(){return ie=(0,u.Z)((0,l.Z)().mark((function e(n){var a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return A(n),e.next=3,(0,x.bX)(b,t);case 3:if(a=e.sent,a&&C){e.next=6;break}return e.abrupt("return");case 6:(0,x.Ds)(ce,500)(n);case 7:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ce(e){return le.apply(this,arguments)}function le(){return le=(0,u.Z)((0,l.Z)().mark((function e(n){var a,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return L(""),X("0"),e.abrupt("return");case 4:return re(!0),a=(0,x.xo)(n||"0",se.tokenDecimal),e.next=8,g(t,C,a,se);case 8:r=e.sent,r.error?((0,_.y)(r.error),L(""),X("0")):r.amountOut&&(L(r.amountOut),X((0,x.FH)(r.increasedPoolShare,4))),re(!1);case 11:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}var ue=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ee(t),U(!0),e.next=4,n({type:"tokens/updatePrice"});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function de(){return pe.apply(this,arguments)}function pe(){return pe=(0,u.Z)((0,l.Z)().mark((function e(){var n,a,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.bX)(b,t);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return H(!0),a=(0,x.xo)(B||"0",se.tokenDecimal),e.next=9,I({tokenId:C,_amountRaw:a,chainId:t,amountRaw:a.toString()});case 9:r=e.sent,r.error?(0,_.y)(r.error):r.hash&&ue(r.hash),H(!1);case 12:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}(0,v.useEffect)((()=>{ce(B)}),[C]);var he=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U(!1),o(),e.next=4,n({type:"tokens/updatePrice"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k.g,{spinning:a.length<1||z,children:(0,w.jsxs)("div",{className:s().container,children:[(0,w.jsx)(f.Z,{title:(0,p.Z)("pay"),amount:B,onAmountChange:e=>oe((e||"0").toString()),token:se,onChangeToken:e=>D(e.tokenId),type:"addLiq"}),(0,w.jsx)("div",{className:s().arr,children:(0,w.jsx)(h.We,{})}),(0,w.jsxs)("div",{className:s().card,children:[(0,w.jsxs)("div",{className:s().label,children:[(0,w.jsx)("div",{children:"".concat(se.symbol," ").concat((0,p.Z)("lptoken_receive"))}),(0,w.jsx)("div",{children:(0,p.Z)("increased_pool")})]}),(0,w.jsxs)("div",{className:s().value,children:[(0,w.jsx)("div",{className:s().amount,title:ae?"":R,children:ae?i.m5:R}),(0,w.jsx)("div",{style:{marginLeft:10},children:ae?i.m5:"".concat(W,"%")})]})]}),(0,w.jsx)(m.Z,{height:50,align:"center",onClick:de,conditions:[{handle:!C,txt:(0,p.Z)("select_asset")},{handle:parseFloat(B||"0")<=0,txt:(0,p.Z)("input_amount")}],children:(0,p.Z)("add_liquidity")})]})}),Q&&(0,w.jsx)(j.Z,{title:(0,p.Z)("deposit_done"),amountTitle:(0,p.Z)("deposited_amount"),txid:V,chainId:t,visible:Q,close:he,tokenIn:(0,c.Z)((0,c.Z)({},se),{},{amount:B}),tokenOuts:[{icon:null===se||void 0===se?void 0:se.iconLp,symbol:null===se||void 0===se?void 0:se.lpSymbol,tokenId:null===se||void 0===se?void 0:se.liquidity,amount:R}]})]})}var y=e=>{var n=e.common,t=e.tokens,a=e.wallet;return(0,c.Z)((0,c.Z)((0,c.Z)({},n),t),a)},g=(0,Z.$j)(y)(b),I=t(33925);function N(e){var n=(0,Z.I0)(),t=e.walletChainId,a=e.currentToken,r=e.tokenDatas,o=e.close,b=e.currentWallet,y=e.osdTokenData,g=(0,v.useState)(a.tokenId||(r[0]||{}).tokenId),N=(0,d.Z)(g,2),S=N[0],C=N[1],D=b||{},T=D.calcRemoveLiqIn,F=D.removeLiq,B=(0,v.useState)(""),A=(0,d.Z)(B,2),P=A[0],O=A[1],R=(0,v.useState)("0"),L=(0,d.Z)(R,2),q=L[0],E=L[1],W=(0,v.useState)("0"),X=(0,d.Z)(W,2),J=X[0],M=X[1],z=(0,v.useState)(!1),H=(0,d.Z)(z,2),$=H[0],K=H[1],Q=(0,v.useState)(!1),U=(0,d.Z)(Q,2),Y=U[0],G=U[1],V=(0,v.useState)(""),ee=(0,d.Z)(V,2),ne=ee[0],te=ee[1],ae=(0,v.useState)(!1),re=(0,d.Z)(ae,2),se=re[0],oe=re[1],ie=(0,x.xD)(S,r);function ce(e){return le.apply(this,arguments)}function le(){return le=(0,u.Z)((0,l.Z)().mark((function e(n){var a;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return O(n),e.next=3,(0,x.bX)(b,t);case 3:if(a=e.sent,a&&S){e.next=6;break}return e.abrupt("return");case 6:(0,x.Ds)(ue,500)(n);case 7:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return de=(0,u.Z)((0,l.Z)().mark((function e(n){var a,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return E(""),M(""),e.abrupt("return");case 4:return oe(!0),a=(0,x.xo)(n||"0",ie.lpDecimal),e.next=8,T(t,S,a);case 8:r=e.sent,r.error?((0,_.y)(r.error),E(""),M("")):r.amountOutToken&&(E((0,x.gB)(r.amountOutToken,ie.tokenDecimal,8)),M((0,x.gB)(r.amountOutOsd,y.tokenDecimal,8))),oe(!1);case 11:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}var pe=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return te(t),G(!0),e.next=4,n({type:"tokens/updatePrice"});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function he(){return me.apply(this,arguments)}function me(){return me=(0,u.Z)((0,l.Z)().mark((function e(){var n,a,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.bX)(b,t);case 2:if(n=e.sent,n&&S){e.next=5;break}return e.abrupt("return");case 5:return a=(0,x.xo)(P||"0",ie.lpDecimal),K(!0),e.next=9,F({tokenId:S,_amountRaw:a,chainId:t,amountRaw:a.toString(),tokenObj:ie});case 9:r=e.sent,console.log(r),r.error?(0,_.y)(r.error):r.hash&&pe(r.hash),K(!1);case 13:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}(0,v.useEffect)((()=>{ue(P)}),[S]);var xe=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return G(!1),o(),e.next=4,n({type:"tokens/updatePrice"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k.g,{spinning:r.length<1||$,children:(0,w.jsxs)("div",{className:s().container,children:[(0,w.jsx)(f.Z,{left:(0,w.jsxs)("div",{children:[(0,p.Z)("burn_pool_share"),":"]}),amount:P,onAmountChange:e=>ce(e),type:"lp",token:ie,onChangeToken:e=>C(e.tokenId)}),(0,w.jsx)("div",{className:s().arr,children:(0,w.jsx)(h.We,{})}),(0,w.jsxs)("div",{className:s().card,children:[(0,w.jsx)("div",{className:s().label,children:(0,w.jsxs)("div",{children:[(0,p.Z)("receive"),":"]})}),(0,w.jsxs)("div",{className:s().value,children:[(0,w.jsx)("div",{className:s().amount,children:se?i.m5:q}),(0,w.jsx)(I.Z,{data:ie})]}),(0,w.jsxs)("div",{className:s().value,children:[(0,w.jsx)("div",{className:s().amount,children:se?i.m5:J}),(0,w.jsx)(I.Z,{data:y})]})]}),(0,w.jsx)(m.Z,{height:50,align:"center",onClick:he,conditions:[{handle:!S,txt:(0,p.Z)("select_asset")},{handle:!(ie.userLpBalance&&parseFloat(ie.userLpBalance)>0),txt:(0,p.Z)("no_lpbalance")},{handle:parseFloat(P||"0")<=0,txt:(0,p.Z)("input_amount")},{handle:parseFloat(P||"0")>parseFloat(ie.userLpBalance||"0"),txt:(0,p.Z)("lack_balance")}],children:(0,p.Z)("remove_liquidity")})]})}),Y&&(0,w.jsx)(j.Z,{title:(0,p.Z)("liq_remove_done"),amountTitle:(0,p.Z)("burned"),txid:ne,chainId:t,visible:Y,close:xe,tokenIn:{icon:null===ie||void 0===ie?void 0:ie.iconLp,symbol:(null===ie||void 0===ie?void 0:ie.lpSymbol)||(null===ie||void 0===ie?void 0:ie.symbol)+" LP"||"LP",tokenId:null===ie||void 0===ie?void 0:ie.liquidity,amount:P},tokenOuts:[(0,c.Z)((0,c.Z)({},ie),{},{amount:q}),(0,c.Z)((0,c.Z)({},y),{},{amount:J})]})]})}var S=e=>{var n=e.common,t=e.tokens,a=e.wallet;return(0,c.Z)((0,c.Z)((0,c.Z)({},n),t),a)},C=(0,Z.$j)(S)(N);function D(e){var n=e.showPanelIndex,t=e.setShowPanelIndex,r=e.currentToken;return(0,w.jsxs)(a.Z,{width:420,footer:null,open:n>-1,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>t(-1),closable:!1,wrapClassName:s().modal,children:[(0,w.jsx)(o.Z,{menuDatas:i.wg,menuIndex:n,setMenuIndex:t}),(0,w.jsx)("div",{style:{display:0===n?"block":"none"},children:(0,w.jsx)(g,{currentToken:r,close:()=>t(-1)})}),(0,w.jsx)("div",{style:{display:1===n?"block":"none"},children:(0,w.jsx)(C,{currentToken:r,close:()=>t(-1)})})]})}}}]);