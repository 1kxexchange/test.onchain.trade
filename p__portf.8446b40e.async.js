(self["webpackChunk_1kx_sourceCode"]=self["webpackChunk_1kx_sourceCode"]||[]).push([[130],{61831:function(e){e.exports={container:"container___12ARh",info:"info___1y4cK",chart:"chart___1QoQ5"}},80719:function(e){e.exports={search_wrap:"search_wrap___3CnXX",btn:"btn___2MLeG",icon:"icon___3Lteq",table:"table___1srAK",alignRight:"alignRight___1Gnt_",alignLeft:"alignLeft___1FBK2",td1:"td1___3_fLX",td2:"td2___1faR-",td3:"td3___1J30I",green:"green___KLlDV",red:"red___154Yf",desc:"desc___3TnBO",icon_wrap:"icon_wrap___3ysuA",icon_osd:"icon_osd___3NHxg",symbol:"symbol___3JfPo",no:"no___3mLit",full_name:"full_name___1efIu",action:"action___1ro7P",lprate:"lprate___2uTrP",token:"token___3RTGO",info:"info___1TeBS",title:"title___pfhbb",container:"container___3GRav",layer_top:"layer_top___1cgoM",menu:"menu___Zkrm7",menu_item:"menu_item___1hkCQ",menu_current_item:"menu_current_item___PGR3E",line:"line___3K1ER",borrowed_token:"borrowed_token___QqYIV",borrowed_icon:"borrowed_icon___YM7pb",borrowed_amount:"borrowed_amount___3qfmv"}},35690:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return V}});var s=a(61831),r=a.n(s),t=a(3786),i=a(8870),l=a(2824),o=a(80719),d=a.n(o),c=a(86914),u=a(67294),_=a(55902),x=a(96427),m=(a(55250),a(52060)),h=a(39428),p=a(3182),v=a(3150),j=a(73167),g=a(78129),Z=a(905),b=a(5977),k=a(19159),f=a(3987),w=a(56804),y=a(48521),N=(0,v.l$)();function I(e){var n=(0,b.TH)(),a=n.query,s="iPhone"===N||"Android"===N,r=e.walletChainId,t=e.tokenDatas,i=e.dataSourceChainId,o=e.isLogin,_=e.list,x=e.loading,I=(0,u.useState)({}),F=(0,l.Z)(I,2),B=F[0],S=F[1],D=(0,u.useState)([]),C=(0,l.Z)(D,2),A=C[0],P=C[1],L=(0,u.useState)("undefined"===typeof a.showBorrow?-1:parseInt(a.showBorrow)),T=(0,l.Z)(L,2),q=T[0],E=T[1],R=o&&i===r,$=function(){var e=(0,p.Z)((0,h.Z)().mark((function e(n,a){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:S(a),E(n);case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();(0,u.useEffect)((()=>{_&&_.length>0&&P(_.filter((e=>parseFloat(e.userDebt)>0||e.userTotalCol>0)))}),[_]);var K=[{title:"".concat((0,c.Z)("collateral"),"/").concat((0,c.Z)("value")),dataIndex:"collateral_type",key:"collateral_type",align:"left",render:(e,n)=>{var a=n.positions.collaterals,s=[],r=[];a.map((e=>{var n=e.amount,a=e.token,i=(0,v.xD)(a,t);s.push({token:i,amount:(0,v.gB)(n.toString(),i.tokenDecimal)}),r.push(i.icon?(0,y.jsx)("img",{src:i.icon,className:d().icon},a):(0,y.jsx)(k.Z,{tokenId:a},a))}));var i=(0,v.B2)(s);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:d().icon_wrap,children:r}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})}},{title:(0,c.Z)("borrowed"),dataIndex:"borrowed",key:"borrowed",align:"right",render:(e,n)=>{var a=n.userDebt,s=n.symbol,r=n.icon,t=n.tokenId,i=(0,v.B2)([{amount:a,token:n}]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:d().borrowed_token,children:[(0,y.jsx)("div",{className:d().borrowed_icon,children:r?(0,y.jsx)("img",{src:r,className:d().icon,style:{width:15,height:15}}):(0,y.jsx)(k.Z,{tokenId:t,size:15})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:d().borrowed_amount,children:(0,y.jsx)(f.Z,{value:a,useAbbr:!0,suffix:s})}),(0,y.jsx)("div",{className:d().desc,children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})]})})}},{title:(0,c.Z)("apr"),dataIndex:"apr",key:"apr",align:"right",render:e=>"".concat(e,"%")},{title:(0,y.jsxs)(y.Fragment,{children:[(0,c.Z)("risk_factor"),(0,y.jsx)("br",{}),(0,c.Z)("liq_rf")]}),dataIndex:"liq",key:"liq",align:"right",render:(e,n)=>{var a=n.positions,s=n.userDebt,r=a.collaterals,i=new Z.Z(0);r.forEach((e=>{var n=e.token,a=e.amount,s=(0,v.xD)(n,t),r=s.userBorrowPrice,l=s.assets,o=s.tokenDecimal,d=(0,v.gB)(a.toString(),o);i=i.plus(new Z.Z(d).multipliedBy(r).multipliedBy(l.collateralCredit))})),i=parseFloat(s)<=0?i.gt(0)?new Z.Z(1/0):new Z.Z(0):i.div(s).div(n.userBorrowPrice).div(n.assets.borrowCredit);var l="#00A980";return i.lte(1.05)?l="#EB5757":i.lte(1.1)&&(l=" #F2994A"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{color:l},children:"Infinity"===i.toString()?"--":i.toFixed(2)}),(0,y.jsx)("div",{className:d().line,children:"1.00"})]})}},{title:"".concat((0,c.Z)("add_coll"),"/").concat((0,c.Z)("repay")),dataIndex:"repay",key:"repay",align:"center",render:(e,n)=>R?(0,y.jsxs)("div",{className:d().action,children:[parseFloat(n.userUpdatedAt)>0&&(0,y.jsx)(j.A,{setShowPanelIndex:e=>$(e,n),txt:(0,c.Z)("edit")}),parseFloat(n.userDebt)>0&&(0,y.jsx)(j.b,{setShowPanelIndex:e=>$(e,n)})]}):null}],z=[{title:"".concat((0,c.Z)("collateral"),"/").concat((0,c.Z)("value")),dataIndex:"collateral_type",key:"collateral_type",align:"left",render:(e,n)=>{var a=n.positions.collaterals,s=[],r=[];a.map((e=>{var n=e.amount,a=e.token,i=(0,v.xD)(a,t);s.push({token:i,amount:(0,v.gB)(n.toString(),i.tokenDecimal)}),r.push(i.icon?(0,y.jsx)("img",{src:i.icon,className:d().icon},a):(0,y.jsx)(k.Z,{tokenId:a},a))}));var i=(0,v.B2)(s);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:d().icon_wrap,children:r}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:i,prefix:"$",useAbbr:!0})})]})}},{title:(0,y.jsxs)(y.Fragment,{children:[(0,c.Z)("risk_factor"),(0,y.jsx)("br",{}),(0,c.Z)("liq_rf")]}),dataIndex:"liq",key:"liq",align:"right",render:(e,n)=>{var a=n.positions,s=n.userDebt,r=a.collaterals,i=new Z.Z(0);r.forEach((e=>{var n=e.token,a=e.amount,s=(0,v.xD)(n,t),r=s.userBorrowPrice,l=s.assets,o=s.tokenDecimal,d=(0,v.gB)(a.toString(),o);i=i.plus(new Z.Z(d).multipliedBy(r).multipliedBy(l.collateralCredit))})),i=parseFloat(s)<=0?i.gt(0)?new Z.Z(1/0):new Z.Z(0):i.div(s).div(n.userBorrowPrice).div(n.assets.borrowCredit);var l="#00A980";return i.lte(1.05)?l="#EB5757":i.lte(1.1)&&(l=" #F2994A"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{style:{color:l},children:i.toFixed(2)}),(0,y.jsx)("br",{}),"1.00"]})}}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{columns:s?z:K,dataSource:A,className:d().table,rowKey:"id",loading:{spinning:x,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}}),q>-1&&(0,y.jsx)(g.Z,{showPanelIndex:q,setShowPanelIndex:E,currentToken:B})]})}var F=e=>{var n=e.tokens,a=e.wallet;return(0,i.Z)((0,i.Z)({},n),a)},B=(0,_.$j)(F)(I);function S(e){var n=e.list,a=e.loading,s=(0,_.I0)(),r=(0,u.useState)([]),t=(0,l.Z)(r,2),i=t[0],o=t[1];(0,u.useEffect)((()=>{n&&n.length>0&&o(n.filter((e=>parseFloat(e.userTokenBalance)>0)))}),[n]);var x=[{title:(0,c.Z)("asset"),dataIndex:"asset",key:"asset",align:"left",render:(e,n)=>{var a=n.icon,s=n.symbol,r=n.fullName,t=n.tokenId;return(0,y.jsx)("div",{className:d().token,children:(0,y.jsxs)("div",{className:d().info,children:[(0,y.jsx)("div",{className:d().icon_wrap,children:a?(0,y.jsx)("img",{src:a,className:d().icon}):(0,y.jsx)(k.Z,{tokenId:t})}),(0,y.jsxs)("div",{className:d().title,children:[(0,y.jsx)("div",{className:d().symbol,children:s}),(0,y.jsx)("div",{className:d().full_name,children:r})]})]})})}},{title:(0,c.Z)("balance"),dataIndex:"balance",key:"balance",align:"right",render:(e,n)=>{var a=n.userTokenBalance,s=n.symbol,r=(0,v.B2)([{amount:a,token:n}]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:a,useAbbr:!0,suffix:s})}),(0,y.jsx)("div",{className:d().desc,children:(0,y.jsx)(f.Z,{value:r,prefix:"$",useAbbr:!0})})]})}},{title:"-",dataIndex:"swap",key:"swap",align:"center",render:(e,n)=>{var a=n.tokenId;return(0,y.jsx)("div",{className:d().action,onClick:()=>{s({type:"tokens/save",payload:{swapTokenId:a}}),_.m8.push("/trade")},children:(0,c.Z)("swap")})}}];return(0,y.jsx)(m.Z,{columns:x,dataSource:i,className:d().table,rowKey:"id",loading:{spinning:a,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}})}var D=S,C=a(94530),A=(a(71194),a(37079)),P=a(21512),L=a(89544);function T(e){var n=e.visible,a=e.setVisible,s=e.setShowLiuidityPanelIndex,t=e.token,i=t.userOsd,l=t.userReserve,o=t.symbol,d=t.userLpSupply,u=t.icon,_=t.tokenId,x=t.fullName,m=t.userLpBalance,h=t.osdTokenData,p=t.tokenDecimal,j=t.userTokenDebt,g=u?(0,y.jsx)("img",{src:u,className:r().icon}):(0,y.jsx)(k.Z,{tokenId:_}),b=parseFloat(d)>0?new Z.Z(m).div(d):new Z.Z(0),w=(0,v.B2)([{amount:new Z.Z(l).plus(j).toFixed(p),token:t},{amount:i,token:h}]),N=b.multipliedBy(w).toFixed(2);return(0,y.jsx)(A.Z,{width:890,footer:null,open:n,getContainer:()=>document.getElementById("J_Page")||document.body,onCancel:()=>a(!1),closable:!1,wrapClassName:r().modal,children:(0,y.jsxs)("div",{className:r().container,children:[(0,y.jsxs)("div",{className:r().token,children:[(0,y.jsxs)("div",{className:r().icon_wrap,children:[g,(0,y.jsx)("img",{src:L.qQ,className:r().icon_osd})]}),(0,y.jsxs)("div",{className:r().title,children:[(0,y.jsx)("div",{className:r().symbol,children:o}),(0,y.jsx)("div",{className:r().full_name,children:x})]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,v.FH)(l,2),useAbbr:!0})," ",o]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,v.FH)(i,2),useAbbr:!0})," ",h.symbol]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[m," ",o," LP | ",b.multipliedBy(100).toFixed(2),"%"]}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{value:N,useAbbr:!0,prefix:"$"})})]}),(0,y.jsxs)("div",{className:r().btns_wrap,children:[(0,y.jsx)(P.Z,{onClick:()=>s(1),className:r().btn,height:"48",children:(0,c.Z)("remove_liquidity")}),(0,y.jsx)(P.Z,{onClick:()=>s(0),className:r().btn,height:"48",children:(0,c.Z)("add_liquidity")})]})]})})}var q=e=>{var n=e.tokens,a=e.wallet;return(0,i.Z)((0,i.Z)({},n),a)},E=(0,_.$j)(q)(T),R=(0,v.l$)(),$="iPhone"===R||"Android"===R;function K(e){var n=e.list,a=e.loading,s=e.osdTokenData,r=e.isLogin,t=e.dataSourceChainId,i=e.walletChainId,o=(0,u.useState)([]),_=(0,l.Z)(o,2),x=_[0],j=_[1],g=(0,u.useState)(-1),b=(0,l.Z)(g,2),N=b[0],I=b[1],F=(0,u.useState)(!1),B=(0,l.Z)(F,2),S=B[0],D=B[1],A=(0,u.useState)({}),P=(0,l.Z)(A,2),T=P[0],q=P[1],R=r&&t===i;(0,u.useEffect)((()=>{n&&n.length>0&&j(n.filter((e=>parseFloat(e.userLpBalance)>0)))}),[n]);var K=function(){var e=(0,p.Z)((0,h.Z)().mark((function e(n,a){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:q(a),I(n);case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),z=[{title:(0,c.Z)("pool"),dataIndex:"pool",key:"pool",align:"left",render:(e,n)=>{var a=n.icon,s=n.symbol,r=n.fullName,t=n.tokenId;return(0,y.jsx)("div",{className:d().token,children:(0,y.jsxs)("div",{className:d().info,children:[(0,y.jsxs)("div",{className:d().icon_wrap,children:[a?(0,y.jsx)("img",{src:a,className:d().icon}):(0,y.jsx)(k.Z,{tokenId:t}),(0,y.jsx)("img",{src:L.qQ,className:d().icon_osd})]}),(0,y.jsxs)("div",{className:d().title,children:[(0,y.jsx)("div",{className:d().symbol,children:s}),(0,y.jsx)("div",{className:d().full_name,children:r})]})]})})}},{title:(0,c.Z)("pool_size"),dataIndex:"size",key:"poolInfo",align:"right",render:(e,n)=>{var a=n.userOsd,r=n.userReserve;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(f.Z,{value:(0,v.FH)(r,2),useAbbr:!0})," ",n.symbol]}),(0,y.jsxs)("div",{className:d().line,children:[(0,y.jsx)(f.Z,{value:(0,v.FH)(a,2),useAbbr:!0})," ",s.symbol]})]})}},{title:(0,y.jsxs)(y.Fragment,{children:["LP | ",(0,c.Z)("increased_pool"),(0,y.jsx)("br",{}),(0,c.Z)("value")]}),dataIndex:"lp",key:"lp",align:"right",render:(e,n)=>{var a=n.userLpBalance,r=n.userLpSupply,t=n.symbol,i=n.userReserve,l=n.userOsd,o=n.userTokenDebt,c=n.tokenDecimal,u=parseFloat(r)>0?new Z.Z(a).div(r):new Z.Z(0),_=(0,v.B2)([{amount:new Z.Z(i).plus(o).toFixed(c),token:n},{amount:l,token:s}]),x=u.multipliedBy(_).toFixed(2);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{children:[a," ",t," LP | ",u.multipliedBy(100).toFixed(2),"%"]}),(0,y.jsx)("div",{className:d().line,children:(0,y.jsx)(f.Z,{value:x,useAbbr:!0,prefix:"$"})})]})}}],H=[...z,{title:(0,c.Z)("manage_liq"),dataIndex:"manage",key:"manage",align:"center",render:(e,n)=>(0,y.jsxs)("div",{className:d().action,children:[(0,y.jsx)("div",{onClick:()=>K(0,n),children:(0,c.Z)("add")}),(0,y.jsx)("div",{onClick:()=>K(1,n),style:{marginLeft:20},children:(0,c.Z)("withdraw")})]})}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{columns:$?z:H,dataSource:x,className:d().table,rowKey:"id",loading:{spinning:a,indicator:(0,y.jsx)(w.Z,{spin:!0,style:{fontSize:30}})}}),N>-1&&(0,y.jsx)(C.Z,{showPanelIndex:N,setShowPanelIndex:I,currentToken:T}),S&&R&&(0,y.jsx)(E,{token:T,visible:S,setVisible:D,setShowLiuidityPanelIndex:e=>{D(!1),I(e)}})]})}var z=K;function H(e){var n=e.tokenDatas,a=e.osdTokenData,s=e.loadingData,r=(0,u.useState)([]),t=(0,l.Z)(r,2),i=t[0],o=t[1],_=(0,u.useState)(0),m=(0,l.Z)(_,2),h=m[0],p=m[1];(0,u.useEffect)((()=>{o(n)}),[n]);var v=n&&n.length<1||s;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:d().layer_top,children:[(0,y.jsx)("div",{className:d().menu,children:["wallet_balance","pool_deposits","borrow_positions"].map(((e,n)=>(0,y.jsx)("div",{className:n===h?"".concat(d().menu_item," ").concat(d().menu_current_item):d().menu_item,onClick:()=>p(n),children:(0,c.Z)(e)},e)))}),(0,y.jsx)("div",{className:d().search_wrap,children:(0,y.jsx)(x.Z,{changeShowList:o,className:"search_input",placeholder:(0,c.Z)("search_tips")})})]}),0===h&&(0,y.jsx)(D,{list:i,loading:v}),1===h&&(0,y.jsx)(z,{list:i,loading:v,osdTokenData:a}),2===h&&(0,y.jsx)(B,{list:i,loading:v})]})}var Q=e=>{var n=e.tokens,a=e.wallet,s=e.loading,r=s.effects;return(0,i.Z)((0,i.Z)((0,i.Z)({},n),a),{},{loadingData:r["tokens/getData"]||!1})},G=(0,_.$j)(Q)(H);function O(){return(0,y.jsx)(t.Z,{children:(0,y.jsx)("div",{className:r().container,children:(0,y.jsx)(G,{})})})}var V=O}}]);