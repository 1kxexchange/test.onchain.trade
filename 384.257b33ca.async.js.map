{"version":3,"sources":["webpack://1kx-sourceCode/./src/pages/pools/borrowing/index.less","webpack://1kx-sourceCode/./src/pages/pools/liquidity/index.less","webpack://1kx-sourceCode/./src/pages/pools/borrowing/borrow.tsx","webpack://1kx-sourceCode/./src/components/card/common.tsx","webpack://1kx-sourceCode/./src/components/card/delay.tsx","webpack://1kx-sourceCode/./src/pages/pools/borrowing/repay.tsx","webpack://1kx-sourceCode/./src/pages/pools/borrowing/index.tsx","webpack://1kx-sourceCode/./src/pages/pools/borrowing/trigger.tsx","webpack://1kx-sourceCode/./src/pages/pools/liquidity/add.tsx","webpack://1kx-sourceCode/./src/pages/pools/liquidity/remove.tsx","webpack://1kx-sourceCode/./src/pages/pools/liquidity/index.tsx"],"names":["module","exports","Borrow","props","dispatch","useDispatch","currentWallet","walletChainId","currentToken","closeModal","tokenDatasSorted","calcBorrowRiskRate","borrow","calcBorrowLimit","useState","id","Date","getTime","userAmount","token","amount","inDatas","setInDatas","amountOut","setAmountOut","borrowLimit","setBorrowLimit","outToken","setOutToken","submiting","setSubmiting","resultVisible","setResultVisible","txid","setTxid","risk","setRisk","calculating","setCalculating","borrowedHis","changeAmountIn","index","newInDatas","forEach","item","tokenData","getFullTokenDataById","amountRaw","tokenDecimal","debounce","calDatas","_indatas","envir","env","tokenId","_borrowLimit","chainId","tokenDatas","_riskRate","updateData","type","finishSubmit","hash","handleSubmit","res","error","message","console","log","useEffect","addItem","oldInDatas","removeItem","splice","changeInTokens","exist","findIndex","v","toLowerCase","symbol","_","closeResultModal","spinning","length","className","styles","map","title","priceType","onAmountChange","toString","onChangeToken","slider","onChange","max","userTokenBalance","onClick","CloseCircleOutlined","left","AmountLoading","toFixed","right","apr","style","borderBottom","height","align","conditions","handle","parseFloat","userUpdatedAt","txt","low","amountTitle","visible","close","tokenIns","push","tokenOuts","mapStateToProps","common","tokens","wallet","connect","AmountInputWrap","lazy","then","default","forwardRef","ref","SimpleCard","rightBottom","inputRef","useRef","changeValue","value","e","contains","currentTarget","target","current","focus","Suspense","fallback","data","setFullAmount","changeToken","Repay","account","repay","calcRepayRiskRate","getAccountDebt","tokenIn","setTokenIn","useDelayedState","amountIn","setAmountIn","amountInRaw","setAmountInRaw","collateralExpand","setCollateralExpand","setTokenOuts","loadingOuts","setLoadingOuts","userDebt","setUserDebt","changeAmount","fun","positions","collaterals","amountRepayAmount","formatSat","datas","payload","outs","filter","coll","getTokenDataById","risk_rate","rf_gte","totalOutAmount","BN","autoSetAmount","tokenBalance","amountRepay","read","display","plus","usd","usdPrice","min","userTotalCol","lte","gt","receiveTitle","d","BorrowRepay","showPanelIndex","setShowPanelIndex","width","footer","open","getContainer","document","getElementById","body","onCancel","closable","wrapClassName","menuDatas","BorrowRepayMenuDatas","menuIndex","setMenuIndex","BorrowBtn","stopPropagation","RepayBtn","AddLiquidity","calcAddLiqOut","addLiq","setTokenId","increasedPoolShare","setIncreasedPoolShare","tokenObj","_amountInRaw","_amountRaw","marginLeft","icon","iconLp","lpSymbol","liquidity","RemoveLiquidity","osdTokenData","calcRemoveLiqIn","removeLiq","amountOutToken","setAmountOutToken","amountOutOsd","setAmountOutOsd","lpDecimal","userLpBalance","Liquidity","LiquidityMenuDatas"],"mappings":"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","file":"384.257b33ca.async.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___X2t_w\",\"label\":\"label___3kSJ9\",\"value\":\"value___vPr4C\",\"amount\":\"amount___28QoP\",\"info\":\"info___3S3kZ\",\"item\":\"item___EzhrT\",\"arr\":\"arr___sG6wt\",\"green\":\"green___Q3Bw_\",\"red\":\"red___284AR\",\"result_icon\":\"result_icon___1eoKk\",\"container\":\"container___1bNK4\",\"repay\":\"repay___3T4jn\",\"borrow\":\"borrow___3omfj\",\"error\":\"error___WlYKh\",\"collateral\":\"collateral___2J7Qh\",\"coll_title\":\"coll_title___3u7dq\",\"panel\":\"panel___3Byw1\",\"token\":\"token___3q3_M\",\"incard_wrap\":\"incard_wrap___1-629\",\"close\":\"close___kqqup\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card___29Y3U\",\"label\":\"label___1BrRj\",\"value\":\"value___1DY4V\",\"amount\":\"amount___2pJtZ\",\"info\":\"info___dacWO\",\"item\":\"item___3Wexh\",\"arr\":\"arr___2t7Ui\",\"green\":\"green___2xwfj\",\"red\":\"red___2TAuz\",\"result_icon\":\"result_icon___20eKA\",\"deposit\":\"deposit___1zH4d\",\"remove\":\"remove___2pxJz\",\"tooltip\":\"tooltip___1RT7R\",\"container\":\"container___hG5-7\"};","import styles from './index.less'\nimport _ from '@/i18n'\nimport Btn from '@/components/btn'\nimport { amountRaw, debounce, envir, getFullTokenDataById, toFixed } from '@/common/utils'\nimport { useEffect, useState } from 'react'\nimport type {\n  CommonStateType,\n  inDatasType,\n  TokenDataFullType,\n  TokenDataType,\n  TokenStateType,\n  WalletStateType,\n} from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { Loading as Spin } from '@/components/loading'\nimport SimpleCard from '@/components/card'\nimport Icon from '@/components/icon'\nimport Slider from '@/components/slider'\nimport { CloseCircleOutlined } from '@ant-design/icons'\nimport { message } from '@/components/message'\nimport Result from '@/components/result'\nimport { AmountLoading } from '@/common/config'\nimport { Tooltip } from 'antd'\n\ntype propsType = {\n  currentToken: TokenDataFullType\n  closeModal: () => void\n}\n\nfunction Borrow(props: CommonStateType & TokenStateType & WalletStateType & propsType) {\n  const dispatch = useDispatch()\n  const { currentWallet, walletChainId, currentToken, closeModal, tokenDatasSorted } = props\n  const { calcBorrowRiskRate, borrow, calcBorrowLimit } = currentWallet || {}\n\n  const [inDatas, setInDatas] = useState<inDatasType[]>([\n    {\n      id: new Date().getTime(),\n      userAmount: '',\n      token: '',\n      // amount: BigNumber.from('0'),\n      amount: '0',\n    },\n  ])\n\n  const [amountOut, setAmountOut] = useState('')\n  const [borrowLimit, setBorrowLimit] = useState('0')\n\n  const [outToken, setOutToken] = useState(currentToken)\n  const [submiting, setSubmiting] = useState(false)\n  const [resultVisible, setResultVisible] = useState(false)\n  const [txid, setTxid] = useState('')\n  const [risk, setRisk] = useState('')\n  const [calculating, setCalculating] = useState(false)\n\n  // const borrowLimit = 0\n  const borrowedHis = 0\n\n  async function changeAmountIn(amount: string, index: number) {\n    if (calculating) return\n    let newInDatas = [...inDatas]\n    newInDatas[index].userAmount = amount\n    inDatas.forEach((item) => {\n      if (item.token) {\n        const tokenData = getFullTokenDataById(item.token, tokenDatasSorted)\n        newInDatas[index].tokenData = tokenData\n        // newInDatas[index].amount = BigNumber.from(amountRaw(amount, tokenData.tokenDecimal))\n        newInDatas[index].amount = amountRaw(amount, tokenData.tokenDecimal)\n      }\n    })\n    setInDatas(newInDatas)\n    debounce(calDatas, 500)(newInDatas)\n  }\n\n  async function calDatas(_indatas: inDatasType[] = inDatas) {\n    const env = await envir(currentWallet, walletChainId)\n    // console.log('env', env)\n    if (!env) return\n    // console.log('outToken', outToken.tokenId)\n    if (!outToken.tokenId) return //未选择token或数量未大于0，直接return\n    setCalculating(true)\n    const _borrowLimit = await calcBorrowLimit(walletChainId, outToken, _indatas)\n    // console.log('_borrowLimit', _borrowLimit)\n    setBorrowLimit(_borrowLimit)\n    const _riskRate = await calcBorrowRiskRate({\n      chainId: walletChainId,\n      _indatas,\n      tokenDatas: tokenDatasSorted,\n      amountOut,\n      outToken,\n    })\n    setRisk(_riskRate)\n\n    setCalculating(false)\n  }\n\n  const updateData = async () => {\n    await dispatch({\n      type: 'tokens/updatePrice',\n    })\n    dispatch({\n      type: 'tokens/fetchPoolInfo',\n    })\n  }\n\n  const finishSubmit = (hash: string) => {\n    setTxid(hash)\n    setResultVisible(true)\n    updateData()\n  }\n\n  useEffect(() => {\n    calDatas()\n  }, [1, outToken, amountOut])\n\n  async function handleSubmit() {\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    setSubmiting(true)\n    try{\n      const res = await borrow({\n        chainId: walletChainId,\n        inDatas,\n        outToken,\n        amountOut,\n      })\n      // console.log(res)\n      if (res.error) {\n        message(res.error)\n      } else if (res.hash) {\n        finishSubmit(res.hash)\n      }\n      setSubmiting(false)\n    }catch(err){\n      console.log(err)\n      message(err)\n      setSubmiting(false)\n    }\n  \n  }\n\n  const addItem = () => {\n    setInDatas((oldInDatas) => {\n      return [\n        ...oldInDatas,\n        {\n          id: new Date().getTime(),\n          userAmount: '',\n          token: '',\n          amount: '0',\n        },\n      ]\n    })\n  }\n\n  const removeItem = (index: number) => {\n    let newInDatas = [...inDatas]\n    newInDatas.splice(index, 1)\n    setInDatas(newInDatas)\n    calDatas(newInDatas)\n  }\n\n  const changeInTokens = (index: number, token: TokenDataType) => {\n    let newInDatas = [...inDatas]\n    const exist = newInDatas.findIndex((v) => v.token.toLowerCase() === token.tokenId.toLowerCase())\n    if (exist > -1) return message(`${token.symbol} ${_('already_selected')}`)\n\n    const tokenData = getFullTokenDataById(token.tokenId, tokenDatasSorted)\n    if (!tokenData) return\n    newInDatas[index] = {\n      ...newInDatas[index],\n      token: token.tokenId,\n      tokenData,\n      amount: amountRaw(newInDatas[index].userAmount || '0', tokenData.tokenDecimal),\n    }\n\n    setInDatas(newInDatas)\n    calDatas(newInDatas)\n  }\n\n  const closeResultModal = () => {\n    setResultVisible(false)\n    closeModal()\n    updateData()\n  }\n\n  return (\n    <>\n      <Spin spinning={(tokenDatasSorted || []).length < 1 || submiting}>\n        <div className={styles.container}>\n          {inDatas.map((item, index) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <div key={item.id} className={styles.incard_wrap}>\n              <SimpleCard\n                title={`${_('pay')}(${_('collateral')})`}\n                amount={item.userAmount}\n                priceType=\"borrow\"\n                type=\"borrow\"\n                onAmountChange={(amount: number) => changeAmountIn((amount || 0).toString(), index)}\n                token={inDatas[index].tokenData || {}}\n                onChangeToken={(token) => changeInTokens(index, token)}\n                slider={\n                  <Slider\n                    amount={item.userAmount}\n                    onChange={(amount: string) => changeAmountIn((amount || 0).toString(), index)}\n                    max={inDatas[index].tokenData?.userTokenBalance || 0}\n                  />\n                }\n              />\n\n              {inDatas.length > 1 && (\n                <div className={styles.close} onClick={() => removeItem(index)}>\n                  <CloseCircleOutlined />\n                </div>\n              )}\n            </div>\n          ))}\n          <div className={styles.arr} onClick={addItem}>\n            <Icon type=\"icon-plus\" />\n          </div>\n          <SimpleCard\n            amount={amountOut}\n            onAmountChange={(amount: number) => setAmountOut((amount || 0).toString())}\n            token={outToken}\n            onChangeToken={setOutToken}\n            type=\"borrow\"\n            left={\n              <div onClick={() => setAmountOut(borrowLimit)}>\n                {_('borrow_limit')}:{' '}\n                <span className=\"primary\">\n                  {calculating ? AmountLoading : toFixed(borrowLimit, 4)}\n                </span>\n              </div>\n            }\n            right={\n              <div>\n                {_('borrowed')}: {borrowedHis}\n              </div>\n            }\n          />\n\n          <div className={styles.info}>\n            <div className={styles.item}>\n              <div className={styles.label}>{_('apr')}</div>\n              <div className={styles.fee}>{outToken.apr}%</div>\n            </div>\n            <div className={styles.item}>\n              <div\n                className={styles.label}\n                style={{ borderBottom: '1px dashed var(--primary-color)' }}\n              >\n                <Tooltip title={_('risk_factor_tips')}>{_('risk_factor')}</Tooltip>\n              </div>\n              <div className={styles.fee}>{calculating ? AmountLoading : risk}</div>\n            </div>\n          </div>\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={handleSubmit}\n            conditions={[\n              {\n                handle: parseFloat(outToken.userUpdatedAt) <= 0,\n                txt: _('cant_borrow'),\n              },\n              {\n                handle:\n                  parseFloat(amountOut || '0') <= 0 &&\n                  parseFloat(inDatas[0].userAmount || '0') <= 0,\n                txt: _('input_amount'),\n              },\n              {\n                handle: (() => {\n                  let low = false\n                  inDatas.forEach((v) => {\n                    if (\n                      v.token &&\n                      parseFloat(v.userAmount) >\n                        parseFloat(v.tokenData ? v.tokenData.userTokenBalance : '0')\n                    ) {\n                      low = true\n                    }\n                  })\n                  return low\n                })(),\n                txt: _('lack_balance'),\n              },\n              {\n                handle: parseFloat(amountOut || '0') > parseFloat(borrowLimit || '0'),\n                txt: _('beyond'),\n              },\n            ]}\n          >\n            {parseFloat(amountOut || '0') <= 0 && parseFloat(inDatas[0].userAmount) > 0\n              ? _('add_collateral')\n              : _('borrow')}\n          </Btn>\n        </div>\n      </Spin>\n      <Result\n        title={_('borrow_done')}\n        amountTitle={_('deposited_amount')}\n        txid={txid}\n        visible={resultVisible}\n        close={closeResultModal}\n        chainId={walletChainId}\n        tokenIns={(() => {\n          let newInDatas: {\n            amount: string\n            tokenId: string\n          }[] = []\n          inDatas.forEach((v) => {\n            newInDatas.push({\n              amount: v.userAmount,\n              tokenId: v.token,\n              ...v.tokenData,\n            })\n          })\n          return newInDatas\n        })()}\n        tokenOuts={[\n          {\n            ...outToken,\n            amount: amountOut,\n          },\n        ]}\n      />\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(Borrow)\n","import { lazy, forwardRef } from 'react'\n// import { Input } from 'antd'\n\n// export function AmountInput({ amount, ...props }) {\n//   return <Input className=\"inputTxt\" value={amount.read()} onChange={props.onChange} />\n// }\n\nexport const AmountInputWrap = lazy(() => {\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return import('./amountInput').then(({ default: AmountInputWrap }) => {\n    return {\n      default: forwardRef((props, ref) => <AmountInputWrap ref={ref} {...props} />),\n    }\n  })\n})\n","import { Suspense, useRef } from 'react'\nimport ChooseToken from '../chooseToken'\nimport styles from './index.less'\nimport type { TokenDataType } from '@/models/dataType'\nimport { AmountInputWrap } from './common'\nimport type { InputRef } from 'antd'\nimport { contains } from '@/common/utils'\nimport { TokenBalance } from '../balance/token'\nimport USD from '@/components/price/usd'\n\nfunction SimpleCard(props: {\n  amount: any\n  onAmountChange: (amount: number) => any\n  onChangeToken?: (item: TokenDataType) => any\n  [key: string]: any\n}) {\n  const {\n    onAmountChange,\n    amount,\n    token,\n    onChangeToken,\n    left,\n    right,\n    title,\n    rightBottom,\n    type = '',\n    className,\n    slider,\n  } = props\n  const inputRef = useRef<InputRef>(null)\n\n  const changeValue = (value: number) => {\n    onAmountChange?.(value)\n  }\n\n  return (\n    <div\n      className={`${styles.card} ${className}`}\n      onClick={(e) => {\n        if (contains(e.currentTarget, e.target)) {\n          inputRef.current!.focus()\n        }\n      }}\n    >\n      <div className={styles.label}>\n        {left || (\n          <div>\n            {title}:\n            <Suspense fallback=\"loading\">\n              <USD data={{ amount, token }} />\n            </Suspense>\n          </div>\n        )}{' '}\n        {right || (\n          <TokenBalance\n            token={token}\n            setFullAmount={(value: number) => onAmountChange(value)}\n            type={type}\n          />\n        )}\n      </div>\n      <div className={styles.value}>\n        <Suspense fallback=\"loading\">\n          <AmountInputWrap\n            className=\"inputTxt\"\n            amount={amount}\n            onChange={changeValue}\n            ref={inputRef}\n          />\n        </Suspense>\n        {rightBottom || (\n          <ChooseToken currentToken={token} changeToken={onChangeToken} type={type} />\n        )}\n      </div>\n      {slider}\n    </div>\n  )\n}\nexport default SimpleCard\n","import styles from './index.less'\nimport _ from '@/i18n'\nimport { DownloadArr } from '@/components/ui'\nimport Btn from '@/components/btn'\nimport {\n  amountRaw,\n  envir,\n  formatSat,\n  getTokenDataById,\n  toFixed,\n  usdPrice,\n  useDelayedState,\n} from '@/common/utils'\nimport { useEffect, useState } from 'react'\nimport type {\n  CommonStateType,\n  TokenDataFullType,\n  TokenDataType,\n  TokenStateType,\n  WalletStateType,\n} from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { Loading as Spin } from '@/components/loading'\nimport DelayCard from '@/components/card/delay'\n\nimport Token from '@/components/chooseToken/token'\nimport Slider from '@/components/slider'\nimport Result from '@/components/result'\nimport { InputNumber } from 'antd'\nimport { message } from '@/components/message'\nimport BN from 'bignumber.js'\nimport FormatNumber from '@/components/formatNumber'\nimport { Tooltip } from 'antd'\n\ntype propsType = {\n  currentToken: TokenDataFullType\n  closeModal: () => void\n}\n\nfunction Repay(props: CommonStateType & TokenStateType & WalletStateType & propsType) {\n  const dispatch = useDispatch()\n  const { currentToken, tokenDatasSorted, walletChainId, currentWallet, account, closeModal } =\n    props\n  const { repay, calcRepayRiskRate, getAccountDebt } = currentWallet || {}\n\n  const [tokenIn, setTokenIn] = useState(currentToken)\n  const [amountIn, setAmountIn] = useDelayedState('0')\n  const [amountInRaw, setAmountInRaw] = useState('0')\n  const [collateralExpand, setCollateralExpand] = useState(false)\n  const [tokenOuts, setTokenOuts] = useState([])\n  const [submiting, setSubmiting] = useState(false)\n  const [resultVisible, setResultVisible] = useState(false)\n  const [txid, setTxid] = useState('')\n  const [risk, setRisk] = useState('1')\n  const { tokenId, symbol } = tokenIn\n  const [loadingOuts, setLoadingOuts] = useState(false)\n  const [userDebt, setUserDebt] = useState(tokenIn.userDebt)\n\n  async function changeAmount(amount: string) {\n    setAmountIn(amount)\n    if (amount) {\n      setAmountInRaw(amountRaw(amount, tokenIn.tokenDecimal))\n    }\n  }\n\n  useEffect(() => {\n    const fun = async () => {\n      const amountRepayAmount = await getAccountDebt(\n        walletChainId,\n        tokenId,\n        tokenIn.positions.collaterals,\n      )\n      setUserDebt(formatSat(amountRepayAmount, tokenIn.tokenDecimal, 0))\n    }\n    getAccountDebt && fun()\n  }, [parseFloat(tokenIn.userDebt) > 0])\n\n  const updateData = async () => {\n    const datas = await dispatch({\n      type: 'tokens/getData',\n    })\n    dispatch({\n      type: 'tokens/fetchPoolInfo',\n      payload: {\n        datas,\n      },\n    })\n  }\n\n  const finishSubmit = (hash: string) => {\n    setTxid(hash)\n    setResultVisible(true)\n    updateData()\n  }\n\n  async function handleSubmit() {\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    setSubmiting(true)\n    const res = await repay({\n      chainId: walletChainId,\n      tokenId,\n      tokenIn,\n      amountInRaw,\n      tokenOuts,\n    })\n    console.log(res)\n    if (res.error) {\n      message(res.error)\n    } else if (res.hash) {\n      finishSubmit(res.hash)\n    }\n\n    setSubmiting(false)\n  }\n\n  useEffect(() => {\n    setAmountIn('0')\n    setAmountInRaw('0')\n    const fun = async () => {\n      setLoadingOuts(true)\n      let { collaterals = [] } = tokenIn.positions\n      let outs: { token: TokenDataType; max: string | number; amount: string; visible: boolean }[] =\n        []\n      collaterals = collaterals.filter((v) => v.amount > 0)\n\n      collaterals.forEach((coll) => {\n        const data = getTokenDataById(coll.token, tokenDatasSorted)\n        if (data && coll.amount) {\n          outs.push({\n            token: data,\n            max: formatSat(coll.amount.toString(), data.tokenDecimal),\n            amount: '',\n            visible: collaterals.length === 1,\n          })\n        }\n      })\n      setTokenOuts(outs)\n      setLoadingOuts(false)\n    }\n    if (tokenIn.positions) fun()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tokenIn])\n\n  useEffect(() => {\n    const fun = async () => {\n      const risk_rate = await calcRepayRiskRate({\n        chainId: walletChainId,\n        tokenIn,\n        amountIn,\n        tokenOuts,\n      })\n\n      setRisk(risk_rate)\n    }\n\n    if (tokenOuts.length < 1 || !calcRepayRiskRate) return\n    fun()\n  }, [amountIn, tokenOuts])\n\n  const closeResultModal = () => {\n    setResultVisible(false)\n    closeModal()\n    updateData()\n  }\n\n  const rf_gte = parseFloat(risk) >= 1\n  let totalOutAmount = new BN(0)\n\n  const autoSetAmount = async () => {\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) {\n      setAmountIn(\n        parseFloat(tokenIn.userDebt) > parseFloat(tokenIn.userTokenBalance)\n          ? tokenIn.userTokenBalance\n          : tokenIn.userDebt,\n      )\n      return\n    }\n    if (parseFloat(tokenIn.userDebt) > parseFloat(tokenIn.userTokenBalance)) {\n      setAmountInRaw(tokenId.tokenBalance)\n    } else {\n      const amountRepayAmount = await getAccountDebt(\n        walletChainId,\n        tokenId,\n        tokenIn.positions.collaterals,\n      )\n      const amountRepay = formatSat(amountRepayAmount, tokenIn.tokenDecimal, 0)\n      // console.log('amountRepay', amountRepay)\n      setAmountIn(amountRepay)\n      setAmountInRaw(amountRepayAmount)\n      setUserDebt(amountRepay)\n    }\n  }\n\n  return (\n    <>\n      <Spin spinning={(tokenDatasSorted && tokenDatasSorted.length < 1) || submiting}>\n        <div className={styles.container} id=\"J_repay\">\n          <DelayCard\n            left={\n              <div onClick={autoSetAmount}>\n                {_('max_payable')}:{' '}\n                <span className=\"primary\">\n                  <FormatNumber value={userDebt} /> {symbol}\n                </span>\n              </div>\n            }\n            right={\n              <div onClick={autoSetAmount}>\n                {_('balance')}:{' '}\n                <span className=\"primary\">{toFixed(tokenIn.userTokenBalance, 4)}</span>\n              </div>\n            }\n            amount={amountIn}\n            onAmountChange={(amount: string) => changeAmount(amount)}\n            token={tokenIn}\n            onChangeToken={(item) => setTokenIn(item)}\n            slider={\n              <Slider\n                amount={amountIn.read()}\n                onChange={(amount: string) => changeAmount(amount)}\n                max={tokenIn.userDebt}\n              />\n            }\n          />\n          <Spin spinning={loadingOuts}>\n            {tokenOuts.length > 1 && (\n              <div className={styles.collateral}>\n                <div className={styles.coll_title}>\n                  <div className={styles.label}>{_('collateral')}:</div>\n                  <div\n                    className={styles.arr}\n                    onClick={() => setCollateralExpand(!collateralExpand)}\n                    style={{ display: tokenOuts.length > 0 ? 'block' : 'none' }}\n                  >\n                    <DownloadArr />\n                  </div>\n                </div>\n                <div\n                  className={styles.panel}\n                  style={{ display: collateralExpand ? 'flex' : 'none' }}\n                >\n                  {tokenOuts.map((item, index) => {\n                    return (\n                      <div\n                        className={styles.token}\n                        key={item.token.tokenId}\n                        onClick={() => {\n                          let outs = [...tokenOuts]\n                          outs[index].visible = !outs[index].visible\n                          setTokenOuts(outs)\n                        }}\n                      >\n                        <Token data={item.token} />\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n            {tokenOuts.map(({ token, amount, max, visible }, index) => {\n              totalOutAmount = totalOutAmount.plus(amount || 0)\n              const usd = usdPrice([{ amount: amount || 0, token }], 'borrow')\n              return (\n                <div\n                  className={styles.card}\n                  key={token.tokenId}\n                  style={{ display: visible ? 'block' : 'none' }}\n                >\n                  <div className={styles.label}>\n                    <div>\n                      {_('withdraw')}: ${toFixed(usd, 2)}\n                    </div>\n                    <div\n                      onClick={() => {\n                        let outs = [...tokenOuts]\n                        outs[index].amount = max\n                        setTokenOuts(outs)\n                      }}\n                    >\n                      {_('max_withdraw')}: <span className=\"primary\">{max}</span>\n                    </div>\n                  </div>\n                  <div className={styles.value}>\n                    <div className={styles.amount}>\n                      <InputNumber\n                        className=\"inputTxt\"\n                        value={amount}\n                        min={0}\n                        max={max}\n                        onChange={(value: number) => {\n                          let outs = [...tokenOuts]\n                          outs[index].amount = value\n                          setTokenOuts(outs)\n                        }}\n                      />\n                    </div>\n                    <Token data={token} />\n                  </div>\n                  <Slider\n                    amount={amount}\n                    onChange={(value: string) => {\n                      let outs = [...tokenOuts]\n                      outs[index].amount = value\n                      setTokenOuts(outs)\n                    }}\n                    max={max}\n                  />\n                </div>\n              )\n            })}\n          </Spin>\n\n          <div className={styles.info}>\n            <div className={styles.item}>\n              <div className={styles.label}>{_('apr')}</div>\n              <div className={styles.fee}>{tokenIn.apr}%</div>\n            </div>\n            <div className={styles.item}>\n              <div className={styles.label}>{_('debt')}</div>\n              <div className={styles.fee}>\n                {tokenIn.userDebt} {symbol}\n              </div>\n            </div>\n            <div className={styles.item}>\n              <div\n                className={styles.label}\n                style={{ borderBottom: '1px dashed var(--primary-color)' }}\n              >\n                <Tooltip title={_('risk_factor_tips')}>{_('risk_factor')}</Tooltip>\n              </div>\n              <div className={rf_gte ? styles.fee : `${styles.fee} ${styles.error}`}>\n                {risk === 'Infinity' ? '--' : risk}\n              </div>\n            </div>\n          </div>\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={handleSubmit}\n            conditions={[\n              {\n                handle: parseFloat(tokenIn.userDebt) <= 0 && parseFloat(tokenIn.userTotalCol) <= 0,\n                txt: _('no_debt'),\n              },\n              {\n                handle: totalOutAmount.plus(amountIn.read()).lte(0),\n                txt: _('input_amount'),\n              },\n              {\n                handle: !symbol,\n                txt: _('select_asset'),\n              },\n              {\n                handle: !rf_gte,\n                txt: _('rf_above'),\n              },\n            ]}\n            className={rf_gte ? null : 'wrong'}\n          >\n            {totalOutAmount.gt(0) &&\n              parseFloat(amountIn.read() || '0') > 0 &&\n              `${_('repay')} & ${_('remove_coll')}`}\n            {totalOutAmount.lte(0) && parseFloat(amountIn.read() || '0') > 0 && _('repay')}\n            {totalOutAmount.gt(0) && parseFloat(amountIn.read() || '0') <= 0 && _('remove_coll')}\n          </Btn>\n        </div>\n      </Spin>\n      {resultVisible && (\n        <Result\n          title={_('repayment_success')}\n          amountTitle={_('repaid_debt')}\n          receiveTitle={_('received_coll')}\n          txid={txid}\n          chainId={walletChainId}\n          visible={resultVisible}\n          close={closeResultModal}\n          tokenIn={{\n            ...tokenIn,\n            amount: amountIn.read(),\n          }}\n          tokenOuts={(() => {\n            let data = []\n            tokenOuts.map((d) => {\n              if (d.amount) {\n                data.push({\n                  amount: d.amount.toString(),\n                  ...d.token,\n                })\n              }\n            })\n            return data\n          })()}\n        />\n      )}\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(Repay)\n","import styles from './index.less'\nimport { Modal } from 'antd'\nimport { BorrowRepayMenuDatas } from '@/common/config'\nimport PanelMenu from '@/components/menu'\nimport Borrow from './borrow'\nimport Repay from './repay'\n\nexport default function BorrowRepay(props: any) {\n  const { showPanelIndex, setShowPanelIndex, currentToken } = props\n\n  return (\n    <Modal\n      width={420}\n      footer={null}\n      open={showPanelIndex > -1}\n      getContainer={() => document.getElementById('J_Page') || document.body}\n      onCancel={() => setShowPanelIndex(-1)}\n      closable={false}\n      wrapClassName={styles.modal}\n    >\n      <PanelMenu\n        menuDatas={BorrowRepayMenuDatas}\n        menuIndex={showPanelIndex}\n        setMenuIndex={setShowPanelIndex}\n      />\n\n      <div style={{ display: showPanelIndex === 0 ? 'block' : 'none' }}>\n        <Borrow currentToken={currentToken} closeModal={() => setShowPanelIndex(-1)} />\n      </div>\n      <div style={{ display: showPanelIndex === 1 ? 'block' : 'none' }}>\n        <Repay currentToken={currentToken} closeModal={() => setShowPanelIndex(-1)} />\n      </div>\n    </Modal>\n  )\n}\n","import styles from './index.less'\nimport _ from '@/i18n'\n\nexport const BorrowBtn = (props) => {\n  const { setShowPanelIndex, txt } = props\n  return (\n    <span\n      className={styles.borrow}\n      onClick={(e) => {\n        e.stopPropagation()\n        setShowPanelIndex(0)\n      }}\n    >\n      {txt || _('borrow')}\n    </span>\n  )\n}\n\nexport const RepayBtn = (props) => {\n  const { setShowPanelIndex } = props\n  return (\n    <span\n      className={styles.repay}\n      onClick={(e) => {\n        e.stopPropagation()\n        setShowPanelIndex(1)\n      }}\n    >\n      {_('repay')}\n    </span>\n  )\n}\n","import styles from './index.less'\nimport _ from '@/i18n'\nimport { DropDownArr } from '@/components/ui'\nimport Btn from '@/components/btn'\nimport { amountRaw, debounce, envir, getFullTokenDataById, toFixed } from '@/common/utils'\nimport { useEffect, useState } from 'react'\nimport type { CommonStateType, TokenStateType, WalletStateType } from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { Loading as Spin } from '@/components/loading'\nimport SimpleCard from '@/components/card'\nimport { message } from '@/components/message'\nimport Result from '@/components/result'\nimport { AmountLoading } from '@/common/config'\n\nfunction AddLiquidity(props) {\n  const dispatch = useDispatch()\n  const { walletChainId, tokenDatas, currentToken, close, currentWallet } = props\n\n  const { calcAddLiqOut, addLiq } = currentWallet || {}\n\n  const [tokenId, setTokenId] = useState(currentToken.tokenId || (tokenDatas[0] || {}).tokenId)\n  const [amountIn, setAmountIn] = useState('')\n  const [amountOut, setAmountOut] = useState('')\n  const [increasedPoolShare, setIncreasedPoolShare] = useState('0')\n  const [submiting, setSubmiting] = useState(false)\n  const [resultVisible, setResultVisible] = useState(false)\n  const [txid, setTxid] = useState('')\n  const [calculating, setCalculating] = useState(false)\n\n  const tokenObj = tokenId ? getFullTokenDataById(tokenId, tokenDatas) : tokenDatas[0]\n\n  async function changeAmount(amount: string) {\n    // if (calculating) return\n\n    setAmountIn(amount)\n\n    const env = await envir(currentWallet, walletChainId)\n    if (!env || !tokenId) return\n\n    debounce(changeAmountIn, 500)(amount)\n  }\n\n  async function changeAmountIn(amount: string) {\n    if (!amount) {\n      setAmountOut('')\n      setIncreasedPoolShare('0')\n      return\n    }\n    setCalculating(true)\n    const _amountInRaw = amountRaw(amount || '0', tokenObj.tokenDecimal)\n    const res = await calcAddLiqOut(walletChainId, tokenId, _amountInRaw, tokenObj)\n\n    if (res.error) {\n      message(res.error)\n      setAmountOut('')\n      setIncreasedPoolShare('0')\n    } else if (res.amountOut) {\n      setAmountOut(res.amountOut)\n      setIncreasedPoolShare(toFixed(res.increasedPoolShare, 4))\n    }\n    setCalculating(false)\n  }\n\n  const finishSubmit = async (hash: string) => {\n    setTxid(hash)\n    setResultVisible(true)\n    await dispatch({\n      type: 'tokens/updatePrice',\n    })\n    // dispatch({\n    //   type: 'tokens/fetchPoolInfo',\n    // })\n  }\n\n  async function handleSubmit() {\n    // console.log('dataSourceChainId', currentWallet.dataSourceChainId)\n    const env = await envir(currentWallet, walletChainId)\n    if (!env) return\n    setSubmiting(true)\n    const _amountRaw = amountRaw(amountIn || '0', tokenObj.tokenDecimal)\n    const res = await addLiq({\n      tokenId,\n      _amountRaw,\n      chainId: walletChainId,\n      amountRaw: _amountRaw.toString(),\n    })\n\n    if (res.error) {\n      message(res.error)\n    } else if (res.hash) {\n      finishSubmit(res.hash)\n    }\n    setSubmiting(false)\n  }\n\n  useEffect(() => {\n    // currentWallet.faucet()\n    changeAmountIn(amountIn)\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tokenId])\n\n  const closeResultModal = async () => {\n    setResultVisible(false)\n    close()\n    await dispatch({\n      type: 'tokens/updatePrice',\n    })\n    // dispatch({\n    //   type: 'tokens/fetchPoolInfo',\n    // })\n  }\n\n  return (\n    <>\n      <Spin spinning={tokenDatas.length < 1 || submiting}>\n        <div className={styles.container}>\n          <SimpleCard\n            title={_('pay')}\n            amount={amountIn}\n            onAmountChange={(amount: number) => changeAmount((amount || '0').toString())}\n            token={tokenObj}\n            onChangeToken={(item) => setTokenId(item.tokenId)}\n            type=\"addLiq\"\n          />\n          <div className={styles.arr}>\n            <DropDownArr />\n          </div>\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div>{`${tokenObj.symbol} ${_('lptoken_receive')}`}</div>\n              <div>{_('increased_pool')}</div>\n            </div>\n            <div className={styles.value}>\n              <div className={styles.amount} title={calculating ? '' : amountOut}>\n                {calculating ? AmountLoading : amountOut}\n              </div>\n              <div style={{ marginLeft: 10 }}>\n                {calculating ? AmountLoading : `${increasedPoolShare}%`}\n              </div>\n            </div>\n          </div>\n          {/* <SimpleCard\n            left={<div>{`${tokenObj.symbol} ${_('lptoken_receive')}`}</div>}\n            right={_('increased_pool')}\n            amount={calculating ? AmountLoading : amountOut}\n            rightBottom={\n              <div style={{ marginLeft: 10 }}>\n                {calculating ? AmountLoading : `${increasedPoolShare}%`}\n              </div>\n            }\n          /> */}\n\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={handleSubmit}\n            conditions={[\n              {\n                handle: !tokenId,\n                txt: _('select_asset'),\n              },\n              {\n                handle: parseFloat(amountIn || '0') <= 0,\n                txt: _('input_amount'),\n              },\n              // {\n              //   handle: parseFloat(amountIn || '0') > parseFloat(tokenObj.userTokenBalance || '0'),\n              //   txt: _('lack_balance'),\n              // },\n            ]}\n          >\n            {_('add_liquidity')}\n          </Btn>\n        </div>\n      </Spin>\n\n      {resultVisible && (\n        <Result\n          title={_('deposit_done')}\n          amountTitle={_('deposited_amount')}\n          txid={txid}\n          chainId={walletChainId}\n          visible={resultVisible}\n          close={closeResultModal}\n          tokenIn={{\n            ...tokenObj,\n            amount: amountIn,\n          }}\n          tokenOuts={[\n            {\n              icon: tokenObj?.iconLp,\n              symbol: tokenObj?.lpSymbol,\n              tokenId: tokenObj?.liquidity,\n              amount: amountOut,\n            },\n          ]}\n        />\n      )}\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(AddLiquidity)\n","import styles from './index.less'\nimport _ from '@/i18n'\nimport { DropDownArr } from '@/components/ui'\nimport Btn from '@/components/btn'\nimport { amountRaw, debounce, envir, formatSat, getFullTokenDataById } from '@/common/utils'\nimport { useEffect, useState } from 'react'\nimport type { CommonStateType, TokenStateType, WalletStateType } from '@/models/dataType'\nimport { connect, useDispatch } from 'umi'\nimport { Loading as Spin } from '@/components/loading'\nimport SimpleCard from '@/components/card'\nimport { AmountLoading } from '@/common/config'\nimport Token from '@/components/chooseToken/token'\nimport { message } from '@/components/message'\nimport Result from '@/components/result'\n\nfunction RemoveLiquidity(props) {\n  const dispatch = useDispatch()\n  const { walletChainId, currentToken, tokenDatas, close, currentWallet, osdTokenData } = props\n  const [tokenId, setTokenId] = useState(currentToken.tokenId || (tokenDatas[0] || {}).tokenId)\n\n  const { calcRemoveLiqIn, removeLiq } = currentWallet || {}\n\n  const [amountIn, setAmountIn] = useState('')\n  const [amountOutToken, setAmountOutToken] = useState('0')\n  const [amountOutOsd, setAmountOutOsd] = useState('0')\n  const [submiting, setSubmiting] = useState(false)\n  const [resultVisible, setResultVisible] = useState(false)\n  const [txid, setTxid] = useState('')\n  const [calculating, setCalculating] = useState(false)\n\n  const tokenObj = getFullTokenDataById(tokenId, tokenDatas)\n\n  async function changeAmount(amount: string) {\n    // if (calculating) return\n    \n    setAmountIn(amount)\n    const env = await envir(currentWallet, walletChainId)\n    if (!env || !tokenId) return\n    debounce(changeAmountIn, 500)(amount)\n  }\n\n  async function changeAmountIn(amount: string) {\n    if (!amount) {\n      setAmountOutToken('')\n      setAmountOutOsd('')\n      return\n    }\n    setCalculating(true)\n\n    let _amountInRaw = amountRaw(amount || '0', tokenObj.lpDecimal)\n    const res = await calcRemoveLiqIn(walletChainId, tokenId, _amountInRaw)\n    if (res.error) {\n      message(res.error)\n      setAmountOutToken('')\n      setAmountOutOsd('')\n    } else if (res.amountOutToken) {\n      setAmountOutToken(formatSat(res.amountOutToken, tokenObj.tokenDecimal, 8))\n      setAmountOutOsd(formatSat(res.amountOutOsd, osdTokenData.tokenDecimal, 8))\n    }\n\n    setCalculating(false)\n  }\n\n  const finishSubmit = async (hash: string) => {\n    setTxid(hash)\n    setResultVisible(true)\n    await dispatch({\n      type: 'tokens/updatePrice',\n    })\n    // dispatch({\n    //   type: 'tokens/fetchPoolInfo',\n    // })\n  }\n\n  async function handleSubmit() {\n    const env = await envir(currentWallet, walletChainId)\n    if (!env || !tokenId) return\n    let _amountRaw = amountRaw(amountIn || '0', tokenObj.lpDecimal)\n    setSubmiting(true)\n    const res = await removeLiq({\n      tokenId,\n      _amountRaw,\n      chainId: walletChainId,\n      amountRaw: _amountRaw.toString(),\n      tokenObj,\n    })\n    console.log(res)\n    if (res.error) {\n      message(res.error)\n    } else if (res.hash) {\n      finishSubmit(res.hash)\n    }\n    setSubmiting(false)\n  }\n\n  useEffect(() => {\n    changeAmountIn(amountIn)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tokenId])\n\n  const closeResultModal = async () => {\n    setResultVisible(false)\n    close()\n    await dispatch({\n      type: 'tokens/updatePrice',\n    })\n\n    // dispatch({\n    //   type: 'tokens/fetchPoolInfo',\n    // })\n  }\n\n  return (\n    <>\n      <Spin spinning={tokenDatas.length < 1 || submiting}>\n        <div className={styles.container}>\n          <SimpleCard\n            left={<div>{_('burn_pool_share')}:</div>}\n            amount={amountIn}\n            onAmountChange={(amount: string) => changeAmount(amount)}\n            type=\"lp\"\n            token={tokenObj}\n            onChangeToken={(item) => setTokenId(item.tokenId)}\n          />\n          <div className={styles.arr}>\n            <DropDownArr />\n          </div>\n          <div className={styles.card}>\n            <div className={styles.label}>\n              <div>{_('receive')}:</div>\n            </div>\n            <div className={styles.value}>\n              <div className={styles.amount}>{calculating ? AmountLoading : amountOutToken}</div>\n              <Token data={tokenObj} />\n            </div>\n            <div className={styles.value}>\n              <div className={styles.amount}>{calculating ? AmountLoading : amountOutOsd}</div>\n              <Token data={osdTokenData} />\n            </div>\n          </div>\n          <Btn\n            height={50}\n            align=\"center\"\n            onClick={handleSubmit}\n            conditions={[\n              {\n                handle: !tokenId,\n                txt: _('select_asset'),\n              },\n              {\n                handle: !(tokenObj.userLpBalance && parseFloat(tokenObj.userLpBalance) > 0),\n                txt: _('no_lpbalance'),\n              },\n              {\n                handle: parseFloat(amountIn || '0') <= 0,\n                txt: _('input_amount'),\n              },\n\n              {\n                handle: parseFloat(amountIn || '0') > parseFloat(tokenObj.userLpBalance || '0'),\n                txt: _('lack_balance'),\n              },\n            ]}\n          >\n            {_('remove_liquidity')}\n          </Btn>\n        </div>\n      </Spin>\n      {resultVisible && (\n        <Result\n          title={_('liq_remove_done')}\n          amountTitle={_('burned')}\n          txid={txid}\n          chainId={walletChainId}\n          visible={resultVisible}\n          close={closeResultModal}\n          tokenIn={{\n            icon: tokenObj?.iconLp,\n            symbol: (tokenObj?.lpSymbol)||(tokenObj?.symbol+ ' LP') || 'LP' ,\n            tokenId: tokenObj?.liquidity,\n            amount: amountIn,\n          }}\n          tokenOuts={[\n            {\n              ...tokenObj,\n              amount: amountOutToken,\n            },\n            {\n              ...osdTokenData,\n              amount: amountOutOsd,\n            },\n          ]}\n        />\n      )}\n    </>\n  )\n}\n\nconst mapStateToProps = ({\n  common,\n  tokens,\n  wallet,\n}: {\n  common: CommonStateType\n  tokens: TokenStateType\n  wallet: WalletStateType\n}) => {\n  return {\n    ...common,\n    ...tokens,\n    ...wallet,\n  }\n}\n\nexport default connect(mapStateToProps)(RemoveLiquidity)\n","import { Modal } from 'antd'\nimport styles from './index.less'\nimport PanelMenu from '@/components/menu'\nimport { LiquidityMenuDatas } from '@/common/config'\nimport AddLiquidity from './add'\nimport RemoveLiquidity from './remove'\n\nexport default function Liquidity(props) {\n  const { showPanelIndex, setShowPanelIndex, currentToken } = props\n\n  return (\n    <Modal\n      width={420}\n      footer={null}\n      open={showPanelIndex > -1}\n      getContainer={() => document.getElementById('J_Page') || document.body}\n      onCancel={() => setShowPanelIndex(-1)}\n      closable={false}\n      wrapClassName={styles.modal}\n    >\n      <PanelMenu\n        menuDatas={LiquidityMenuDatas}\n        menuIndex={showPanelIndex}\n        setMenuIndex={setShowPanelIndex}\n      />\n      <div style={{ display: showPanelIndex === 0 ? 'block' : 'none' }}>\n        <AddLiquidity currentToken={currentToken} close={() => setShowPanelIndex(-1)} />\n      </div>\n      <div style={{ display: showPanelIndex === 1 ? 'block' : 'none' }}>\n        <RemoveLiquidity currentToken={currentToken} close={() => setShowPanelIndex(-1)} />\n      </div>\n    </Modal>\n  )\n}\n"],"sourceRoot":""}